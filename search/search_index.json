{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"AeroViz","text":"<p>A modern Python package for aerosol data processing and visualization</p> Getting started              New to AeroViz? Check out the Beginner's Guide. It contains an introduction to AeroViz's main features and examples to get you started quickly.          To the beginner's guide User guide              The user guide provides in-depth information on key concepts of AeroViz with detailed explanations of data processing and visualization capabilities.          To the user guide API reference              The reference guide contains detailed descriptions of the functions, classes, and methods included in AeroViz. It assumes that you have an understanding of the key concepts.          To the reference guide AeroViz              A platform for real-time monitoring, offering data visualization and analytical insights.          Visit Website"},{"location":"#installation","title":"Installation","text":"<p>You can install AeroViz using pip:</p> <pre><code>pip install AeroViz\n</code></pre> <p>For detailed installation instructions, system requirements, and troubleshooting, please see the Getting Started Guide.</p>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Here's a simple example of how to use AeroViz:</p> <pre><code>from datetime import datetime\nfrom pathlib import Path\nfrom AeroViz import RawDataReader, DataProcess, plot\n\n# Read data from a supported instrument\ndata = RawDataReader(\n    instrument='AE33',\n    path=Path('/path/to/folder'),\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 12, 31)\n)\n\n# Process the data\nprocessor = DataProcess(data)\nprocessed_data = processor.process()\n\n# Create visualization\nplot.time_series(processed_data, 'BC')\n</code></pre> <p>For detailed tutorials and examples, see the Getting Started Guide.</p>"},{"location":"#key-features","title":"Key Features","text":"<p>AeroViz is a comprehensive Python package designed for aerosol data processing and visualization. It provides a unified interface for handling data from various aerosol instruments, performing quality control, and creating publication-ready visualizations.</p> <ul> <li>Unified Data Interface: Standardized data structures and built-in quality control across multiple instrument types</li> <li>Advanced Processing: Customizable processing pipelines with automated corrections and statistical analysis tools</li> <li>Publication-Ready Visualization: High-resolution plots with extensive customization options</li> </ul>"},{"location":"#documentation","title":"Documentation","text":"<ul> <li> <p>Installation Guide - Setup instructions</p> </li> <li> <p>API Reference - Detailed function documentation</p> </li> </ul>"},{"location":"#contributing","title":"Contributing","text":"<p>AeroViz is an open-source project. Contributions and suggestions are welcome! Visit our GitHub repository to get involved.</p>"},{"location":"CHANGELOG/","title":"Changelog","text":""},{"location":"CHANGELOG/#unreleased","title":"Unreleased","text":""},{"location":"CHANGELOG/#v0117-2025-12-14","title":"v0.1.17 (2025-12-14)","text":""},{"location":"CHANGELOG/#feat","title":"Feat","text":"<ul> <li>Implement QCFlagBuilder system for unified QC workflow</li> <li>Add QCRule dataclass for declarative QC rule definition</li> <li>Add pre_process.py for unified absorption/scattering coefficient calculation</li> <li>Unified QC_Flag column for all instrument data quality marking</li> <li>QC Summary output at end of processing with validation results</li> </ul>"},{"location":"CHANGELOG/#docs","title":"Docs","text":"<ul> <li>Update QC_Flag handling documentation for all instruments</li> <li>Clarify QC_Flag only in intermediate files, removed from final output</li> <li>Update RawDataReader processing flow documentation</li> <li>Simplify Technical Specifications table in instruments index</li> </ul>"},{"location":"CHANGELOG/#refactor","title":"Refactor","text":"<ul> <li>Simplify rate calculation and remove deter_key dependency</li> <li>Unify QC output format across all instrument readers</li> </ul>"},{"location":"CHANGELOG/#v0116-2025-02-20","title":"v0.1.16 (2025-02-20)","text":""},{"location":"CHANGELOG/#breaking-change","title":"BREAKING CHANGE","text":"<ul> <li>Complete overhaul from v0.1.9.0 to v0.1.11</li> </ul>"},{"location":"CHANGELOG/#feat_1","title":"Feat","text":"<ul> <li>enhance rate calculation to use minimum rates across all determinant keys</li> <li>workflow: add unpublish.yml</li> </ul>"},{"location":"CHANGELOG/#fix","title":"Fix","text":"<ul> <li>repair TEOM parsing and optical scatter key errors</li> <li>improve time handling for instrument data and reporting</li> <li>improve aerosol data processing and quality control</li> <li>improve aerosol data processing and quality control</li> <li>RawDataReader and the ReaderLogger class to better handle different environments and edge cases</li> </ul>"},{"location":"CHANGELOG/#refactor_1","title":"Refactor","text":"<ul> <li>RawDataReader: simplify configuration and unify output handling</li> </ul>"},{"location":"api/","title":"API Reference","text":"<p>Complete technical reference documentation for AeroViz, a comprehensive Python package for aerosol data processing, analysis, and visualization.</p> <p>About AeroViz API</p> <p>AeroViz provides a unified interface for working with aerosol measurement data from multiple instrument types. The API is designed for scientific research applications with emphasis on data quality, reproducibility, and ease of use.</p>"},{"location":"api/#core-components","title":"Core Components","text":""},{"location":"api/#data-input-and-processing","title":"Data Input and Processing","text":"<p>RawDataReader Primary interface for reading and standardizing aerosol instrument data with automatic format detection.</p> <ul> <li>AbstractReader - Base class architecture and extension points</li> <li>Quality Control - Data validation, filtering, and quality assurance</li> <li>Supported Instruments - Complete instrument compatibility matrix</li> </ul>"},{"location":"api/#measurement-instrument-support","title":"Measurement Instrument Support","text":"<p>AeroViz provides native support for the following categories of aerosol instruments:</p> <p>Black Carbon and Light Absorption</p> <ul> <li>AE33 - Magee Scientific AE33 7-wavelength aethalometer</li> <li>AE43 - Magee Scientific AE43 real-time measurements</li> <li>BC1054 - MetOne BC1054 high-resolution absorption</li> <li>MA350 - AethLabs MA350 multi-angle photometer</li> </ul> <p>Light Scattering Measurements</p> <ul> <li>Aurora - Ecotech Aurora 3-wavelength nephelometer</li> <li>NEPH - TSI nephelometer standard processing</li> </ul> <p>Particle Size Distribution</p> <ul> <li>SMPS - Scanning Mobility Particle Sizer (10-600 nm)</li> <li>APS - Aerodynamic Particle Sizer (0.5-20 \u03bcm)</li> <li>GRIMM - GRIMM Aerosol Spectrometer optical sizing</li> </ul> <p>Chemical Composition Analysis</p> <ul> <li>IGAC - Ion chromatography for water-soluble species</li> <li>OCEC - Organic and elemental carbon analysis</li> <li>VOC - Volatile organic compounds monitoring</li> <li>Xact - Xact 625i XRF elemental analyzer</li> <li>TEOM - Tapered Element Oscillating Microbalance</li> </ul>"},{"location":"api/#data-processing-and-analysis","title":"Data Processing and Analysis","text":"<p>DataProcess Advanced data processing engine for aerosol science with specialized modules:</p> <ul> <li>SizeDistr - Particle size distribution processing and analysis</li> <li>Chemistry - Chemical composition and mass reconstruction</li> <li>Optical - Optical properties and extinction calculations</li> <li>VOC - Volatile organic compounds analysis</li> </ul>"},{"location":"api/#visualization-and-plotting","title":"Visualization and Plotting","text":"<p>Plot API Professional-grade plotting interface optimized for scientific publications with publication-ready defaults.</p>"},{"location":"api/#available-plot-types","title":"Available Plot Types","text":"<ul> <li>Scatter Plots - Correlation analysis with statistical regression</li> <li>Regression Analysis - Statistical relationship modeling and fitting</li> <li>Box Plots - Statistical distribution summaries and outlier detection</li> <li>Bar Charts - Categorical data visualization and comparison</li> <li>Violin Plots - Distribution shape analysis and comparison</li> <li>Pie Charts - Proportional data representation</li> </ul>"},{"location":"api/#getting-started","title":"Getting Started","text":""},{"location":"api/#new-users","title":"New Users","text":"<p>Begin with the RawDataReader for data input, understand Quality Control procedures, then explore basic plotting capabilities.</p>"},{"location":"api/#advanced-users","title":"Advanced Users","text":"<p>Leverage DataProcess for complex workflows, consult instrument-specific documentation for detailed configurations, and utilize advanced plotting features for publication-quality figures.</p>"},{"location":"api/#developers","title":"Developers","text":"<p>Review the AbstractReader architecture for understanding the framework design, examine existing instrument implementations as templates, and study plotting modules for extending visualization capabilities.</p>"},{"location":"api/#documentation-standards","title":"Documentation Standards","text":"<p>API Documentation Convention</p> <p>All AeroViz API documentation follows NumPy docstring standards and includes:</p> <ul> <li>Parameters - Complete parameter descriptions with data types</li> <li>Returns - Detailed return value specifications and formats  </li> <li>Examples - Working code examples with expected outputs</li> <li>Notes - Implementation details, limitations, and best practices</li> <li>References - Scientific literature and technical specifications</li> </ul>"},{"location":"api/#related-resources","title":"Related Resources","text":"<ul> <li>User Guide - Step-by-step tutorials and workflow examples</li> <li>Examples - Real-world usage scenarios and case studies</li> <li>Installation Guide - Setup instructions and system requirements</li> </ul>"},{"location":"api/AbstractReader/","title":"AbstractReader","text":"<p>The <code>AbstractReader</code> class is the foundation of AeroViz's data reading system, providing a standardized interface for reading and processing aerosol instrument data.</p> <p>Core Architecture</p> <p>AbstractReader serves as the base class for all instrument-specific readers in AeroViz. It defines the common interface and provides shared functionality for data processing, quality control, and output formatting.</p>"},{"location":"api/AbstractReader/#overview","title":"Overview","text":"<p>The AbstractReader implements a consistent workflow for all aerosol instruments:</p> <ol> <li>Data Ingestion - Read raw instrument files</li> <li>Format Detection - Automatically identify data structure</li> <li>Quality Control - Apply built-in validation and filtering</li> <li>Standardization - Convert to unified output format</li> <li>Metadata Handling - Preserve instrument and measurement metadata</li> </ol> <p>Usage Pattern</p> <p>While you can use AbstractReader directly, it's typically accessed through the <code>RawDataReader</code> factory function which automatically selects the appropriate reader based on your instrument type.</p>"},{"location":"api/AbstractReader/#key-features","title":"Key Features","text":"<ul> <li>Flexible Input Handling - Supports various file formats and structures</li> <li>Built-in Quality Control - Configurable data validation and filtering</li> <li>Metadata Preservation - Maintains instrument configuration and measurement context</li> <li>Extensible Design - Easy to subclass for new instruments</li> <li>Error Handling - Robust error reporting and recovery</li> </ul> <p>Implementation Note</p> <p>AbstractReader is an abstract base class. For actual data reading, use instrument-specific implementations or the <code>RawDataReader</code> factory function.</p>"},{"location":"api/AbstractReader/#api-reference","title":"API Reference","text":""},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader","title":"AeroViz.rawDataReader.core.AbstractReader","text":"<pre><code>AbstractReader(path: Path | str, reset: bool | str = False, qc: bool | str = True, **kwargs)\n</code></pre> <p>               Bases: <code>ABC</code></p> <p>Abstract class for reading raw data from different instruments.</p> <p>This class serves as a base class for reading raw data from various instruments. Each instrument should have a separate class that inherits from this class and implements the abstract methods. The abstract methods are <code>_raw_reader</code> and <code>_QC</code>.</p> <p>The class handles file management, including reading from and writing to pickle files, and implements quality control measures. It can process data in both batch and streaming modes.</p> <p>Attributes:</p> Name Type Description <code>nam</code> <code>str</code> <p>Name identifier for the reader class</p> <code>path</code> <code>Path</code> <p>Path to the raw data files</p> <code>meta</code> <code>dict</code> <p>Metadata configuration for the instrument</p> <code>logger</code> <code>ReaderLogger</code> <p>Custom logger instance for the reader</p> <code>reset</code> <code>bool</code> <p>Flag to indicate whether to reset existing processed data</p> <code>append</code> <code>bool</code> <p>Flag to indicate whether to append new data to existing processed data</p> <code>qc</code> <code>bool or str</code> <p>Quality control settings</p> <code>qc_freq</code> <code>str or None</code> <p>Frequency for quality control calculations</p> <p>Initialize the AbstractReader.</p> <p>Parameters:</p> Name Type Description Default <code>path</code> <code>Path or str</code> <p>Path to the directory containing raw data files</p> required <code>reset</code> <code>bool or str</code> <p>If True, forces re-reading of raw data If 'append', appends new data to existing processed data</p> <code>False</code> <code>qc</code> <code>bool or str</code> <p>If True, performs quality control If str, specifies the frequency for QC calculations</p> <code>True</code> <code>**kwargs</code> <code>dict</code> <p>Additional keyword arguments:     log_level : str         Logging level for the reader     suppress_warnings : bool         If True, suppresses warning messages</p> <code>{}</code> Notes <p>Creates necessary output directories and initializes logging system. Sets up paths for pickle files, CSV files, and report outputs.</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader-attributes","title":"Attributes","text":""},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.append","title":"append  <code>instance-attribute</code>","text":"<pre><code>append = reset == 'append'\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.csv_nam","title":"csv_nam  <code>instance-attribute</code>","text":"<pre><code>csv_nam = output_folder / f'_read_{lower()}_qc.csv'\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.csv_nam_raw","title":"csv_nam_raw  <code>instance-attribute</code>","text":"<pre><code>csv_nam_raw = output_folder / f'_read_{lower()}_raw.csv'\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.csv_out","title":"csv_out  <code>instance-attribute</code>","text":"<pre><code>csv_out = output_folder / f'output_{lower()}.csv'\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.kwargs","title":"kwargs  <code>instance-attribute</code>","text":"<pre><code>kwargs = kwargs\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.logger","title":"logger  <code>instance-attribute</code>","text":"<pre><code>logger = ReaderLogger(nam, output_folder, upper() if not get('suppress_warnings') else 'ERROR')\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.meta","title":"meta  <code>instance-attribute</code>","text":"<pre><code>meta = meta[nam]\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'AbstractReader'\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.path","title":"path  <code>instance-attribute</code>","text":"<pre><code>path = Path(path)\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.pkl_nam","title":"pkl_nam  <code>instance-attribute</code>","text":"<pre><code>pkl_nam = output_folder / f'_read_{lower()}_qc.pkl'\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.pkl_nam_raw","title":"pkl_nam_raw  <code>instance-attribute</code>","text":"<pre><code>pkl_nam_raw = output_folder / f'_read_{lower()}_raw.pkl'\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.qc","title":"qc  <code>instance-attribute</code>","text":"<pre><code>qc = qc\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.qc_freq","title":"qc_freq  <code>instance-attribute</code>","text":"<pre><code>qc_freq = qc if isinstance(qc, str) else None\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.report_out","title":"report_out  <code>instance-attribute</code>","text":"<pre><code>report_out = output_folder / 'report.json'\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.reset","title":"reset  <code>instance-attribute</code>","text":"<pre><code>reset = reset is True\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader-functions","title":"Functions","text":""},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.QC_control","title":"QC_control  <code>staticmethod</code>","text":"<pre><code>QC_control()\n</code></pre>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader._QC","title":"_QC  <code>abstractmethod</code>","text":"<pre><code>_QC(df: DataFrame) -&gt; DataFrame\n</code></pre> <p>Abstract method for quality control processing.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input DataFrame containing raw data</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Quality controlled data with QC_Flag column</p> Notes <p>Must be implemented by child classes to handle instrument-specific QC. This method should only check raw data quality (status, range, completeness). Derived parameter validation should be done in _process().</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.__call__","title":"__call__","text":"<pre><code>__call__(start: datetime, end: datetime, mean_freq: str = '1h') -&gt; DataFrame\n</code></pre> <p>Process data for a specified time range.</p> <p>Parameters:</p> Name Type Description Default <code>start</code> <code>datetime</code> <p>Start time for data processing</p> required <code>end</code> <code>datetime</code> <p>End time for data processing</p> required <code>mean_freq</code> <code>str</code> <p>Frequency for resampling the data</p> <code>'1h'</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed and resampled data for the specified time range</p> Notes <p>The processed data is also saved to a CSV file.</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader._generate_report","title":"_generate_report","text":"<pre><code>_generate_report(raw_data, qc_data, qc_flag=None) -&gt; None\n</code></pre> <p>Calculate and log data quality rates for different time periods.</p> <p>Parameters:</p> Name Type Description Default <code>raw_data</code> <code>DataFrame</code> <p>Raw data before quality control</p> required <code>qc_data</code> <code>DataFrame</code> <p>Data after quality control</p> required <code>qc_flag</code> <code>Series</code> <p>QC flag series indicating validity of each row</p> <code>None</code> Notes <p>Calculates rates for specified QC frequency if set. Updates the quality report with calculated rates.</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader._outlier_process","title":"_outlier_process","text":"<pre><code>_outlier_process(_df)\n</code></pre> <p>Process outliers in the data.</p> <p>Parameters:</p> Name Type Description Default <code>_df</code> <code>DataFrame</code> <p>Input DataFrame containing potential outliers</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>DataFrame with outliers processed</p> Notes <p>Implementation depends on specific instrument requirements.</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader._process","title":"_process","text":"<pre><code>_process(df: DataFrame) -&gt; DataFrame\n</code></pre> <p>Process data to calculate derived parameters.</p> <p>This method is called after _QC() to calculate instrument-specific derived parameters (e.g., absorption coefficients, AAE, SAE).</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Quality-controlled DataFrame with QC_Flag column</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>DataFrame with derived parameters added and QC_Flag updated</p> Notes <p>Default implementation returns the input unchanged. Override in child classes to implement instrument-specific processing.</p> <p>The method should: 1. Skip calculation for rows where QC_Flag != 'Valid' (optional optimization) 2. Calculate derived parameters 3. Validate derived parameters and update QC_Flag if invalid</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader._raw_reader","title":"_raw_reader  <code>abstractmethod</code>","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Abstract method to read raw data files.</p> <p>Parameters:</p> Name Type Description Default <code>file</code> <code>Path or str</code> <p>Path to the raw data file</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Raw data read from the file</p> Notes <p>Must be implemented by child classes to handle specific file formats.</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader._read_raw_files","title":"_read_raw_files","text":"<pre><code>_read_raw_files() -&gt; tuple[DataFrame | None, DataFrame | None]\n</code></pre> <p>Read and process raw data files.</p> <p>Returns:</p> Type Description <code>tuple[DataFrame | None, DataFrame | None]</code> <p>Tuple containing:     - Raw data DataFrame or None     - Quality controlled DataFrame or None</p> Notes <p>Handles file reading and initial processing.</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader._run","title":"_run","text":"<pre><code>_run(user_start, user_end)\n</code></pre> <p>Main execution method for data processing.</p> <p>Parameters:</p> Name Type Description Default <code>user_start</code> <code>datetime</code> <p>Start time for processing</p> required <code>user_end</code> <code>datetime</code> <p>End time for processing</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed data for the specified time range</p> Notes <p>Coordinates the entire data processing workflow.</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader._save_data","title":"_save_data","text":"<pre><code>_save_data(raw_data: DataFrame, qc_data: DataFrame) -&gt; None\n</code></pre> <p>Save processed data to files.</p> <p>Parameters:</p> Name Type Description Default <code>raw_data</code> <code>DataFrame</code> <p>Raw data to save</p> required <code>qc_data</code> <code>DataFrame</code> <p>Quality controlled data to save</p> required Notes <p>Saves data in both pickle and CSV formats.</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader._timeIndex_process","title":"_timeIndex_process","text":"<pre><code>_timeIndex_process(_df, user_start=None, user_end=None, append_df=None)\n</code></pre> <p>Process time index of the DataFrame.</p> <p>Parameters:</p> Name Type Description Default <code>_df</code> <code>DataFrame</code> <p>Input DataFrame to process</p> required <code>user_start</code> <code>datetime</code> <p>User-specified start time</p> <code>None</code> <code>user_end</code> <code>datetime</code> <p>User-specified end time</p> <code>None</code> <code>append_df</code> <code>DataFrame</code> <p>DataFrame to append to</p> <code>None</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>DataFrame with processed time index</p> Notes <p>Handles time range filtering and data appending.</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.progress_reading","title":"progress_reading","text":"<pre><code>progress_reading(files: list) -&gt; Generator\n</code></pre> <p>Context manager for tracking file reading progress.</p> <p>Parameters:</p> Name Type Description Default <code>files</code> <code>list</code> <p>List of files to process</p> required <p>Yields:</p> Type Description <code>Progress</code> <p>Progress bar object for tracking</p> Notes <p>Uses rich library for progress display.</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.reorder_dataframe_columns","title":"reorder_dataframe_columns  <code>staticmethod</code>","text":"<pre><code>reorder_dataframe_columns(df, order_lists: list[list], keep_others: bool = False)\n</code></pre> <p>Reorder DataFrame columns according to specified lists.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input DataFrame</p> required <code>order_lists</code> <code>list[list]</code> <p>Lists specifying column order</p> required <code>keep_others</code> <code>bool</code> <p>If True, keeps unspecified columns at the end</p> <code>False</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>DataFrame with reordered columns</p>"},{"location":"api/AbstractReader/#AeroViz.rawDataReader.core.AbstractReader.update_qc_flag","title":"update_qc_flag  <code>staticmethod</code>","text":"<pre><code>update_qc_flag(df: DataFrame, mask: Series, flag_name: str) -&gt; DataFrame\n</code></pre> <p>Update QC_Flag column for rows matching the mask.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>DataFrame with QC_Flag column</p> required <code>mask</code> <code>Series</code> <p>Boolean mask indicating rows to flag</p> required <code>flag_name</code> <code>str</code> <p>Name of the flag to add</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>DataFrame with updated QC_Flag column</p>"},{"location":"api/AbstractReader/#related-documentation","title":"Related Documentation","text":"<ul> <li>RawDataReader Factory - High-level interface for instrument data reading</li> <li>Quality Control - Data validation and filtering options</li> <li>Supported Instruments - Available instrument implementations</li> </ul> <p>Quick Example</p> <pre><code>from AeroViz import RawDataReader\nfrom datetime import datetime\n\n# Using the factory function (recommended)\ndata = RawDataReader(\n    instrument='AE33',\n    path='/path/to/data',\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 12, 31)\n)\n\n# Direct usage (advanced - for custom implementations)\nfrom AeroViz.rawDataReader.core import AbstractReader\n\n\nclass MyInstrumentReader(AbstractReader):\n    nam = 'MyInstrument'\n\n    def _raw_reader(self, file):\n        # Custom file reading logic\n        pass\n\n    def _QC(self, df):\n        # Custom QC logic\n        return df\n</code></pre>"},{"location":"api/QualityControl/","title":"Quality Control","text":"<p>The <code>QualityControl</code> class provides comprehensive data quality assessment and outlier detection methods for aerosol instrument data.</p>"},{"location":"api/QualityControl/#overview","title":"Overview","text":"<p>Quality control is essential for ensuring data reliability in aerosol measurements. The QualityControl class offers various statistical methods to identify and handle outliers, invalid measurements, and data quality issues.</p>"},{"location":"api/QualityControl/#key-features","title":"Key Features","text":"<ul> <li>QCFlagBuilder System - Declarative rule-based quality control</li> <li>Multiple Outlier Detection Methods - N-sigma, IQR, time-aware rolling methods</li> <li>Flexible Thresholds - Configurable parameters for different data types</li> <li>Time-Aware Processing - Considers temporal patterns in data</li> <li>Status Code Filtering - Handles instrument-specific error codes</li> <li>Data Completeness Checks - Validates temporal coverage requirements</li> </ul>"},{"location":"api/QualityControl/#qcflagbuilder-system","title":"QCFlagBuilder System","text":"<p>All instruments use the declarative QCFlagBuilder system for quality control. This system provides:</p> <ul> <li>Declarative Rules - Define QC rules as simple dataclass instances</li> <li>Consistent Processing - All instruments use <code>QC_Flag</code> internally for quality control</li> <li>Transparent Results - Failed rules are clearly listed in the flag</li> <li>Clean Output - Final output has invalid data set to NaN, <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/QualityControl/#qcrule-dataclass","title":"QCRule Dataclass","text":"<pre><code>from dataclasses import dataclass\nfrom typing import Callable\nimport pandas as pd\n\n@dataclass\nclass QCRule:\n    name: str                           # Rule identifier (e.g., \"Invalid BC\")\n    condition: Callable[[pd.DataFrame], pd.Series]  # Returns True where data fails\n    description: str                    # Human-readable description\n</code></pre>"},{"location":"api/QualityControl/#qcflagbuilder-class","title":"QCFlagBuilder Class","text":"<pre><code>class QCFlagBuilder:\n    def __init__(self, rules: list[QCRule]):\n        self.rules = rules\n\n    def build(self, df: pd.DataFrame) -&gt; pd.Series:\n        \"\"\"Build QC flag column from rules.\"\"\"\n        flags = pd.Series(\"Valid\", index=df.index)\n\n        for rule in self.rules:\n            mask = rule.condition(df)\n            for idx in df.index[mask]:\n                current = flags.loc[idx]\n                if current == \"Valid\":\n                    flags.loc[idx] = rule.name\n                else:\n                    flags.loc[idx] = f\"{current}, {rule.name}\"\n\n        return flags\n</code></pre>"},{"location":"api/QualityControl/#usage-example","title":"Usage Example","text":"<pre><code>from AeroViz.rawDataReader.core.qc import QCRule, QCFlagBuilder\n\n# Define QC rules\nrules = [\n    QCRule(\n        name=\"Invalid Range\",\n        condition=lambda df: (df['value'] &lt; 0) | (df['value'] &gt; 1000),\n        description=\"Value outside valid range (0-1000)\"\n    ),\n    QCRule(\n        name=\"Missing Data\",\n        condition=lambda df: df['value'].isna(),\n        description=\"Value is missing\"\n    ),\n]\n\n# Build flags\nbuilder = QCFlagBuilder(rules)\ndf['QC_Flag'] = builder.build(df)\n\n# Results:\n# - \"Valid\" if all rules pass\n# - \"Invalid Range\" if only range check fails\n# - \"Invalid Range, Missing Data\" if both fail\n</code></pre>"},{"location":"api/QualityControl/#instrument-qc-rules-summary","title":"Instrument QC Rules Summary","text":"Instrument QC Rules AE33/AE43 Status Error, Invalid BC, Invalid AAE, Insufficient BC1054 Status Error, Invalid BC, Invalid AAE, Insufficient MA350 Status Error, Invalid BC, Invalid AAE, Insufficient SMPS Status Error, Insufficient, Low Total, High Bin, High Large Bin APS Status Error, Insufficient, Low Total, High Total NEPH/Aurora No Data, Invalid Scat Value, Invalid Scat Rel, Insufficient TEOM High Noise, Negative/Zero, NV &gt; Total, Invalid Vol Frac, Std Outlier, Insufficient BAM1020 Invalid Range, IQR Outlier OCEC Invalid Range, Below MDL, IQR Outlier, Missing OC IGAC Mass Closure, Missing Main, Below MDL, Ion Balance EPA Negative Value"},{"location":"api/QualityControl/#methods","title":"Methods","text":""},{"location":"api/QualityControl/#statistical-outlier-detection","title":"Statistical Outlier Detection","text":""},{"location":"api/QualityControl/#n-sigma-method","title":"N-Sigma Method","text":"<pre><code>from AeroViz.rawDataReader.core.qc import QualityControl\n\nqc = QualityControl()\ncleaned_data = qc.n_sigma(df, std_range=3)\n</code></pre>"},{"location":"api/QualityControl/#interquartile-range-iqr-method","title":"Interquartile Range (IQR) Method","text":"<pre><code># Basic IQR\ncleaned_data = qc.iqr(df)\n\n# With log transformation\ncleaned_data = qc.iqr(df, log_dist=True)\n</code></pre>"},{"location":"api/QualityControl/#time-aware-rolling-iqr","title":"Time-Aware Rolling IQR","text":"<pre><code># Rolling IQR with time awareness\ncleaned_data = qc.time_aware_rolling_iqr(\n    df,\n    window_size='24h',\n    iqr_factor=3.0,\n    min_periods=5\n)\n</code></pre>"},{"location":"api/QualityControl/#advanced-quality-control","title":"Advanced Quality Control","text":""},{"location":"api/QualityControl/#bidirectional-trend-analysis","title":"Bidirectional Trend Analysis","text":"<pre><code># Detect outliers while considering data trends\noutlier_mask = qc.bidirectional_trend_std_QC(\n    df,\n    window_size='6h',\n    std_factor=3.0,\n    trend_window='30min',\n    trend_factor=2.0\n)\n</code></pre>"},{"location":"api/QualityControl/#status-code-filtering","title":"Status Code Filtering","text":"<pre><code># Filter based on instrument status codes\nerror_mask = qc.filter_error_status(\n    df,\n    error_codes=[1, 2, 4, 16],\n    special_codes=[384, 1024]\n)\n</code></pre>"},{"location":"api/QualityControl/#completeness-validation","title":"Completeness Validation","text":"<pre><code># Check hourly data completeness\ncompleteness_mask = qc.hourly_completeness_QC(\n    df,\n    freq='6min',\n    threshold=0.75  # Require 75% data availability\n)\n</code></pre>"},{"location":"api/QualityControl/#usage-examples","title":"Usage Examples","text":""},{"location":"api/QualityControl/#basic-outlier-removal","title":"Basic Outlier Removal","text":"<pre><code>from AeroViz.rawDataReader.core.qc import QualityControl\nimport pandas as pd\n\n# Load your data\ndf = pd.read_csv('instrument_data.csv', index_col=0, parse_dates=True)\n\n# Initialize QC\nqc = QualityControl()\n\n# Apply basic outlier detection\ncleaned_df = qc.n_sigma(df, std_range=3)\n</code></pre>"},{"location":"api/QualityControl/#advanced-time-aware-processing","title":"Advanced Time-Aware Processing","text":"<pre><code># For time series with trends\ncleaned_df = qc.time_aware_rolling_iqr(\n    df,\n    window_size='12h',\n    iqr_factor=2.5,\n    min_periods=10\n)\n\n# With bidirectional trend consideration\noutlier_mask = qc.bidirectional_trend_std_QC(\n    df,\n    window_size='6h',\n    std_factor=3.0,\n    trend_window='1h'\n)\n\n# Apply the mask\nfinal_df = df.where(~outlier_mask, np.nan)\n</code></pre>"},{"location":"api/QualityControl/#instrument-specific-qc","title":"Instrument-Specific QC","text":"<pre><code># For instruments with status codes (e.g., AE33)\nerror_mask = qc.filter_error_status(\n    df,\n    error_codes=[1, 2, 4, 16, 32],  # Common error codes\n    special_codes=[384, 1024, 2048]  # Specific error conditions\n)\n\n# Remove error data\nqc_df = df.where(~error_mask, np.nan)\n</code></pre>"},{"location":"api/QualityControl/#api-reference","title":"API Reference","text":""},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl","title":"AeroViz.rawDataReader.core.qc.QualityControl","text":"<p>A class providing various methods for data quality control and outlier detection</p>"},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl-functions","title":"Functions","text":""},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl._ensure_dataframe","title":"_ensure_dataframe  <code>staticmethod</code>","text":"<pre><code>_ensure_dataframe(df: DataFrame | Series) -&gt; DataFrame\n</code></pre> <p>Ensure input data is in DataFrame format</p>"},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl._transform_if_log","title":"_transform_if_log  <code>staticmethod</code>","text":"<pre><code>_transform_if_log(df: DataFrame, log_dist: bool) -&gt; DataFrame\n</code></pre> <p>Transform data to log scale if required</p>"},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl.n_sigma","title":"n_sigma  <code>classmethod</code>","text":"<pre><code>n_sigma(df: DataFrame, std_range: int = 5) -&gt; DataFrame\n</code></pre> <p>Detect outliers using n-sigma method</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input data</p> required <code>std_range</code> <code>int</code> <p>Number of standard deviations to use as threshold</p> <code>5</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Cleaned DataFrame with outliers masked as NaN</p>"},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl.iqr","title":"iqr  <code>classmethod</code>","text":"<pre><code>iqr(df: DataFrame, log_dist: bool = False) -&gt; DataFrame\n</code></pre> <p>Detect outliers using Interquartile Range (IQR) method</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input data</p> required <code>log_dist</code> <code>bool</code> <p>Whether to apply log transformation to data</p> <code>False</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Cleaned DataFrame with outliers masked as NaN</p>"},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl.time_aware_rolling_iqr","title":"time_aware_rolling_iqr  <code>classmethod</code>","text":"<pre><code>time_aware_rolling_iqr(df: DataFrame, window_size: str = '24h', log_dist: bool = False, iqr_factor: float = 5, min_periods: int = 5) -&gt; DataFrame\n</code></pre> <p>Detect outliers using rolling time-aware IQR method with handling for initial periods</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input data</p> required <code>window_size</code> <code>str</code> <p>Size of the rolling window</p> <code>'24h'</code> <code>log_dist</code> <code>bool</code> <p>Whether to apply log transformation to data</p> <code>False</code> <code>iqr_factor</code> <code>float</code> <p>The factor by which to multiply the IQR</p> <code>3</code> <code>min_periods</code> <code>int</code> <p>Minimum number of observations required in window</p> <code>4</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Cleaned DataFrame with outliers masked as NaN</p>"},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl.time_aware_std_QC","title":"time_aware_std_QC","text":"<pre><code>time_aware_std_QC(df: DataFrame, time_window: str = '6h', std_factor: float = 3.0, min_periods: int = 4) -&gt; DataFrame\n</code></pre> <p>Time-aware outlier detection using rolling standard deviation</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input data</p> required <code>time_window</code> <code>str</code> <p>Rolling window size</p> <code>'6h'</code> <code>std_factor</code> <code>float</code> <p>Standard deviation multiplier (e.g., 3 means 3\u03c3)</p> <code>3.0</code> <code>min_periods</code> <code>int</code> <p>Minimum number of observations required in window</p> <code>4</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Quality controlled DataFrame with outliers marked as NaN</p>"},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl.bidirectional_trend_std_QC","title":"bidirectional_trend_std_QC  <code>classmethod</code>","text":"<pre><code>bidirectional_trend_std_QC(df: DataFrame, window_size: str = '6h', std_factor: float = 3.0, trend_window: str = '30min', trend_factor: float = 2, min_periods: int = 4) -&gt; Series\n</code></pre> <p>Perform quality control using standard deviation with awareness of both upward and downward trends.</p> <p>This method identifies outliers considering both upward and downward trends in the data, applying more lenient criteria when consistent trends are detected.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input data frame with time series (QC_Flag column is now optional)</p> required <code>window_size</code> <code>str</code> <p>Size of the rolling window for std calculation</p> <code>'6h'</code> <code>std_factor</code> <code>float</code> <p>Base factor for standard deviation threshold</p> <code>3.0</code> <code>trend_window</code> <code>str</code> <p>Window for trend detection</p> <code>'30min'</code> <code>trend_factor</code> <code>float</code> <p>Factor to increase std_factor when trends are detected</p> <code>2</code> <code>min_periods</code> <code>int</code> <p>Minimum number of observations in window</p> <code>4</code> <p>Returns:</p> Type Description <code>Series</code> <p>Boolean mask where True indicates outliers</p>"},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl.filter_error_status","title":"filter_error_status  <code>staticmethod</code>","text":"<pre><code>filter_error_status(_df, error_codes, special_codes=None, return_mask=True)\n</code></pre> <p>Filter data based on error status codes.</p> <p>Parameters:</p> Name Type Description Default <code>_df</code> <code>DataFrame</code> <p>Input DataFrame</p> required <code>error_codes</code> <code>list or array - like</code> <p>Codes indicating errors</p> required <code>special_codes</code> <code>list or array - like</code> <p>Special codes to handle differently</p> <code>None</code> <code>return_mask</code> <code>bool</code> <p>If True, returns a boolean mask where True indicates errors; If False, returns filtered DataFrame</p> <code>True</code> <p>Returns:</p> Type Description <code>Union[DataFrame, Series]</code> <p>If return_mask=True: boolean Series with True for error points If return_mask=False: Filtered DataFrame with error points masked</p>"},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl.spike_detection","title":"spike_detection  <code>classmethod</code>","text":"<pre><code>spike_detection(df: DataFrame, max_change_rate: float = 3.0, min_abs_change: float = None) -&gt; Series\n</code></pre> <p>Vectorized spike detection using change rate analysis.</p> <p>Detects sudden unreasonable value changes while allowing legitimate gradual changes during events (pollution episodes, etc.).</p> <p>This method is much faster than rolling window methods because it uses pure numpy vectorized operations.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input data frame with time series</p> required <code>max_change_rate</code> <code>float</code> <p>Maximum allowed ratio of current change to median absolute change. Higher values = more permissive. A value of 3.0 means a change must be 3x larger than the median change to be flagged.</p> <code>3.0</code> <code>min_abs_change</code> <code>float</code> <p>Minimum absolute change required to be considered a spike. If None, uses 10% of the data's standard deviation.</p> <code>None</code> <p>Returns:</p> Type Description <code>Series</code> <p>Boolean mask where True indicates detected spikes</p> Notes <p>The algorithm: 1. Calculate absolute difference between consecutive points 2. Calculate the median absolute change (robust baseline) 3. Flag points where change &gt; max_change_rate * median_change 4. Also detect \"reversals\" (spike up then immediately down)</p> <p>This approach allows gradual changes during events while catching sudden spikes that are likely instrument errors.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; qc = QualityControl()\n&gt;&gt;&gt; spike_mask = qc.spike_detection(df, max_change_rate=3.0)\n</code></pre>"},{"location":"api/QualityControl/#AeroViz.rawDataReader.core.qc.QualityControl.hourly_completeness_QC","title":"hourly_completeness_QC  <code>classmethod</code>","text":"<pre><code>hourly_completeness_QC(df: DataFrame, freq: str, threshold: float = 0.5) -&gt; Series\n</code></pre> <p>Check if each hour has sufficient data points.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input data frame with time series</p> required <code>freq</code> <code>str</code> <p>Data frequency (e.g., '6min')</p> required <code>threshold</code> <code>float</code> <p>Minimum required proportion of data points per hour (0-1)</p> <code>0.5</code> <p>Returns:</p> Type Description <code>Series</code> <p>Boolean mask where True indicates insufficient data</p>"},{"location":"api/QualityControl/#related-documentation","title":"Related Documentation","text":"<ul> <li>AbstractReader - Base class that uses QualityControl methods</li> <li>RawDataReader - Factory function with built-in QC options</li> <li>Instrument Documentation - Instrument-specific QC procedures</li> </ul>"},{"location":"api/DataProcess/","title":"DataProcess","text":"<p>\u6578\u64da\u8655\u7406\u6a21\u7d44\uff0c\u63d0\u4f9b\u6c23\u81a0\u6578\u64da\u7684\u8a08\u7b97\u8207\u5206\u6790\u529f\u80fd\u3002</p>"},{"location":"api/DataProcess/#_1","title":"\u6a21\u7d44\u7d50\u69cb","text":"<pre><code>dataProcess/\n\u251c\u2500\u2500 Chemistry/    # \u5316\u5b78\u6210\u5206\u8655\u7406\n\u251c\u2500\u2500 Optical/      # \u5149\u5b78\u7279\u6027\u8655\u7406\n\u251c\u2500\u2500 SizeDistr/    # \u7c92\u5f91\u5206\u5e03\u8655\u7406\n\u2514\u2500\u2500 VOC/          # \u63ee\u767c\u6027\u6709\u6a5f\u7269\u8655\u7406\n</code></pre>"},{"location":"api/DataProcess/#_2","title":"\u5feb\u901f\u958b\u59cb","text":"<pre><code>from pathlib import Path\nfrom AeroViz.dataProcess import DataProcess\n\n# \u4f7f\u7528\u5de5\u5ee0\u51fd\u6578\u5efa\u7acb\u8655\u7406\u5668\ndp = DataProcess(\n    method='SizeDistr',      # 'Chemistry', 'Optical', 'SizeDistr', 'VOC'\n    path_out=Path('./output'),\n    csv=True,\n    excel=False\n)\n\n# \u6216\u76f4\u63a5\u5c0e\u5165\u985e\nfrom AeroViz.dataProcess.SizeDistr import SizeDist\nfrom AeroViz.dataProcess.Chemistry import Chemistry\n</code></pre>"},{"location":"api/DataProcess/#_3","title":"\u6a21\u7d44\u5217\u8868","text":"\u6a21\u7d44 \u8aaa\u660e \u6587\u6a94 SizeDistr \u7c92\u5f91\u5206\u5e03\u8655\u7406 SizeDist \u985e\u3001SMPS-APS \u5408\u4f75 Chemistry \u5316\u5b78\u6210\u5206\u8655\u7406 \u8cea\u91cf\u91cd\u5efa\u3001\u6c23\u7c92\u5206\u914d\u3001\u6298\u5c04\u7387 Optical \u5149\u5b78\u7279\u6027\u8655\u7406 IMPROVE\u3001Mie\u3001\u6298\u5c04\u7387\u53cd\u6f14 VOC VOC \u8655\u7406 \u81ed\u6c27\u751f\u6210\u6f5b\u52e2"},{"location":"api/DataProcess/#api","title":"API \u53c3\u8003","text":""},{"location":"api/DataProcess/#AeroViz.dataProcess.DataProcess","title":"AeroViz.dataProcess.DataProcess","text":"<pre><code>DataProcess(method: str, path_out: Path, excel: bool = False, csv: bool = True)\n</code></pre> <p>Factory function to create appropriate data processing module based on method type.</p> <p>This function serves as an entry point for different data processing methods in AeroViz. It returns an instance of the appropriate processor class based on the specified method.</p> <p>Parameters:</p> Name Type Description Default <code>method</code> <code>str</code> <p>The processing method to use. Must be one of: 'Chemistry', 'Optical', 'SizeDistr', or 'VOC'.</p> required <code>path_out</code> <code>Path</code> <p>Path where processed output files will be saved.</p> required <code>excel</code> <code>bool</code> <p>Whether to save output in Excel format.</p> <code>False</code> <code>csv</code> <code>bool</code> <p>Whether to save output in CSV format.</p> <code>True</code> <p>Returns:</p> Type Description <code>object</code> <p>Instance of the selected processing class initialized with the provided parameters.</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If the specified method name is not in the supported methods list.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from AeroViz import DataProcess\n&gt;&gt;&gt; from pathlib import Path\n&gt;&gt;&gt; processor = DataProcess(method='Optical', path_out=Path('./results'))\n</code></pre>"},{"location":"api/DataProcess/Chemistry/","title":"Chemistry \u6a21\u7d44","text":"<p>\u5316\u5b78\u6210\u5206\u6578\u64da\u8655\u7406\u6a21\u7d44\u3002</p>"},{"location":"api/DataProcess/Chemistry/#_1","title":"\u7d50\u69cb","text":"<pre><code>Chemistry/\n\u251c\u2500\u2500 __init__.py       # Chemistry (Writer \u5165\u53e3)\n\u251c\u2500\u2500 _mass_volume.py   # \u8cea\u91cf\u91cd\u5efa\u3001\u9ad4\u7a4d\u8a08\u7b97\u3001\u6298\u5c04\u7387\n\u251c\u2500\u2500 _calculate.py     # \u884d\u751f\u53c3\u6578\u3001\u6c23\u7c92\u5206\u914d\u6bd4\n\u251c\u2500\u2500 _ocec.py          # OC/EC \u6bd4\u503c\u8a08\u7b97\n\u2514\u2500\u2500 _isoropia.py      # ISORROPIA \u71b1\u529b\u5b78\u6a21\u578b\n</code></pre>"},{"location":"api/DataProcess/Chemistry/#_2","title":"\u5feb\u901f\u958b\u59cb","text":"<pre><code>from pathlib import Path\nfrom AeroViz.dataProcess import DataProcess\n\ndp = DataProcess('Chemistry', Path('./output'))\nresult = dp.reconstruction_basic(df_chem)\n</code></pre>"},{"location":"api/DataProcess/Chemistry/#_3","title":"\u65b9\u6cd5\u5217\u8868","text":"\u65b9\u6cd5 \u8aaa\u660e \u76f8\u95dc\u7406\u8ad6 <code>reconstruction_basic(df)</code> \u57fa\u672c\u8cea\u91cf\u91cd\u5efa \u2192 \u8cea\u91cf\u91cd\u5efa <code>reconstruction_full(df)</code> \u5b8c\u6574\u8cea\u91cf\u91cd\u5efa (\u542b ite) \u2192 \u8cea\u91cf\u91cd\u5efa <code>volume_RI(df)</code> \u9ad4\u7a4d\u5206\u7387\u8207\u6298\u5c04\u7387 \u2192 Mie \u7406\u8ad6 <code>kappa(df, df_RH)</code> \u03ba \u5438\u6fd5\u53c3\u6578 \u2192 \u03ba-K\u00f6hler <code>derived(df)</code> \u884d\u751f\u5316\u5b78\u53c3\u6578 - <code>partition_ratios(df)</code> \u6c23\u7c92\u5206\u914d\u6bd4 (SOR, NOR) - <code>ocec_ratio(df)</code> OC/EC \u6bd4\u503c\u5206\u6790 - <code>ISORROPIA(df)</code> \u71b1\u529b\u5b78\u5e73\u8861\u8a08\u7b97 -"},{"location":"api/DataProcess/Chemistry/#_4","title":"\u8f38\u51fa\u8aaa\u660e","text":""},{"location":"api/DataProcess/Chemistry/#reconstruction_basic","title":"reconstruction_basic","text":"\u8f38\u51fa \u6b04\u4f4d <code>mass</code> AS, AN, OM, EC, Soil, SS, PM25_rc <code>NH4_status</code> Excess / Balance / Deficiency"},{"location":"api/DataProcess/Chemistry/#volume_ri","title":"volume_RI","text":"\u8f38\u51fa \u6b04\u4f4d <code>volume</code> {species}_volume <code>RI</code> n, k"},{"location":"api/DataProcess/Chemistry/#kappa","title":"kappa","text":"\u8f38\u51fa \u8aaa\u660e <code>kappa</code> \u03ba \u503c <code>gRH</code> \u6210\u9577\u56e0\u5b50"},{"location":"api/DataProcess/Chemistry/#partition_ratios","title":"partition_ratios","text":"\u8f38\u51fa \u516c\u5f0f SOR SO\u2084\u00b2\u207b/(SO\u2084\u00b2\u207b+SO\u2082) NOR NO\u2083\u207b/(NO\u2083\u207b+NO\u2082) NTR NO\u2083\u207b/(NO\u2083\u207b+HNO\u2083) epsilon_ite NO\u2083\u207b/(NO\u2083\u207b+Cl\u207b) epsilon_ss Cl\u207b/(NO\u2083\u207b+Cl\u207b)"},{"location":"api/DataProcess/Chemistry/#_5","title":"\u8f38\u5165\u683c\u5f0f","text":""},{"location":"api/DataProcess/Chemistry/#_6","title":"\u57fa\u672c\u5316\u5b78\u6210\u5206","text":"<pre><code>required_columns = [\n    'SO42-', 'NO3-', 'Cl-', 'Na+', 'NH4+', 'K+', 'Mg2+', 'Ca2+',\n    'OC', 'EC', 'Al', 'Fe', 'Ti', 'PM25'\n]\n</code></pre>"},{"location":"api/DataProcess/Chemistry/#_7","title":"\u6c23\u9ad4\u6210\u5206\uff08\u6c23\u7c92\u5206\u914d\u7528\uff09","text":"<pre><code>gas_columns = ['SO2', 'NO2', 'HNO3', 'NH3']  # ppb \u6216 \u03bcg/m\u00b3\n</code></pre>"},{"location":"api/DataProcess/Chemistry/#_8","title":"\u76f8\u95dc\u8cc7\u6e90","text":"<ul> <li>\u7bc4\u4f8b: \u5316\u5b78\u6210\u5206\u5206\u6790</li> <li>\u7406\u8ad6: \u8cea\u91cf\u91cd\u5efa | \u03ba-K\u00f6hler</li> </ul>"},{"location":"api/DataProcess/Chemistry/#api","title":"API \u53c3\u8003","text":""},{"location":"api/DataProcess/Chemistry/#AeroViz.dataProcess.Chemistry.Chemistry","title":"AeroViz.dataProcess.Chemistry.Chemistry","text":"<pre><code>Chemistry(path_out=None, excel=True, csv=False)\n</code></pre> <p>               Bases: <code>Writer</code></p>"},{"location":"api/DataProcess/Chemistry/#AeroViz.dataProcess.Chemistry.Chemistry-functions","title":"Functions","text":""},{"location":"api/DataProcess/Chemistry/#AeroViz.dataProcess.Chemistry.Chemistry.ReConstrc_basic","title":"ReConstrc_basic","text":"<pre><code>ReConstrc_basic(*df_chem, df_ref=None, df_water=None, df_density=None, nam_lst=None)\n</code></pre>"},{"location":"api/DataProcess/Chemistry/#AeroViz.dataProcess.Chemistry.Chemistry.Partition","title":"Partition","text":"<pre><code>Partition(df_data)\n</code></pre> <p>Calculate gas-particle partitioning ratios (SOR, NOR, NTR, epsilon).</p> <p>Parameters:</p> Name Type Description Default <code>df_data</code> <code>DataFrame</code> <p>Data containing particle and gas concentrations (\u03bcg/m\u00b3). Required: 'temp' column (temperature in Celsius) Optional species (at least one pair needed): - SO42-, SO2 : for SOR - NO3-, NO2 : for NOR - NH4+, NH3 : for NTR - Cl-, HCl : for chloride partitioning</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Partitioning ratios: SOR, NOR, NOR_2, NTR, epls_* columns.</p> Notes <ul> <li>SOR &gt; 0.1 indicates secondary sulfate formation</li> <li>Values near 1.0: particle phase dominant</li> <li>Values near 0.0: gas phase dominant</li> </ul>"},{"location":"api/DataProcess/Chemistry/#AeroViz.dataProcess.Chemistry.Chemistry.ISOROPIA","title":"ISOROPIA","text":"<pre><code>ISOROPIA(*df_chem, nam_lst=None)\n</code></pre>"},{"location":"api/DataProcess/Chemistry/#AeroViz.dataProcess.Chemistry.Chemistry.OCEC_basic","title":"OCEC_basic","text":"<pre><code>OCEC_basic(df_lcres, df_mass=None, ocec_ratio=None, ocec_ratio_month=1, hr_lim=200, least_square_range=(0.1, 2.5, 0.1), WISOC_OC_range=(0.2, 0.7, 0.01))\n</code></pre>"},{"location":"api/DataProcess/Chemistry/#AeroViz.dataProcess.Chemistry.Chemistry.volume_average_mixing","title":"volume_average_mixing","text":"<pre><code>volume_average_mixing(df_volume, df_alwc=None)\n</code></pre> <p>Calculate volume-average refractive index and growth factor.</p> <p>Parameters:</p> Name Type Description Default <code>df_volume</code> <code>DataFrame</code> <p>Volume data with AS_volume, AN_volume, etc. and total_dry columns.</p> required <code>df_alwc</code> <code>DataFrame</code> <p>Aerosol liquid water content data.</p> <code>None</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>RI data with n_dry, k_dry, n_amb, k_amb, gRH columns.</p>"},{"location":"api/DataProcess/Chemistry/#AeroViz.dataProcess.Chemistry.Chemistry.kappa","title":"kappa","text":"<pre><code>kappa(df_data, diameter=0.5)\n</code></pre> <p>Calculate hygroscopicity parameter kappa.</p> <p>Parameters:</p> Name Type Description Default <code>df_data</code> <code>DataFrame</code> <p>Data containing gRH, AT (temperature in C), and RH (%).</p> required <code>diameter</code> <code>float</code> <p>Particle dry diameter in micrometers.</p> <code>0.5</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Kappa values.</p>"},{"location":"api/DataProcess/Chemistry/#AeroViz.dataProcess.Chemistry.Chemistry.gRH","title":"gRH","text":"<pre><code>gRH(df_volume, df_alwc)\n</code></pre> <p>Calculate hygroscopic growth factor.</p> <p>Parameters:</p> Name Type Description Default <code>df_volume</code> <code>DataFrame</code> <p>Volume data with 'total_dry' column.</p> required <code>df_alwc</code> <code>DataFrame</code> <p>Aerosol liquid water content with 'ALWC' column.</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Growth factor data.</p>"},{"location":"api/DataProcess/Optical/","title":"Optical \u6a21\u7d44","text":"<p>\u5149\u5b78\u7279\u6027\u6578\u64da\u8655\u7406\u6a21\u7d44\u3002</p>"},{"location":"api/DataProcess/Optical/#_1","title":"\u7d50\u69cb","text":"<pre><code>Optical/\n\u251c\u2500\u2500 __init__.py       # Optical (Writer \u5165\u53e3)\n\u251c\u2500\u2500 _IMPROVE.py       # IMPROVE \u6d88\u5149\u65b9\u7a0b\n\u251c\u2500\u2500 _mie.py           # Mie \u7406\u8ad6\u8a08\u7b97\n\u251c\u2500\u2500 _mie_sd.py        # Mie \u7c92\u5f91\u5206\u5e03\u8a08\u7b97\n\u251c\u2500\u2500 _retrieve_RI.py   # \u6298\u5c04\u7387\u53cd\u6f14\n\u251c\u2500\u2500 _derived.py       # \u884d\u751f\u5149\u5b78\u53c3\u6578\n\u251c\u2500\u2500 mie_theory.py     # Mie \u6df7\u5408\u6a21\u5f0f\n\u2514\u2500\u2500 coefficient.py    # \u6563\u5c04/\u5438\u6536\u4fc2\u6578\n</code></pre>"},{"location":"api/DataProcess/Optical/#_2","title":"\u5feb\u901f\u958b\u59cb","text":"<pre><code>from pathlib import Path\nfrom AeroViz.dataProcess import DataProcess\n\ndp = DataProcess('Optical', Path('./output'))\nresult = dp.IMPROVE(df_mass, df_RH, method='revised')\n</code></pre>"},{"location":"api/DataProcess/Optical/#_3","title":"\u65b9\u6cd5\u5217\u8868","text":"\u65b9\u6cd5 \u8aaa\u660e \u76f8\u95dc\u7406\u8ad6 <code>basic(df_sca, df_abs)</code> \u57fa\u672c\u6d88\u5149\u7279\u6027 - <code>IMPROVE(df_mass, df_RH, method)</code> IMPROVE \u6d88\u5149\u65b9\u7a0b \u2192 IMPROVE <code>gas_extinction(df_no2, df_temp)</code> \u6c23\u9ad4\u6d88\u5149\u8ca2\u737b \u2192 IMPROVE <code>Mie(df_pnsd, df_m, wave_length)</code> Mie \u6d88\u5149\u8a08\u7b97 \u2192 Mie \u7406\u8ad6 <code>retrieve_RI(df_optical, df_pnsd)</code> \u6298\u5c04\u7387\u53cd\u6f14 \u2192 Mie \u7406\u8ad6 <code>derived(...)</code> \u884d\u751f\u5149\u5b78\u53c3\u6578 -"},{"location":"api/DataProcess/Optical/#_4","title":"\u8f38\u51fa\u8aaa\u660e","text":""},{"location":"api/DataProcess/Optical/#improve","title":"IMPROVE","text":"\u8f38\u51fa \u8aaa\u660e <code>dry</code> \u4e7e\u71e5\u6d88\u5149 (AS_ext, AN_ext, OM_ext, Soil_ext, SS_ext, EC_ext, Total_ext) <code>wet</code> \u6fd5\u6d88\u5149 <code>ALWC</code> \u6db2\u614b\u6c34\u8ca2\u737b (wet - dry) <code>fRH</code> \u5438\u6fd5\u6210\u9577\u56e0\u5b50"},{"location":"api/DataProcess/Optical/#mie","title":"Mie","text":"\u8f38\u51fa \u8aaa\u660e <code>extinction</code> \u6d88\u5149\u4fc2\u6578 (Mm\u207b\u00b9) <code>scattering</code> \u6563\u5c04\u4fc2\u6578 (Mm\u207b\u00b9) <code>absorption</code> \u5438\u6536\u4fc2\u6578 (Mm\u207b\u00b9)"},{"location":"api/DataProcess/Optical/#retrieve_ri","title":"retrieve_RI","text":"\u8f38\u51fa \u8aaa\u660e <code>n</code> \u5be6\u90e8 <code>k</code> \u865b\u90e8"},{"location":"api/DataProcess/Optical/#derived","title":"derived","text":"\u8f38\u51fa \u8aaa\u660e PG \u7e3d\u6d88\u5149 (Sca + Abs + Gas) MAC \u8cea\u91cf\u5438\u6536\u622a\u9762 (m\u00b2/g) Ox \u6c27\u5316\u5291\u6fc3\u5ea6 (NO\u2082 + O\u2083) Vis_cal \u8a08\u7b97\u80fd\u898b\u5ea6 (km) fRH_IMPR IMPROVE fRH OCEC_ratio OC/EC \u6bd4\u503c PM1_PM25 PM1/PM2.5 \u6bd4\u503c"},{"location":"api/DataProcess/Optical/#mie_1","title":"Mie \u6df7\u5408\u6a21\u5f0f","text":"\u6a21\u5f0f \u8aaa\u660e <code>internal</code> \u5167\u6df7\u5408\uff1a\u9ad4\u7a4d\u52a0\u6b0a\u5e73\u5747\u6298\u5c04\u7387 <code>external</code> \u5916\u6df7\u5408\uff1a\u5206\u5225\u8a08\u7b97\u5f8c\u52a0\u7e3d <code>core_shell</code> \u6838\u6bbc\u7d50\u69cb\uff1aEC \u6838\u5fc3 + \u5176\u4ed6\u6bbc\u5c64 <code>sensitivity</code> \u654f\u611f\u5ea6\u5206\u6790"},{"location":"api/DataProcess/Optical/#_5","title":"\u8f38\u5165\u683c\u5f0f","text":""},{"location":"api/DataProcess/Optical/#_6","title":"\u6563\u5c04\u4fc2\u6578","text":"<pre><code>df_sca.columns = ['G_550', 'R_700', 'B_450']  # \u6216 ['Sca_550']\n</code></pre>"},{"location":"api/DataProcess/Optical/#_7","title":"\u5438\u6536\u4fc2\u6578","text":"<pre><code>df_abs.columns = ['Abs_370', 'Abs_880', ...]  # Mm\u207b\u00b9\n</code></pre>"},{"location":"api/DataProcess/Optical/#improve_1","title":"\u8cea\u91cf\u6fc3\u5ea6\uff08IMPROVE \u7528\uff09","text":"<pre><code>required = ['AS', 'AN', 'OM', 'Soil', 'SS', 'EC']  # \u03bcg/m\u00b3\n</code></pre>"},{"location":"api/DataProcess/Optical/#_8","title":"\u76f8\u95dc\u8cc7\u6e90","text":"<ul> <li>\u7bc4\u4f8b: \u5149\u5b78\u9589\u5408\u5206\u6790</li> <li>\u7406\u8ad6: IMPROVE \u65b9\u7a0b | Mie \u7406\u8ad6</li> </ul>"},{"location":"api/DataProcess/Optical/#api","title":"API \u53c3\u8003","text":""},{"location":"api/DataProcess/Optical/#AeroViz.dataProcess.Optical.Optical","title":"AeroViz.dataProcess.Optical.Optical","text":"<pre><code>Optical(path_out=None, excel=True, csv=False)\n</code></pre> <p>               Bases: <code>Writer</code></p>"},{"location":"api/DataProcess/Optical/#AeroViz.dataProcess.Optical.Optical-functions","title":"Functions","text":""},{"location":"api/DataProcess/Optical/#AeroViz.dataProcess.Optical.Optical.scaCoe","title":"scaCoe","text":"<pre><code>scaCoe(df_sca, instru, specified_band)\n</code></pre>"},{"location":"api/DataProcess/Optical/#AeroViz.dataProcess.Optical.Optical.absCoe","title":"absCoe","text":"<pre><code>absCoe(df_ae33, instru, specified_band)\n</code></pre>"},{"location":"api/DataProcess/Optical/#AeroViz.dataProcess.Optical.Optical.basic","title":"basic","text":"<pre><code>basic(df_sca, df_abs, df_mass=None, df_no2=None, df_temp=None)\n</code></pre>"},{"location":"api/DataProcess/Optical/#AeroViz.dataProcess.Optical.Optical.Mie","title":"Mie","text":"<pre><code>Mie(df_psd, df_m, wavelength=550, psd_type='auto')\n</code></pre> <p>Calculate optical properties from PSD using Mie theory.</p> <p>Parameters:</p> Name Type Description Default <code>df_psd</code> <code>DataFrame</code> <p>Particle number size distribution. Columns are particle diameters (nm), rows are time points.</p> required <code>df_m</code> <code>DataFrame or Series</code> <p>Complex refractive index (n + ik) for each time point.</p> required <code>wavelength</code> <code>float</code> <p>Wavelength of incident light in nm.</p> <code>550</code> <code>psd_type</code> <code>str</code> <p>Type of PSD input: - 'dNdlogDp': Number concentration per log bin width (#/cm\u00b3) - 'dN': Number concentration per bin (#/cm\u00b3/bin) - 'auto': Auto-detect with warning if uncertain</p> <code>'auto'</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Optical coefficients with columns: ext, sca, abs (Mm\u207b\u00b9)</p>"},{"location":"api/DataProcess/Optical/#AeroViz.dataProcess.Optical.Optical.IMPROVE","title":"IMPROVE","text":"<pre><code>IMPROVE(df_mass, df_RH=None, method='revised', df_nh4_status=None)\n</code></pre> <p>Calculate extinction using IMPROVE equation.</p> <p>Parameters:</p> Name Type Description Default <code>df_mass</code> <code>DataFrame</code> <p>Mass concentrations with columns: AS, AN, OM, Soil, SS, EC</p> required <code>df_RH</code> <code>DataFrame</code> <p>Relative humidity data</p> <code>None</code> <code>method</code> <code>str</code> <p>IMPROVE version: 'revised' or 'modified'</p> <code>'revised'</code> <code>df_nh4_status</code> <code>DataFrame</code> <p>NH4 status from reconstruction_basic()['NH4_status']. If provided, rows with 'Deficiency' status will be excluded.</p> <code>None</code> <p>Returns:</p> Type Description <code>dict</code> <p>Dictionary with keys: - 'dry': Dry extinction DataFrame - 'wet': Wet extinction DataFrame (if df_RH provided) - 'ALWC': Water contribution (wet - dry) - 'fRH': Hygroscopic growth factor</p>"},{"location":"api/DataProcess/Optical/#AeroViz.dataProcess.Optical.Optical.gas_extinction","title":"gas_extinction","text":"<pre><code>gas_extinction(df_no2, df_temp)\n</code></pre> <p>Calculate gas contribution to extinction.</p> <p>Parameters:</p> Name Type Description Default <code>df_no2</code> <code>DataFrame</code> <p>NO2 concentration (ppb)</p> required <code>df_temp</code> <code>DataFrame</code> <p>Ambient temperature (Celsius)</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Gas extinction with ScatteringByGas, AbsorptionByGas, ExtinctionByGas</p>"},{"location":"api/DataProcess/Optical/#AeroViz.dataProcess.Optical.Optical.retrieve_RI","title":"retrieve_RI","text":"<pre><code>retrieve_RI(df_optical, df_pnsd, dlogdp=0.014, wavelength=550)\n</code></pre> <p>Retrieve refractive index from optical and PSD measurements.</p> <p>Parameters:</p> Name Type Description Default <code>df_optical</code> <code>DataFrame</code> <p>Optical data with Extinction, Scattering, Absorption columns</p> required <code>df_pnsd</code> <code>DataFrame</code> <p>Particle number size distribution data</p> required <code>dlogdp</code> <code>float</code> <p>Logarithmic bin width</p> <code>0.014</code> <code>wavelength</code> <code>float</code> <p>Wavelength in nm</p> <code>550</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Retrieved refractive index with re_real and re_imaginary columns</p>"},{"location":"api/DataProcess/Optical/#AeroViz.dataProcess.Optical.Optical.derived","title":"derived","text":"<pre><code>derived(df_sca=None, df_abs=None, df_ext=None, df_no2=None, df_o3=None, df_ec=None, df_oc=None, df_pm1=None, df_pm25=None, df_improve=None)\n</code></pre> <p>Calculate derived optical and atmospheric parameters.</p> <p>Parameters:</p> Name Type Description Default <code>df_sca</code> <code>DataFrame</code> <p>Scattering coefficient (Mm-1)</p> <code>None</code> <code>df_abs</code> <code>DataFrame</code> <p>Absorption coefficient (Mm-1)</p> <code>None</code> <code>df_ext</code> <code>DataFrame</code> <p>Extinction coefficient (Mm-1)</p> <code>None</code> <code>df_no2</code> <code>DataFrame</code> <p>NO2 concentration (ppb)</p> <code>None</code> <code>df_o3</code> <code>DataFrame</code> <p>O3 concentration (ppb)</p> <code>None</code> <code>df_ec</code> <code>DataFrame</code> <p>Elemental carbon (ug/m3)</p> <code>None</code> <code>df_oc</code> <code>DataFrame</code> <p>Organic carbon (ug/m3)</p> <code>None</code> <code>df_pm1</code> <code>DataFrame</code> <p>PM1 (ug/m3)</p> <code>None</code> <code>df_pm25</code> <code>DataFrame</code> <p>PM2.5 (ug/m3)</p> <code>None</code> <code>df_improve</code> <code>DataFrame</code> <p>IMPROVE extinction data</p> <code>None</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Derived parameters (PG, MAC, Ox, Vis_cal, fRH_IMPR, OCEC_ratio, etc.)</p>"},{"location":"api/DataProcess/SizeDistr/","title":"SizeDistr \u6a21\u7d44","text":"<p>\u7c92\u5f91\u5206\u5e03\u6578\u64da\u8655\u7406\u6a21\u7d44\u3002</p>"},{"location":"api/DataProcess/SizeDistr/#_1","title":"\u7d50\u69cb","text":"<pre><code>SizeDistr/\n\u251c\u2500\u2500 __init__.py      # SizeDistr (Writer \u5165\u53e3)\n\u251c\u2500\u2500 _size_dist.py    # SizeDist \u6838\u5fc3\u985e\n\u251c\u2500\u2500 prop.py          # \u7d71\u8a08\u8a08\u7b97\u51fd\u6578\n\u2514\u2500\u2500 merge/           # SMPS-APS \u5408\u4f75\u6f14\u7b97\u6cd5 (v0-v4)\n</code></pre>"},{"location":"api/DataProcess/SizeDistr/#_2","title":"\u5feb\u901f\u958b\u59cb","text":"<pre><code>from AeroViz.dataProcess.SizeDistr import SizeDist\n\npsd = SizeDist(df_pnsd, state='dlogdp', weighting='n')\nsurface = psd.to_surface()\nvolume = psd.to_volume()\nprops = psd.properties()\n</code></pre>"},{"location":"api/DataProcess/SizeDistr/#sizedist","title":"SizeDist \u985e","text":""},{"location":"api/DataProcess/SizeDistr/#_3","title":"\u5c6c\u6027","text":"\u5c6c\u6027 \u985e\u578b \u8aaa\u660e <code>data</code> DataFrame \u539f\u59cb\u6578\u64da <code>dp</code> ndarray \u7c92\u5f91\u9663\u5217 (nm) <code>dlogdp</code> ndarray \u5c0d\u6578\u9593\u8ddd <code>index</code> DatetimeIndex \u6642\u9593\u7d22\u5f15 <code>state</code> str 'dN', 'ddp', 'dlogdp' <code>weighting</code> str 'n', 's', 'v', 'ext_in', 'ext_ex'"},{"location":"api/DataProcess/SizeDistr/#_4","title":"\u65b9\u6cd5","text":"\u65b9\u6cd5 \u8aaa\u660e \u76f8\u95dc\u7406\u8ad6 <code>to_surface()</code> \u8f49\u63db\u70ba\u8868\u9762\u7a4d\u5206\u5e03 \u2192 \u5c0d\u6578\u5e38\u614b\u5206\u5e03 <code>to_volume()</code> \u8f49\u63db\u70ba\u9ad4\u7a4d\u5206\u5e03 \u2192 \u5c0d\u6578\u5e38\u614b\u5206\u5e03 <code>to_extinction()</code> Mie \u6d88\u5149\u8a08\u7b97 \u2192 Mie \u7406\u8ad6 <code>to_dry()</code> \u4e7e\u71e5 PSD (\u5438\u6fd5\u6821\u6b63) \u2192 \u03ba-K\u00f6hler <code>properties()</code> \u7d71\u8a08\u5c6c\u6027 (GMD, GSD) \u2192 \u5c0d\u6578\u5e38\u614b\u5206\u5e03 <code>mode_statistics()</code> \u6a21\u614b\u7d71\u8a08 \u2192 \u5c0d\u6578\u5e38\u614b\u5206\u5e03 <code>lung_deposition()</code> \u80ba\u6c89\u7a4d\u8a08\u7b97 \u2192 ICRP 66"},{"location":"api/DataProcess/SizeDistr/#_5","title":"\u6a21\u614b\u5b9a\u7fa9","text":"\u6a21\u614b \u7c92\u5f91\u7bc4\u570d Nucleation 10-25 nm Aitken 25-100 nm Accumulation 100-1000 nm Coarse 1000-2500 nm"},{"location":"api/DataProcess/SizeDistr/#sizedistr_1","title":"SizeDistr \u5165\u53e3\u985e","text":"<pre><code>from pathlib import Path\nfrom AeroViz.dataProcess import DataProcess\n\ndp = DataProcess('SizeDistr', Path('./output'))\n</code></pre>"},{"location":"api/DataProcess/SizeDistr/#_6","title":"\u65b9\u6cd5","text":"\u65b9\u6cd5 \u8aaa\u660e <code>basic(df)</code> \u57fa\u672c\u8655\u7406 (number/surface/volume) <code>merge_SMPS_APS(df_smps, df_aps)</code> SMPS-APS \u5408\u4f75 (v1) <code>merge_SMPS_APS_v4(df_smps, df_aps, df_pm25)</code> SMPS-APS \u5408\u4f75 (v4, \u63a8\u85a6) <code>distributions(df_pnsd)</code> \u5206\u5e03\u8a08\u7b97 <code>dry_psd(df_pnsd, df_gRH)</code> \u4e7e\u71e5 PSD <code>extinction_distribution(df_pnsd, df_RI)</code> \u6d88\u5149\u5206\u5e03"},{"location":"api/DataProcess/SizeDistr/#smps-aps","title":"SMPS-APS \u5408\u4f75\u6f14\u7b97\u6cd5","text":"\u7248\u672c \u7279\u9ede v0 \u539f\u59cb\u7248\u672c v0.1 \u52a0\u5165\u7d22\u5f15\u5c0d\u9f4a v1 \u52a0\u5165 shift_mode v2 \u7c21\u5316\u8f38\u51fa v3 multiprocessing + dN/dS/dV v4 PM2.5 fitness \u6821\u6b63 (\u63a8\u85a6)"},{"location":"api/DataProcess/SizeDistr/#_7","title":"\u8f38\u5165\u683c\u5f0f","text":"<pre><code># DataFrame \u6b04\u4f4d\u70ba\u7c92\u5f91\u503c (nm)\ndf_pnsd.columns = [11.8, 13.6, 15.7, ..., 523.3]\ndf_pnsd.index = DatetimeIndex\n\n# \u6210\u9577\u56e0\u5b50\ndf_gRH = DataFrame({'gRH': [1.2, 1.3, ...]}, index=time_index)\n</code></pre>"},{"location":"api/DataProcess/SizeDistr/#_8","title":"\u76f8\u95dc\u8cc7\u6e90","text":"<ul> <li>\u7bc4\u4f8b: \u7c92\u5f91\u5206\u5e03\u5206\u6790</li> <li>\u7406\u8ad6: \u5c0d\u6578\u5e38\u614b\u5206\u5e03 | ICRP 66 | Mie \u7406\u8ad6</li> </ul>"},{"location":"api/DataProcess/SizeDistr/#api","title":"API \u53c3\u8003","text":""},{"location":"api/DataProcess/SizeDistr/#AeroViz.dataProcess.SizeDistr.SizeDist","title":"AeroViz.dataProcess.SizeDistr.SizeDist","text":"<pre><code>SizeDist(data: DataFrame, state: Literal['dN', 'ddp', 'dlogdp'] = 'dlogdp', weighting: Literal['n', 's', 'v', 'ext_in', 'ext_ex'] = 'n')\n</code></pre> <p>A class representing particle size distribution data.</p> <p>This class encapsulates particle size distribution data and provides convenient properties for accessing particle diameters, logarithmic bin widths, and distribution state information.</p> <p>Attributes:</p> Name Type Description <code>_data</code> <code>DataFrame</code> <p>The processed PSD data stored as a pandas DataFrame.</p> <code>_dp</code> <code>ndarray</code> <p>The array of particle diameters from the PSD data.</p> <code>_dlogdp</code> <code>ndarray</code> <p>The array of logarithmic particle diameter bin widths.</p> <code>_index</code> <code>DatetimeIndex</code> <p>The index of the DataFrame representing time.</p> <code>_state</code> <code>str</code> <p>The state of particle size distribution data ('dN', 'ddp', 'dlogdp').</p> <code>_weighting</code> <code>str</code> <p>The weighting type for distribution calculations.</p> <p>Methods:</p> Name Description <code>data</code> <p>Returns the size distribution DataFrame.</p> <code>dp</code> <p>Returns the particle diameter array.</p> <code>dlogdp</code> <p>Returns the logarithmic bin width array.</p> <code>index</code> <p>Returns the time index.</p> <code>state</code> <p>Returns the distribution state.</p> <code>weighting</code> <p>Returns the weighting type.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from pandas import read_csv\n&gt;&gt;&gt; df = read_csv('PNSD_dNdlogdp.csv', parse_dates=['Time'], index_col='Time')\n&gt;&gt;&gt; psd = SizeDist(df, state='dlogdp', weighting='n')\n&gt;&gt;&gt; print(psd.dp)\n</code></pre> <p>Initialize a SizeDist object.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>DataFrame</code> <p>The particle size distribution data with particle diameters as columns. Column names must be numeric diameter values in nm.</p> required <code>state</code> <code>(dN, ddp, dlogdp)</code> <p>The state of the distribution data: - 'dN': Raw number concentration - 'ddp': dN/ddp normalized - 'dlogdp': dN/dlogdp normalized</p> <code>'dN'</code> <code>weighting</code> <code>(n, s, v, ext_in, ext_ex)</code> <p>The weighting type for property calculations: - 'n': Number weighting - 's': Surface weighting - 'v': Volume weighting - 'ext_in': Internal extinction weighting - 'ext_ex': External extinction weighting</p> <code>'n'</code> <p>Raises:</p> Type Description <code>ValueError</code> <p>If data is None or empty, or column names are not numeric.</p> <code>TypeError</code> <p>If data is not a DataFrame.</p>"},{"location":"api/DataProcess/SizeDistr/#AeroViz.dataProcess.SizeDistr.SizeDist-functions","title":"Functions","text":""},{"location":"api/DataProcess/SizeDistr/#AeroViz.dataProcess.SizeDistr.SizeDist.to_surface","title":"to_surface","text":"<pre><code>to_surface() -&gt; DataFrame\n</code></pre> <p>Convert to surface area distribution.</p> <p>Formula: dS/dlogDp = \u03c0 * dp\u00b2 * dN/dlogDp</p> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Surface area distribution (nm\u00b2 / cm\u00b3).</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; psd = SizeDist(df)\n&gt;&gt;&gt; surface = psd.to_surface()\n</code></pre>"},{"location":"api/DataProcess/SizeDistr/#AeroViz.dataProcess.SizeDistr.SizeDist.to_volume","title":"to_volume","text":"<pre><code>to_volume() -&gt; DataFrame\n</code></pre> <p>Convert to volume distribution.</p> <p>Formula: dV/dlogDp = (\u03c0/6) * dp\u00b3 * dN/dlogDp</p> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Volume distribution (nm\u00b3 / cm\u00b3).</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; psd = SizeDist(df)\n&gt;&gt;&gt; volume = psd.to_volume()\n</code></pre>"},{"location":"api/DataProcess/SizeDistr/#AeroViz.dataProcess.SizeDistr.SizeDist.to_extinction","title":"to_extinction","text":"<pre><code>to_extinction(RI: DataFrame, method: str = 'internal', result_type: str = 'extinction') -&gt; DataFrame\n</code></pre> <p>Calculate extinction distribution using Mie theory.</p> <p>Parameters:</p> Name Type Description Default <code>RI</code> <code>DataFrame</code> <p>Refractive index data with n and k columns.</p> required <code>method</code> <code>(internal, external, core_shell, sensitivity)</code> <p>Mixing method for Mie calculation.</p> <code>'internal'</code> <code>result_type</code> <code>(extinction, scattering, absorption)</code> <p>Type of optical result.</p> <code>'extinction'</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Extinction distribution (Mm\u207b\u00b9).</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; psd = SizeDist(df)\n&gt;&gt;&gt; ext = psd.to_extinction(df_RI, method='internal')\n</code></pre>"},{"location":"api/DataProcess/SizeDistr/#AeroViz.dataProcess.SizeDistr.SizeDist.to_dry","title":"to_dry","text":"<pre><code>to_dry(df_gRH: DataFrame, uniform: bool = True) -&gt; DataFrame\n</code></pre> <p>Convert ambient (wet) PSD to dry PSD.</p> <p>Shrinks particles according to hygroscopic growth factor and redistributes concentrations to appropriate smaller diameter bins.</p> <p>Parameters:</p> Name Type Description Default <code>df_gRH</code> <code>DataFrame</code> <p>DataFrame with 'gRH' column (growth factor = Dp_wet / Dp_dry).</p> required <code>uniform</code> <code>bool</code> <p>If True, apply uniform gRH across all sizes. If False, apply size-dependent gRH based on lognormal distribution.</p> <code>True</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Dry particle size distribution.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; psd = SizeDist(df_pnsd)\n&gt;&gt;&gt; dry_psd = psd.to_dry(df_chem[['gRH']])\n</code></pre>"},{"location":"api/DataProcess/SizeDistr/#AeroViz.dataProcess.SizeDistr.SizeDist.properties","title":"properties","text":"<pre><code>properties() -&gt; DataFrame\n</code></pre> <p>Calculate statistical properties of the distribution.</p> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Properties including GMD, GSD, mode, and mode contributions.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; psd = SizeDist(df)\n&gt;&gt;&gt; props = psd.properties()\n</code></pre>"},{"location":"api/DataProcess/SizeDistr/#AeroViz.dataProcess.SizeDistr.SizeDist.mode_statistics","title":"mode_statistics","text":"<pre><code>mode_statistics(unit: str = 'nm') -&gt; dict\n</code></pre> <p>Calculate statistics for different size modes.</p> <p>Computes number, surface, and volume distributions along with GMD, GSD, total, and mode for each size range.</p> <p>Parameters:</p> Name Type Description Default <code>unit</code> <code>(nm, um)</code> <p>Unit of particle diameter in the data.</p> <code>'nm'</code> <p>Returns:</p> Type Description <code>dict</code> <ul> <li>'number': Number distribution (dN)</li> <li>'number_norm': Normalized number distribution (dN/dlogDp)</li> <li>'surface': Surface area distribution</li> <li>'surface_norm': Normalized surface distribution</li> <li>'volume': Volume distribution</li> <li>'volume_norm': Normalized volume distribution</li> <li>'statistics': DataFrame with GMD, GSD, total, mode per size mode</li> </ul> <p>Examples:</p> <pre><code>&gt;&gt;&gt; psd = SizeDist(df)\n&gt;&gt;&gt; stats = psd.mode_statistics()\n&gt;&gt;&gt; stats['statistics']  # GMD, GSD for each mode\n</code></pre>"},{"location":"api/DataProcess/SizeDistr/#AeroViz.dataProcess.SizeDistr.SizeDist.lung_deposition","title":"lung_deposition","text":"<pre><code>lung_deposition(activity: str = 'light') -&gt; dict\n</code></pre> <p>Calculate lung deposition using ICRP 66 model.</p> <p>Based on the ICRP (International Commission on Radiological Protection) Human Respiratory Tract Model for particle deposition.</p> <p>Parameters:</p> Name Type Description Default <code>activity</code> <code>(sleep, sitting, light, heavy)</code> <p>Activity level affecting breathing pattern: - 'sleep': Sleeping (nasal, 7.5 L/min) - 'sitting': Sitting awake (nasal, 9 L/min) - 'light': Light exercise (nasal+oral, 25 L/min) - 'heavy': Heavy exercise (oral, 50 L/min)</p> <code>'sleep'</code> <p>Returns:</p> Type Description <code>dict</code> <ul> <li>'DF': Deposition fraction DataFrame (HA, TB, AL, Total)</li> <li>'deposited': Deposited number distribution</li> <li>'dose': Regional deposited dose (particles/cm\u00b3)</li> <li>'total_dose': Total deposited particles</li> </ul> Notes <p>Deposition regions: - HA (Head Airways): \u982d\u90e8\u6c23\u9053 (\u9f3b\u3001\u54bd\u3001\u5589) - TB (Tracheobronchial): \u6c23\u7ba1\u652f\u6c23\u7ba1\u5340 - AL (Alveolar): \u80ba\u6ce1\u5340</p> References <ul> <li>ICRP Publication 66 (1994)</li> <li>Hinds, W.C. (1999) Aerosol Technology</li> </ul> <p>Examples:</p> <pre><code>&gt;&gt;&gt; psd = SizeDist(df)\n&gt;&gt;&gt; lung = psd.lung_deposition(activity='light')\n&gt;&gt;&gt; lung['DF']        # Deposition fractions\n&gt;&gt;&gt; lung['dose']      # Regional dose\n</code></pre>"},{"location":"api/DataProcess/VOC/","title":"VOC \u6a21\u7d44","text":"<p>\u63ee\u767c\u6027\u6709\u6a5f\u7269\u6578\u64da\u8655\u7406\u6a21\u7d44\u3002</p>"},{"location":"api/DataProcess/VOC/#_1","title":"\u7d50\u69cb","text":"<pre><code>VOC/\n\u251c\u2500\u2500 __init__.py         # VOC (Writer \u5165\u53e3)\n\u251c\u2500\u2500 _potential_par.py   # \u81ed\u6c27\u751f\u6210\u6f5b\u52e2\u8a08\u7b97\n\u2514\u2500\u2500 support_voc.json    # VOC \u7269\u7a2e\u53c3\u6578\u8868\n</code></pre>"},{"location":"api/DataProcess/VOC/#_2","title":"\u5feb\u901f\u958b\u59cb","text":"<pre><code>from pathlib import Path\nfrom AeroViz.dataProcess import DataProcess\n\ndp = DataProcess('VOC', Path('./output'))\nresult = dp.potential(df_voc)\n</code></pre>"},{"location":"api/DataProcess/VOC/#_3","title":"\u65b9\u6cd5\u5217\u8868","text":"\u65b9\u6cd5 \u8aaa\u660e \u76f8\u95dc\u7406\u8ad6 <code>potential(df_voc)</code> OFP/SOAP \u8a08\u7b97 \u2192 OFP/SOAP"},{"location":"api/DataProcess/VOC/#_4","title":"\u8f38\u51fa\u8aaa\u660e","text":""},{"location":"api/DataProcess/VOC/#potential","title":"potential","text":"\u8f38\u51fa \u8aaa\u660e <code>OFP</code> \u5404\u7269\u7a2e OFP \u8ca2\u737b (\u03bcg O\u2083/m\u00b3) <code>SOAP</code> \u5404\u7269\u7a2e SOAP \u8ca2\u737b <code>total</code> \u7e3d OFP/SOAP"},{"location":"api/DataProcess/VOC/#_5","title":"\u8a08\u7b97\u6307\u6a19","text":"\u6307\u6a19 \u5168\u540d \u8aaa\u660e OFP Ozone Formation Potential \u81ed\u6c27\u751f\u6210\u6f5b\u52e2 SOAP Secondary Organic Aerosol Potential \u4e8c\u6b21\u6709\u6a5f\u6c23\u81a0\u751f\u6210\u6f5b\u52e2 MIR Maximum Incremental Reactivity \u6700\u5927\u589e\u91cf\u53cd\u61c9\u6027"},{"location":"api/DataProcess/VOC/#_6","title":"\u8f38\u5165\u683c\u5f0f","text":"<pre><code># \u6b04\u4f4d\u70ba VOC \u7269\u7a2e\u540d\u7a31\ndf_voc.columns = ['Benzene', 'Toluene', 'Ethylbenzene', 'Xylene', ...]\n\n# \u55ae\u4f4d: ppb \u6216 \u03bcg/m\u00b3\n</code></pre>"},{"location":"api/DataProcess/VOC/#_7","title":"\u652f\u63f4\u7269\u7a2e","text":"<p>\u8a73\u898b <code>support_voc.json</code>\uff1a</p> <ul> <li>\u70f7\u70f4 (Alkanes)</li> <li>\u70ef\u70f4 (Alkenes)</li> <li>\u82b3\u9999\u70f4 (Aromatics)</li> <li>\u9e75\u4ee3\u70f4 (Halocarbons)</li> <li>\u542b\u6c27 VOC (OVOCs)</li> </ul>"},{"location":"api/DataProcess/VOC/#_8","title":"\u76f8\u95dc\u8cc7\u6e90","text":"<ul> <li>\u7bc4\u4f8b: VOC \u5206\u6790</li> <li>\u7406\u8ad6: OFP/SOAP</li> </ul>"},{"location":"api/DataProcess/VOC/#api","title":"API \u53c3\u8003","text":""},{"location":"api/DataProcess/VOC/#AeroViz.dataProcess.VOC.VOC","title":"AeroViz.dataProcess.VOC.VOC","text":"<pre><code>VOC(path_out=None, excel=True, csv=False)\n</code></pre> <p>               Bases: <code>Writer</code></p>"},{"location":"api/DataProcess/VOC/#AeroViz.dataProcess.VOC.VOC-functions","title":"Functions","text":""},{"location":"api/DataProcess/VOC/#AeroViz.dataProcess.VOC.VOC.VOC_basic","title":"VOC_basic","text":"<pre><code>VOC_basic(_df_voc)\n</code></pre>"},{"location":"api/RawDataReader/","title":"RawDataReader","text":"<p>Factory function for reading and processing instrument data in AeroViz.</p>"},{"location":"api/RawDataReader/#overview","title":"Overview","text":"<p>RawDataReader is a factory function that provides a unified interface for reading and processing data from various scientific instruments. It automatically handles data loading, quality control, and time series processing.</p>"},{"location":"api/RawDataReader/#function-signature","title":"Function Signature","text":""},{"location":"api/RawDataReader/#AeroViz.rawDataReader.RawDataReader","title":"AeroViz.rawDataReader.RawDataReader","text":"<pre><code>RawDataReader(instrument: str, path: Path | str, reset: bool | str = False, qc: bool | str = True, start: datetime | str = None, end: datetime | str = None, mean_freq: str = '1h', size_range: tuple[float, float] | None = None, suppress_warnings: bool = False, log_level: Literal['DEBUG', 'INFO', 'WARNING', 'ERROR'] = 'INFO', **kwargs)\n</code></pre> <p>Factory function to instantiate the appropriate reader module for a given instrument and return the processed data over the specified time range.</p> <p>Parameters:</p> Name Type Description Default <code>instrument</code> <code>str</code> <p>The instrument name for which to read data, must be a valid key in the meta dictionary</p> required <code>path</code> <code>Path or str</code> <p>The directory where raw data files for the instrument are stored</p> required <code>reset</code> <code>bool or str</code> <p>Data processing control mode: False (default) - Use existing processed data if available True - Force reprocess all data from raw files 'append' - Add new data to existing processed data</p> <code>False</code> <code>qc</code> <code>bool or str</code> <p>Quality control and rate calculation mode: True (default) - Apply QC and calculate overall rates False - Skip QC and return raw data only str - Calculate rates at specified intervals:     'W' - Weekly rates     'MS' - Month start rates     'QS' - Quarter start rates     'YS' - Year start rates     Can add number prefix (e.g., '2MS' for bi-monthly)</p> <code>True</code> <code>start</code> <code>datetime</code> <p>Start time for filtering the data</p> <code>None</code> <code>end</code> <code>datetime</code> <p>End time for filtering the data</p> <code>None</code> <code>mean_freq</code> <code>str</code> <p>Resampling frequency for averaging the data (e.g., '1h' for hourly mean)</p> <code>'1h'</code> <code>size_range</code> <code>tuple[float, float]</code> <p>Size range in nanometers (min_size, max_size) for SMPS/APS data filtering</p> <code>None</code> <code>suppress_warnings</code> <code>bool</code> <p>Whether to suppress warning messages (default: False)</p> <code>False</code> <code>log_level</code> <code>(DEBUG, INFO, WARNING, ERROR)</code> <p>Logging level (default: 'INFO')</p> <code>'DEBUG'</code> <code>**kwargs</code> <p>Additional arguments to pass to the reader module</p> <code>{}</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed data with specified QC and time range</p> <p>Raises:</p> Type Description <code>ValueError</code> <p>If QC mode or mean_freq format is invalid</p> <code>TypeError</code> <p>If parameters are of incorrect type</p> <code>KeyError</code> <p>If instrument name is not found in the supported instruments list</p> <code>FileNotFoundError</code> <p>If path does not exist or cannot be accessed</p> See Also <p>AeroViz.rawDataReader.core.AbstractReader     A abstract reader class for reading raw data from different instruments</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from AeroViz import RawDataReader\n&gt;&gt;&gt;\n&gt;&gt;&gt; # Using string inputs\n&gt;&gt;&gt; df_ae33 = RawDataReader(\n...     instrument='AE33',\n...     path='/path/to/your/data/folder',\n...     reset=True,\n...     qc='1MS',\n...     start='2024-01-01',\n...     end='2024-06-30',\n...     mean_freq='1h',\n... )\n</code></pre> <pre><code>&gt;&gt;&gt; # Using Path and datetime objects\n&gt;&gt;&gt; from pathlib import Path\n&gt;&gt;&gt; from datetime import datetime\n&gt;&gt;&gt;\n&gt;&gt;&gt; df_ae33 = RawDataReader(\n...     instrument='AE33',\n...     path=Path('/path/to/your/data/folder'),\n...     reset=True,\n...     qc='1MS',\n...     start=datetime(2024, 1, 1),\n...     end=datetime(2024, 6, 30),\n...     mean_freq='1h',\n... )\n</code></pre>"},{"location":"api/RawDataReader/#basic-usage","title":"Basic Usage","text":"<pre><code>from pathlib import Path\nfrom datetime import datetime\nfrom AeroViz import RawDataReader\n\ndata = RawDataReader(\n    instrument='AE33',\n    path=Path('/path/to/data'),\n    start=datetime(2024, 2, 1),\n    end=datetime(2024, 8, 31),\n    mean_freq='1h'\n)\n</code></pre>"},{"location":"api/RawDataReader/#more-examples","title":"More Examples","text":""},{"location":"api/RawDataReader/#scenario-1-basic-usage-with-neph-instrument","title":"Scenario 1: Basic Usage with NEPH Instrument","text":"<pre><code>neph_data = RawDataReader(\n    instrument='NEPH',\n    path=Path('/path/to/your/data/folder'),\n    reset=True,\n    start=datetime(2024, 2, 1),\n    end=datetime(2024, 4, 30),\n    mean_freq='1h'\n)\n</code></pre> <p>Console Output:</p> <pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551     Reading NEPH RAW DATA from 2024-02-01 00:00:00 to 2024-04-30 23:59:59      \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\u25b6 Reading NEPH files \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 100% 0:00:00 file_name.dat\n        \u25b6 Scatter Coe. (550 nm)\n            \u251c\u2500 Sample Rate    :   100.0%\n            \u251c\u2500 Valid  Rate    :   100.0%\n            \u2514\u2500 Total  Rate    :   100.0%\n</code></pre> <p>Expected Output:</p> <ul> <li>Hourly averaged NEPH data for the entire year.</li> <li>Will include scattering coefficients and other NEPH-related metrics.</li> </ul>"},{"location":"api/RawDataReader/#scenario-2-ae33-with-quality-control-and-rate-calculation","title":"Scenario 2: AE33 with Quality Control and Rate Calculation","text":"<pre><code>ae33_data = RawDataReader(\n    instrument='AE33',\n    path=Path('/path/to/your/data/folder'),\n    reset=True,\n    qc='1MS',  # print qc each month\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 8, 31),\n    mean_freq='1h',\n)\n</code></pre> <p>Console Output:</p> <pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551     Reading AE33 RAW DATA from 2024-02-01 00:00:00 to 2024-05-31 23:59:59      \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\u25b6 Reading AE33 files \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 100% 0:00:00 AE33_AE33-S07-00599_20240225.dat\n     AE33_AE33-S07-00599_20240704.dat may not be a whole daily data. Make sure the file is correct.  # some warming or \n     AE33_AE33-S07-00599_20240711.dat may not be a whole daily data. Make sure the file is correct.  # error print\n    \u25b6 Processing: 2024-02-01 to 2024-02-29\n        \u25b6 BC Mass Conc. (880 nm)\n            \u251c\u2500 Sample Rate    :   26.3%\n            \u251c\u2500 Valid  Rate    :   99.5%\n            \u2514\u2500 Total  Rate    :   26.1%\n    \u25b6 Processing: 2024-03-01 to 2024-03-31\n        \u25b6 BC Mass Conc. (880 nm)\n            \u251c\u2500 Sample Rate    :  100.0%\n            \u251c\u2500 Valid  Rate    :  100.0%\n            \u2514\u2500 Total  Rate    :  100.0%\n    \u25b6 Processing: 2024-04-01 to 2024-04-30\n        \u25b6 BC Mass Conc. (880 nm)\n            \u251c\u2500 Sample Rate    :  100.0%\n            \u251c\u2500 Valid  Rate    :  100.0%\n            \u2514\u2500 Total  Rate    :  100.0%\n    \u25b6 Processing: 2024-05-01 to 2024-05-31\n        \u25b6 BC Mass Conc. (880 nm)\n            \u251c\u2500 Sample Rate    :  100.0%\n            \u251c\u2500 Valid  Rate    :  100.0%\n            \u2514\u2500 Total  Rate    :  100.0%\n</code></pre> <p>Expected Output:</p> <ul> <li>Hourly AE33 data with quality control applied monthly.</li> <li>Includes black carbon concentrations and absorption coefficients.</li> <li>Will generate a CSV file with the processed data.</li> </ul>"},{"location":"api/RawDataReader/#scenario-3-smps-with-specific-time-range","title":"Scenario 3: SMPS with Specific Time Range","text":"<pre><code>smps_data = RawDataReader(\n    instrument='SMPS',\n    path=Path('/path/to/your/data/folder'),\n    start=datetime(2024, 2, 1),\n    end=datetime(2024, 8, 31),\n    mean_freq='30min',\n    size_range=(11.8, 593.5)  # user input size range\n)\n</code></pre> <p>Console Output:</p> <pre><code>\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2557\n\u2551     Reading SMPS RAW DATA from 2024-02-01 00:00:00 to 2024-08-31 23:59:59      \u2551\n\u255a\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u255d\n\u25b6 Reading SMPS files \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501 100% 0:00:00 240817.txt\n    SMPS file: 240816.txt is not match the default size range (11.8, 593.5), it is (11.0, 593.5)  # print the unmatch file\n        \u25b6 Bins\n            \u251c\u2500 Sample Rate    :    1.7%\n            \u251c\u2500 Valid  Rate    :   93.3%\n            \u2514\u2500 Total  Rate    :    1.6%\n</code></pre> <p>Expected Output:</p> <ul> <li>SMPS data for the summer months (June to August).</li> <li>30-minute averaged data points.</li> <li>Includes particle size distribution information.</li> </ul>"},{"location":"api/RawDataReader/#advanced-features","title":"Advanced Features","text":""},{"location":"api/RawDataReader/#size-range-filtering","title":"Size Range Filtering","text":"<p>For size-resolved instruments (SMPS, APS, GRIMM):</p> <pre><code>data = RawDataReader(\n    instrument=\"SMPS\",\n    path=\"data/\",\n    start=\"2024-01-01\",\n    end=\"2024-01-31\",\n    size_range=(10, 500)  # nm\n)\n</code></pre>"},{"location":"api/RawDataReader/#quality-control-and-rate-calculation","title":"Quality Control and Rate Calculation","text":"<pre><code>data = RawDataReader(\n    instrument='AE33',\n    path=Path('/path/to/data'),\n    reset=True,\n    qc='1MS',  # Calculate and print QC rates monthly\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 12, 31),\n)\n</code></pre> <p>Example console output:</p> <pre><code>\u25b6 Processing: 2024-02-01 to 2024-02-29\n    \u25b6 BC Mass Conc. (880 nm)\n        \u251c\u2500 Sample Rate    :   26.3%\n        \u251c\u2500 Valid  Rate    :   99.5%\n        \u2514\u2500 Total  Rate    :   26.1%\n</code></pre>"},{"location":"api/RawDataReader/#output-files","title":"Output Files","text":"<p>After processing, the following files are generated in the <code>{instrument}_outputs</code> directory:</p> <ol> <li><code>_read_{instrument}_raw.csv</code>: Merged raw data with original time resolution</li> <li><code>_read_{instrument}_raw.pkl</code>: Raw data in pickle format</li> <li><code>_read_{instrument}.csv</code>: Quality controlled data</li> <li><code>_read_{instrument}.pkl</code>: QC data in pickle format</li> <li><code>Output_{instrument}</code>: Final processed data file</li> <li><code>{instrument}.log</code>: Processing log file</li> </ol>"},{"location":"api/RawDataReader/#supported-instruments","title":"Supported Instruments","text":"<p>For detailed specifications of supported instruments, see Instruments API Reference.</p>"},{"location":"api/RawDataReader/#see-also","title":"See Also","text":"<ul> <li>Base Class API - Documentation for the abstract base class</li> <li>Quality Control API - Details about quality control implementation</li> </ul>"},{"location":"api/instruments/","title":"Supported Instruments","text":"<p>AeroViz provides comprehensive support for reading and processing data from a wide range of aerosol measurement instruments. Each instrument has a dedicated reader that handles its specific data format, file structure, and measurement characteristics.</p> <p>Instrument Support</p> <p>AeroViz automatically detects instrument types based on file format and content structure. You don't need to specify the instrument type manually when using the <code>RawDataReader</code> factory function.</p>"},{"location":"api/instruments/#instrument-categories","title":"Instrument Categories","text":""},{"location":"api/instruments/#aethalometers-black-carbon-measurement","title":"Aethalometers (Black Carbon Measurement)","text":"<p>Instruments for measuring black carbon and light absorption:</p> <ul> <li>AE33 - Magee Scientific AE33 (7-wavelength aethalometer)</li> <li>AE43 - Magee Scientific AE43 (real-time BC measurements)</li> <li>BC1054 - MetOne BC1054 (high-resolution absorption)</li> <li>MA350 - AethLabs MA350 (multi-angle absorption photometer)</li> </ul>"},{"location":"api/instruments/#nephelometers-light-scattering","title":"Nephelometers (Light Scattering)","text":"<p>Instruments for measuring aerosol light scattering:</p> <ul> <li>Aurora - Ecotech Aurora (3-wavelength nephelometer)</li> <li>NEPH - TSI Nephelometer (standard scattering measurements)</li> </ul>"},{"location":"api/instruments/#particle-sizers","title":"Particle Sizers","text":"<p>Instruments for measuring particle size distributions:</p> <ul> <li>SMPS - Scanning Mobility Particle Sizer (10-600 nm)</li> <li>APS - Aerodynamic Particle Sizer (0.5-20 \u03bcm)</li> <li>GRIMM - GRIMM Aerosol Spectrometer (optical sizing)</li> </ul>"},{"location":"api/instruments/#chemical-analysis","title":"Chemical Analysis","text":"<p>Instruments for chemical composition analysis:</p> <ul> <li>IGAC - Ion chromatography (water-soluble ions)</li> <li>OCEC - Organic/Elemental Carbon Analyzer</li> <li>VOC - Volatile Organic Compounds Monitor</li> <li>Xact - Xact 625i XRF Analyzer (elemental analysis)</li> </ul>"},{"location":"api/instruments/#mass-concentration","title":"Mass Concentration","text":"<p>Instruments for PM mass concentration measurement:</p> <ul> <li>TEOM - Tapered Element Oscillating Microbalance</li> <li>BAM1020 - Beta Attenuation Monitor (PM2.5)</li> </ul> <p>Usage Example</p> <pre><code>from AeroViz.rawDataReader import RawDataReader\n\n# Automatic instrument detection\nreader = RawDataReader(\"instrument_data.txt\")\ndata = reader.read()\n\n# The reader automatically detects the instrument type\nprint(f\"Detected instrument: {reader.instrument_type}\")\nprint(f\"Time resolution: {reader.time_resolution}\")\n</code></pre>"},{"location":"api/instruments/#technical-specifications","title":"Technical Specifications","text":"Instrument Time Resolution File Type QC Rules AE33 1 min .dat Status Error, Invalid BC, Invalid AAE, Insufficient AE43 1 min .dat Status Error, Invalid BC, Invalid AAE, Insufficient BC1054 1 min .csv Status Error, Invalid BC, Invalid AAE, Insufficient MA350 1 min .csv Status Error, Invalid BC, Invalid AAE, Insufficient NEPH 5 min .dat Status Error, No Data, Invalid Scat Value, Invalid Scat Rel, Insufficient Aurora 1 min .csv Status Error, No Data, Invalid Scat Value, Invalid Scat Rel, Insufficient SMPS 6 min .txt, .csv Status Error, Invalid Number Conc, DMA Water, Insufficient APS 6 min .txt Status Error, Invalid Number Conc, Insufficient GRIMM 6 min .dat - TEOM 6 min .csv Status Error, High Noise, Non-positive, NV &gt; Total, Invalid Vol Frac, Spike, Insufficient BAM1020 1 h .csv Invalid Conc, Spike OCEC 1 h *LCRes.csv Invalid Carbon, Below MDL, Spike, Missing OC IGAC 1 h .csv Mass Closure, Missing Main, Below MDL, Ion Balance Xact 1 h .csv Instrument Error, Upscale Warning, Invalid Value, High Uncertainty VOC 1 h .csv - EPA 1 h .csv Negative Value <p>Quality Control System</p> <p>All instruments use the declarative QCFlagBuilder system:</p> <ul> <li>Declarative Rules - Each instrument defines QC rules as <code>QCRule</code> dataclass instances</li> <li>Consistent Processing - All instruments use <code>QC_Flag</code> internally for quality control</li> <li>Clean Output - Final output has invalid data set to NaN, <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/#qc-flag-processing","title":"QC Flag Processing","text":"<p>The <code>QC_Flag</code> column is used internally during processing:</p> <ul> <li><code>\"Valid\"</code> - All QC rules passed</li> <li><code>\"Rule1, Rule2\"</code> - Comma-separated list of failed rule names</li> </ul> <p>Output Files:</p> File QC_Flag Description <code>_read_{inst}_raw.pkl/csv</code> \u274c No Raw data before QC <code>_read_{inst}_qc.pkl/csv</code> \u2705 Yes QC'd data with flag <code>output_{inst}.csv</code> \u274c No Final output (invalid \u2192 NaN)"},{"location":"api/instruments/#adding-new-instruments","title":"Adding New Instruments","text":"<p>To add support for a new instrument, you need to:</p> <ol> <li>Create a new reader class inheriting from <code>AbstractReader</code></li> <li>Implement the required methods for data parsing</li> <li>Add instrument detection logic</li> <li>Include appropriate quality control methods</li> </ol> <p>Example Reader Implementation</p> <pre><code>from AeroViz.rawDataReader.core.AbstractReader import AbstractReader\n\nclass MyInstrumentReader(AbstractReader):\n    def __init__(self, file_path, **kwargs):\n        super().__init__(file_path, **kwargs)\n\n    def read_data(self):\n        # Implement your data reading logic\n        pass\n\n    def apply_qc(self):\n        # Implement quality control\n        pass\n</code></pre>"},{"location":"api/instruments/#related-documentation","title":"Related Documentation","text":"<ul> <li>AbstractReader - Base class for all instrument readers</li> <li>Quality Control - Data validation and filtering methods</li> <li>RawDataReader - Factory function for automatic instrument detection</li> </ul>"},{"location":"api/instruments/aethalometers/AE33/","title":"AE33 Aethalometer","text":"<p>The AE33 is a multi-wavelength aethalometer used for measuring black carbon aerosol concentrations in the atmosphere.</p>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader","title":"AeroViz.rawDataReader.script.AE33.Reader","text":"<pre><code>Reader(path: Path | str, reset: bool | str = False, qc: bool | str = True, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>AE33 Aethalometer Data Reader.</p> <p>A specialized reader for AE33 Aethalometer data files, which measure black carbon concentrations at seven wavelengths.</p> <p>See full documentation at docs/source/instruments/AE33.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'AE33'\n</code></pre>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader.BC_COLUMNS","title":"BC_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>BC_COLUMNS = ['BC1', 'BC2', 'BC3', 'BC4', 'BC5', 'BC6', 'BC7']\n</code></pre>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader.ABS_COLUMNS","title":"ABS_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ABS_COLUMNS = ['abs_370', 'abs_470', 'abs_520', 'abs_590', 'abs_660', 'abs_880', 'abs_950']\n</code></pre>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader.CAL_COLUMNS","title":"CAL_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CAL_COLUMNS = ['abs_550', 'AAE', 'eBC']\n</code></pre>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader.MIN_BC","title":"MIN_BC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_BC = 0\n</code></pre>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader.MAX_BC","title":"MAX_BC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_BC = 20000\n</code></pre>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader.MIN_AAE","title":"MIN_AAE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_AAE = 0.7\n</code></pre>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader.MAX_AAE","title":"MAX_AAE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_AAE = 2.0\n</code></pre>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader.ERROR_STATES","title":"ERROR_STATES  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ERROR_STATES = [1, 2, 3, 4, 16, 32, 384, 1024, 2048, 4096]\n</code></pre>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw AE33 Aethalometer data files.</p>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on AE33 Aethalometer raw data.</p> QC Rules Applied (raw data only) <ol> <li>Status Error    : Invalid instrument status codes</li> <li>Invalid BC      : BC concentration outside 0-20000 ng/m\u00b3</li> <li>Insufficient    : Less than 50% hourly data completeness</li> </ol> <p>Note: AAE validation is done in _process() after calculation.</p>"},{"location":"api/instruments/aethalometers/AE33/#AeroViz.rawDataReader.script.AE33.Reader._process","title":"_process","text":"<pre><code>_process(_df)\n</code></pre> <p>Calculate absorption coefficients and validate derived parameters.</p> Processing Steps <ol> <li>Calculate absorption coefficients at each wavelength</li> <li>Calculate AAE (Absorption \u00c5ngstr\u00f6m Exponent)</li> <li>Calculate eBC (equivalent Black Carbon)</li> <li>Validate AAE range and update QC_Flag</li> </ol> <p>Parameters:</p> Name Type Description Default <code>_df</code> <code>DataFrame</code> <p>Quality-controlled DataFrame with BC columns and QC_Flag</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>DataFrame with absorption coefficients, AAE, eBC, and updated QC_Flag</p>"},{"location":"api/instruments/aethalometers/AE33/#data-format","title":"Data Format","text":"<ul> <li>File format: Tab-delimited text file (.dat)</li> <li>Sampling frequency: 1 minute</li> <li>File naming pattern: <code>[!ST|!CT|!FV]*[!log]_AE33*.dat</code><ul> <li>log file is not included ex. AE33_log_AE33-S05-00494_20220401.dat</li> </ul> </li> <li>Header: 5 rows of header information</li> <li>Data columns: 67 columns including timestamp and measurements</li> </ul>"},{"location":"api/instruments/aethalometers/AE33/#measurement-parameters","title":"Measurement Parameters","text":"<p>The AE33 provides black carbon concentration measurements at seven wavelengths:</p> Column Wavelength Description BC1 370 nm UV channel BC2 470 nm Blue channel BC3 520 nm Green channel BC4 590 nm Yellow channel BC5 660 nm Red channel BC6 880 nm Near-IR channel (reference) BC7 950 nm IR channel"},{"location":"api/instruments/aethalometers/AE33/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/aethalometers/AE33/#data-reading","title":"Data Reading","text":"<ul> <li>Automatically skips the first 5 rows of header information</li> <li>Parses timestamps from date and time columns (columns 0 and 1)</li> <li>Extracts black carbon concentration data for seven wavelengths</li> <li>Strips semicolons from column names</li> <li>Validates file size (warns if &lt; 550KB)</li> </ul>"},{"location":"api/instruments/aethalometers/AE33/#quality-control","title":"Quality Control","text":"<p>The AE33 reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  [Pre-process] Calculate absorption coefficients, AAE, eBC            |\n|       |                                                               |\n|       v                                                               |\n|  +---------------------+    +---------------------+                   |\n|  | Rule: Status Error  |    | Rule: Invalid BC    |                   |\n|  +---------------------+    +---------------------+                   |\n|  | Bitwise status      |    | BC &lt;= 0 OR          |                   |\n|  | code filtering      |    | BC &gt; 20000 ng/m\u00b3    |                   |\n|  +---------------------+    +---------------------+                   |\n|           |                          |                                |\n|           v                          v                                |\n|  +---------------------+    +---------------------+                   |\n|  | Rule: Invalid AAE   |    | Rule: Insufficient  |                   |\n|  +---------------------+    +---------------------+                   |\n|  | AAE &lt; -2.0 OR       |    | &lt; 50% hourly data   |                   |\n|  | AAE &gt; -0.7          |    | completeness        |                   |\n|  +---------------------+    +---------------------+                   |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/aethalometers/AE33/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Status Error Bitwise status code check Invalid instrument status codes detected Invalid BC BC \u2264 0 OR BC &gt; 20000 ng/m\u00b3 BC concentration outside valid range Invalid AAE AAE &lt; -2.0 OR AAE &gt; -0.7 Angstrom exponent outside valid range Insufficient &lt; 50% hourly data Less than 50% hourly data completeness"},{"location":"api/instruments/aethalometers/AE33/#error-status-codes","title":"Error Status Codes","text":"Code Description 1 Tape advance, fast calibration, warm-up 2 First measurement \u2013 obtaining ATN0 3 Stopped 4 Flow low/high by more than 0.5 LPM 16 Calibrating LED 32 Calibration error (at least one channel OK) 384 Tape error (tape not moving, end of tape) 1024 Stability test 2048 Clean air test 4096 Optical test"},{"location":"api/instruments/aethalometers/AE33/#output-data","title":"Output Data","text":"<p>The final output (<code>output_ae33.csv</code>) contains the following columns:</p> Column Unit Description BC1-BC7 ng/m\u00b3 Black carbon at 7 wavelengths abs_370-950 Mm\u207b\u00b9 Absorption coefficients abs_550 Mm\u207b\u00b9 Interpolated absorption at 550nm AAE - Absorption Angstrom Exponent eBC ng/m\u00b3 Equivalent black carbon <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_ae33_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/aethalometers/AE33/#notes","title":"Notes","text":"<ul> <li>The AE33 provides real-time black carbon concentration measurements</li> <li>Useful for distinguishing between biomass burning and fossil fuel combustion</li> <li>Files smaller than 550KB may indicate incomplete data</li> </ul>"},{"location":"api/instruments/aethalometers/AE43/","title":"AE43 Aethalometer","text":"<p>The AE43 is a multi-wavelength aethalometer used for measuring black carbon aerosol concentrations in the atmosphere.</p>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader","title":"AeroViz.rawDataReader.script.AE43.Reader","text":"<pre><code>Reader(path: Path | str, reset: bool | str = False, qc: bool | str = True, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>AE43 Aethalometer Data Reader</p> <p>A specialized reader for AE43 Aethalometer data files, which measure black carbon concentrations at seven wavelengths.</p> <p>See full documentation at docs/source/instruments/AE43.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'AE43'\n</code></pre>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader.BC_COLUMNS","title":"BC_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>BC_COLUMNS = ['BC1', 'BC2', 'BC3', 'BC4', 'BC5', 'BC6', 'BC7']\n</code></pre>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader.ABS_COLUMNS","title":"ABS_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ABS_COLUMNS = ['abs_370', 'abs_470', 'abs_520', 'abs_590', 'abs_660', 'abs_880', 'abs_950']\n</code></pre>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader.CAL_COLUMNS","title":"CAL_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CAL_COLUMNS = ['abs_550', 'AAE', 'eBC']\n</code></pre>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader.MIN_BC","title":"MIN_BC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_BC = 0\n</code></pre>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader.MAX_BC","title":"MAX_BC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_BC = 20000\n</code></pre>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader.MIN_AAE","title":"MIN_AAE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_AAE = 0.7\n</code></pre>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader.MAX_AAE","title":"MAX_AAE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_AAE = 2.0\n</code></pre>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader.ERROR_STATES","title":"ERROR_STATES  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ERROR_STATES = [1, 2, 3, 4, 16, 32, 384, 1024, 2048, 4096]\n</code></pre>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw AE43 Aethalometer data files.</p>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on AE43 Aethalometer raw data.</p> QC Rules Applied (raw data only) <ol> <li>Status Error   : Invalid instrument status codes</li> <li>Invalid BC     : BC concentration outside 0-20000 ng/m\u00b3</li> <li>Insufficient   : Less than 50% hourly data completeness</li> </ol> <p>Note: AAE validation is done in _process() after calculation.</p>"},{"location":"api/instruments/aethalometers/AE43/#AeroViz.rawDataReader.script.AE43.Reader._process","title":"_process","text":"<pre><code>_process(_df)\n</code></pre> <p>Calculate absorption coefficients and validate derived parameters.</p> Processing Steps <ol> <li>Calculate absorption coefficients at each wavelength</li> <li>Calculate AAE (Absorption \u00c5ngstr\u00f6m Exponent)</li> <li>Calculate eBC (equivalent Black Carbon)</li> <li>Validate AAE range and update QC_Flag</li> </ol> <p>Note: AE43 uses AE33 coefficients for absorption calculation.</p>"},{"location":"api/instruments/aethalometers/AE43/#data-format","title":"Data Format","text":"<ul> <li>File format: CSV file</li> <li>Sampling frequency: 1 minute</li> <li>File naming pattern: <code>[!ST|!CT|!FV]*[!log]_AE43*.dat</code></li> <li>Timestamp column: StartTime</li> <li>Configuration tracking: Uses SetupID for configuration management</li> </ul>"},{"location":"api/instruments/aethalometers/AE43/#measurement-parameters","title":"Measurement Parameters","text":"<p>The AE43 provides black carbon concentration measurements at seven wavelengths:</p> Column Wavelength Description BC1 370 nm UV channel BC2 470 nm Blue channel BC3 520 nm Green channel BC4 590 nm Yellow channel BC5 660 nm Red channel BC6 880 nm Near-IR channel (reference) BC7 950 nm IR channel"},{"location":"api/instruments/aethalometers/AE43/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/aethalometers/AE43/#data-reading","title":"Data Reading","text":"<ul> <li>Parses timestamps from the StartTime column</li> <li>Automatically identifies and selects the latest configuration data (SetupID)</li> <li>Extracts black carbon concentration data for seven wavelengths</li> <li>Groups data by SetupID to handle configuration changes</li> <li>Includes Status column for quality control</li> </ul>"},{"location":"api/instruments/aethalometers/AE43/#quality-control","title":"Quality Control","text":"<p>The AE43 reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  [Pre-process] Calculate absorption coefficients, AAE, eBC            |\n|       |        (Uses AE33 coefficients)                               |\n|       v                                                               |\n|  +---------------------+    +---------------------+                   |\n|  | Rule: Status Error  |    | Rule: Invalid BC    |                   |\n|  +---------------------+    +---------------------+                   |\n|  | Bitwise status      |    | BC &lt;= 0 OR          |                   |\n|  | code filtering      |    | BC &gt; 20000 ng/m\u00b3    |                   |\n|  +---------------------+    +---------------------+                   |\n|           |                          |                                |\n|           v                          v                                |\n|  +---------------------+    +---------------------+                   |\n|  | Rule: Invalid AAE   |    | Rule: Insufficient  |                   |\n|  +---------------------+    +---------------------+                   |\n|  | AAE &lt; -2.0 OR       |    | &lt; 50% hourly data   |                   |\n|  | AAE &gt; -0.7          |    | completeness        |                   |\n|  +---------------------+    +---------------------+                   |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/aethalometers/AE43/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Status Error Bitwise status code check Invalid instrument status codes detected Invalid BC BC \u2264 0 OR BC &gt; 20000 ng/m\u00b3 BC concentration outside valid range Invalid AAE AAE &lt; -2.0 OR AAE &gt; -0.7 Angstrom exponent outside valid range Insufficient &lt; 50% hourly data Less than 50% hourly data completeness"},{"location":"api/instruments/aethalometers/AE43/#error-status-codes","title":"Error Status Codes","text":"Code Description 1 Tape advance, fast calibration, warm-up 2 First measurement \u2013 obtaining ATN0 3 Stopped 4 Flow low/high by more than 0.5 LPM 16 Calibrating LED 32 Calibration error (at least one channel OK) 384 Tape error (tape not moving, end of tape) 1024 Stability test 2048 Clean air test 4096 Optical test"},{"location":"api/instruments/aethalometers/AE43/#output-data","title":"Output Data","text":"<p>The processed data contains the following columns:</p> Column Unit Description BC1-BC7 ng/m\u00b3 Black carbon at 7 wavelengths abs_370-950 Mm\u207b\u00b9 Absorption coefficients abs_550 Mm\u207b\u00b9 Interpolated absorption at 550nm AAE - Absorption Angstrom Exponent eBC ng/m\u00b3 Equivalent black carbon <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_ae43_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/aethalometers/AE43/#notes","title":"Notes","text":"<ul> <li>The AE43 provides real-time black carbon concentration measurements</li> <li>Uses AE33 absorption coefficients for calculations</li> <li>Automatically handles configuration changes and duplicate timestamps</li> <li>Maintains data integrity across configuration changes using SetupID</li> </ul>"},{"location":"api/instruments/aethalometers/BC1054/","title":"BC1054 Black Carbon Monitor","text":"<p>The BC1054 is a multi-wavelength aethalometer that measures black carbon concentrations at ten different wavelengths.</p>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader","title":"AeroViz.rawDataReader.script.BC1054.Reader","text":"<pre><code>Reader(path: Path | str, reset: bool | str = False, qc: bool | str = True, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>BC1054 Black Carbon Monitor Data Reader</p> <p>A specialized reader for BC1054 data files, which measure black carbon concentrations using light absorption at 10 wavelengths.</p> <p>See full documentation at docs/source/instruments/BC1054.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'BC1054'\n</code></pre>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader.BC_COLUMNS","title":"BC_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>BC_COLUMNS = ['BC1', 'BC2', 'BC3', 'BC4', 'BC5', 'BC6', 'BC7', 'BC8', 'BC9', 'BC10']\n</code></pre>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader.ABS_COLUMNS","title":"ABS_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ABS_COLUMNS = ['abs_370', 'abs_430', 'abs_470', 'abs_525', 'abs_565', 'abs_590', 'abs_660', 'abs_700', 'abs_880', 'abs_950']\n</code></pre>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader.CAL_COLUMNS","title":"CAL_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CAL_COLUMNS = ['abs_550', 'AAE', 'eBC']\n</code></pre>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader.MIN_BC","title":"MIN_BC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_BC = 0\n</code></pre>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader.MAX_BC","title":"MAX_BC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_BC = 20000\n</code></pre>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader.MIN_AAE","title":"MIN_AAE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_AAE = 0.7\n</code></pre>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader.MAX_AAE","title":"MAX_AAE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_AAE = 2.0\n</code></pre>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader.ERROR_STATES","title":"ERROR_STATES  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ERROR_STATES = [1, 2, 4, 8, 16, 32, 64, 256, 512, 1024, 2048, 65536]\n</code></pre>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw BC1054 data files.</p>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on BC1054 raw data.</p> QC Rules Applied (raw data only) <ol> <li>Duplicate      : Consecutive duplicate rows removed</li> <li>Status Error   : Invalid instrument status codes</li> <li>Invalid BC     : BC concentration outside 0-20000 ng/m\u00b3</li> <li>Insufficient   : Less than 50% hourly data completeness</li> </ol> <p>Note: AAE validation is done in _process() after calculation.</p>"},{"location":"api/instruments/aethalometers/BC1054/#AeroViz.rawDataReader.script.BC1054.Reader._process","title":"_process","text":"<pre><code>_process(_df)\n</code></pre> <p>Calculate absorption coefficients and validate derived parameters.</p> Processing Steps <ol> <li>Calculate absorption coefficients at each wavelength</li> <li>Calculate AAE (Absorption \u00c5ngstr\u00f6m Exponent)</li> <li>Calculate eBC (equivalent Black Carbon)</li> <li>Validate AAE range and update QC_Flag</li> </ol>"},{"location":"api/instruments/aethalometers/BC1054/#data-format","title":"Data Format","text":"<ul> <li>File format: CSV file</li> <li>Sampling frequency: 1 minute</li> <li>File naming pattern: <code>*.csv</code></li> <li>Data structure:<ul> <li>Datetime index</li> <li>BC1-BC10 columns with units (ng/m\u00b3)</li> <li>Status column for instrument state</li> </ul> </li> </ul>"},{"location":"api/instruments/aethalometers/BC1054/#measurement-parameters","title":"Measurement Parameters","text":"<p>The BC1054 provides black carbon measurements at ten wavelengths:</p> Column Wavelength Description BC1 370 nm UV channel BC2 430 nm Violet channel BC3 470 nm Blue channel BC4 525 nm Green channel BC5 565 nm Yellow-Green channel BC6 590 nm Yellow channel BC7 660 nm Red channel BC8 700 nm Deep Red channel BC9 880 nm Near-IR channel (reference) BC10 950 nm IR channel"},{"location":"api/instruments/aethalometers/BC1054/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/aethalometers/BC1054/#data-reading","title":"Data Reading","text":"<ul> <li>Processes CSV files with datetime index</li> <li>Standardizes column names (removes spaces and units)</li> <li>Maps to consistent BC1-BC10 format</li> <li>Includes Status column for quality control</li> <li>Handles duplicate timestamps</li> </ul>"},{"location":"api/instruments/aethalometers/BC1054/#quality-control","title":"Quality Control","text":"<p>The BC1054 reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  [Pre-process] Remove consecutive duplicate rows                      |\n|       |        Calculate absorption coefficients, AAE, eBC            |\n|       v                                                               |\n|  +---------------------+    +---------------------+                   |\n|  | Rule: Status Error  |    | Rule: Invalid BC    |                   |\n|  +---------------------+    +---------------------+                   |\n|  | Bitwise status      |    | BC &lt;= 0 OR          |                   |\n|  | code filtering      |    | BC &gt; 20000 ng/m\u00b3    |                   |\n|  +---------------------+    +---------------------+                   |\n|           |                          |                                |\n|           v                          v                                |\n|  +---------------------+    +---------------------+                   |\n|  | Rule: Invalid AAE   |    | Rule: Insufficient  |                   |\n|  +---------------------+    +---------------------+                   |\n|  | AAE &lt; -2.0 OR       |    | &lt; 50% hourly data   |                   |\n|  | AAE &gt; -0.7          |    | completeness        |                   |\n|  +---------------------+    +---------------------+                   |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/aethalometers/BC1054/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Status Error Bitwise status code check Invalid instrument status codes detected Invalid BC BC \u2264 0 OR BC &gt; 20000 ng/m\u00b3 BC concentration outside valid range Invalid AAE AAE &lt; -2.0 OR AAE &gt; -0.7 Angstrom exponent outside valid range Insufficient &lt; 50% hourly data Less than 50% hourly data completeness"},{"location":"api/instruments/aethalometers/BC1054/#error-status-codes","title":"Error Status Codes","text":"Code Description 1 Power Failure 2 Digital Sensor Link Failure 4 Tape Move Failure 8 Maintenance 16 Flow Failure 32 Automatic Tape Advance 64 Detector Failure 256 Sensor Range 512 Nozzle Move Failure 1024 SPI Link Failure 2048 Calibration Audit 65536 Tape Move"},{"location":"api/instruments/aethalometers/BC1054/#output-data","title":"Output Data","text":"<p>The processed data contains the following columns:</p> Column Unit Description BC1-BC10 ng/m\u00b3 Black carbon at 10 wavelengths abs_370-950 Mm\u207b\u00b9 Absorption coefficients abs_550 Mm\u207b\u00b9 Interpolated absorption at 550nm AAE - Absorption Angstrom Exponent eBC ng/m\u00b3 Equivalent black carbon <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_bc1054_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/aethalometers/BC1054/#notes","title":"Notes","text":"<ul> <li>Provides real-time multi-wavelength measurements</li> <li>Enables detailed source apportionment with 10 channels</li> <li>Consecutive duplicate rows are removed during QC</li> <li>Automatic tape advance system</li> </ul>"},{"location":"api/instruments/aethalometers/MA350/","title":"MA350 Aethalometer","text":"<p>The MA350 is an advanced aethalometer that measures black carbon concentrations at multiple wavelengths and provides source apportionment between fossil fuel and biomass burning sources.</p>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader","title":"AeroViz.rawDataReader.script.MA350.Reader","text":"<pre><code>Reader(path: Path | str, reset: bool | str = False, qc: bool | str = True, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>MA350 Aethalometer Data Reader</p> <p>A specialized reader for MA350 Aethalometer data files, which measure black carbon at multiple wavelengths and provide source apportionment.</p> <p>See full documentation at docs/source/instruments/MA350.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'MA350'\n</code></pre>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader.BC_COLUMNS","title":"BC_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>BC_COLUMNS = ['BC1', 'BC2', 'BC3', 'BC4', 'BC5']\n</code></pre>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader.ABS_COLUMNS","title":"ABS_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ABS_COLUMNS = ['abs_375', 'abs_470', 'abs_528', 'abs_625', 'abs_880']\n</code></pre>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader.CAL_COLUMNS","title":"CAL_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CAL_COLUMNS = ['abs_550', 'AAE', 'eBC']\n</code></pre>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader.MIN_BC","title":"MIN_BC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_BC = 0\n</code></pre>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader.MAX_BC","title":"MAX_BC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_BC = 20000\n</code></pre>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader.MIN_AAE","title":"MIN_AAE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_AAE = 0.7\n</code></pre>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader.MAX_AAE","title":"MAX_AAE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_AAE = 2.0\n</code></pre>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader.ERROR_STATES","title":"ERROR_STATES  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ERROR_STATES = [1, 2, 4, 16, 32, 128, 256, 2048, 8192, 16384, 32768, 65536, 262144, 524288]\n</code></pre>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw MA350 Aethalometer data files.</p> <p>Parameters:</p> Name Type Description Default <code>file</code> <code>Path or str</code> <p>Path to the MA350 data file.</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed MA350 data with datetime index and standardized black carbon and source apportionment columns.</p>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on MA350 Aethalometer raw data.</p> QC Rules Applied (raw data only) <ol> <li>Status Error   : Invalid instrument status codes</li> <li>Invalid BC     : BC concentration outside 0-20000 ng/m\u00b3</li> <li>Insufficient   : Less than 50% hourly data completeness</li> </ol> <p>Note: AAE validation is done in _process() after calculation.</p>"},{"location":"api/instruments/aethalometers/MA350/#AeroViz.rawDataReader.script.MA350.Reader._process","title":"_process","text":"<pre><code>_process(_df)\n</code></pre> <p>Calculate absorption coefficients and validate derived parameters.</p> Processing Steps <ol> <li>Calculate absorption coefficients at each wavelength</li> <li>Calculate AAE (Absorption \u00c5ngstr\u00f6m Exponent)</li> <li>Calculate eBC (equivalent Black Carbon)</li> <li>Validate AAE range and update QC_Flag</li> </ol>"},{"location":"api/instruments/aethalometers/MA350/#data-format","title":"Data Format","text":"<ul> <li>File format: CSV file</li> <li>Sampling frequency: 1 minute</li> <li>File naming pattern: <code>*.csv</code></li> <li>Data structure:<ul> <li>Datetime index from 'Date / time local' column</li> <li>BC measurements at multiple wavelengths</li> <li>Source apportionment data</li> <li>Derived parameters</li> </ul> </li> </ul>"},{"location":"api/instruments/aethalometers/MA350/#measurement-parameters","title":"Measurement Parameters","text":"<p>The MA350 provides black carbon measurements at five wavelengths:</p> Column Wavelength Description BC1 375 nm UV channel BC2 470 nm Blue channel BC3 528 nm Green channel BC4 625 nm Red channel BC5 880 nm Near-IR channel (reference)"},{"location":"api/instruments/aethalometers/MA350/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/aethalometers/MA350/#data-reading","title":"Data Reading","text":"<ul> <li>Processes CSV files with specific header structure</li> <li>Standardizes column names</li> <li>Maps wavelength-specific measurements</li> <li>Handles datetime parsing</li> <li>Converts measurements to numeric format</li> </ul>"},{"location":"api/instruments/aethalometers/MA350/#quality-control","title":"Quality Control","text":"<p>The MA350 reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  [Pre-process] Calculate absorption coefficients, AAE, eBC            |\n|       |                                                               |\n|       v                                                               |\n|  +---------------------+    +---------------------+                   |\n|  | Rule: Status Error  |    | Rule: Invalid BC    |                   |\n|  +---------------------+    +---------------------+                   |\n|  | Bitwise status      |    | BC &lt;= 0 OR          |                   |\n|  | code filtering      |    | BC &gt; 20000 ng/m\u00b3    |                   |\n|  +---------------------+    +---------------------+                   |\n|           |                          |                                |\n|           v                          v                                |\n|  +---------------------+    +---------------------+                   |\n|  | Rule: Invalid AAE   |    | Rule: Insufficient  |                   |\n|  +---------------------+    +---------------------+                   |\n|  | AAE &lt; -2.0 OR       |    | &lt; 50% hourly data   |                   |\n|  | AAE &gt; -0.7          |    | completeness        |                   |\n|  +---------------------+    +---------------------+                   |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/aethalometers/MA350/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Status Error Bitwise status code check Invalid instrument status codes detected Invalid BC BC \u2264 0 OR BC &gt; 20000 ng/m\u00b3 BC concentration outside valid range Invalid AAE AAE &lt; -2.0 OR AAE &gt; -0.7 Angstrom exponent outside valid range Insufficient &lt; 50% hourly data Less than 50% hourly data completeness"},{"location":"api/instruments/aethalometers/MA350/#error-status-codes","title":"Error Status Codes","text":"Code Description 1 Power Failure 2 Start up 4 Tape advance 16 Optical saturation 32 Sample timing error 128 Flow unstable 256 Pump drive limit 2048 System busy 8192 Tape jam 16384 Tape at end 32768 Tape not ready 65536 Tape transport not ready 262144 Invalid date/time 524288 Tape error"},{"location":"api/instruments/aethalometers/MA350/#output-data","title":"Output Data","text":"<p>The processed data contains the following columns:</p> Column Unit Description BC1-BC5 ng/m\u00b3 Black carbon at 5 wavelengths abs_375-880 Mm\u207b\u00b9 Absorption coefficients abs_550 Mm\u207b\u00b9 Interpolated absorption at 550nm AAE - Absorption Angstrom Exponent eBC ng/m\u00b3 Equivalent black carbon <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_ma350_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/aethalometers/MA350/#notes","title":"Notes","text":"<ul> <li>Provides real-time source apportionment</li> <li>Distinguishes between fossil fuel and biomass burning</li> <li>Multi-wavelength measurement capability (5 channels)</li> <li>Advanced data quality control with QCFlagBuilder</li> </ul>"},{"location":"api/instruments/chemical/IGAC/","title":"In-situ Gas and Aerosol Composition Monitor (IGAC)","text":"<p>The IGAC monitor provides real-time measurements of water-soluble inorganic ions in particulate matter.</p>"},{"location":"api/instruments/chemical/IGAC/#AeroViz.rawDataReader.script.IGAC.Reader","title":"AeroViz.rawDataReader.script.IGAC.Reader","text":"<pre><code>Reader(path: Path | str, reset: bool | str = False, qc: bool | str = True, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>IGAC (In-situ Gas and Aerosol Composition) Monitor Data Reader</p> <p>This class handles the reading and parsing of IGAC monitor data files, which provide real-time measurements of water-soluble inorganic ions in particulate matter.</p> <p>See full documentation at docs/source/instruments/IGAC.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/chemical/IGAC/#AeroViz.rawDataReader.script.IGAC.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/chemical/IGAC/#AeroViz.rawDataReader.script.IGAC.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'IGAC'\n</code></pre>"},{"location":"api/instruments/chemical/IGAC/#AeroViz.rawDataReader.script.IGAC.Reader.CATION_COLUMNS","title":"CATION_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CATION_COLUMNS = ['Na+', 'NH4+', 'K+', 'Mg2+', 'Ca2+']\n</code></pre>"},{"location":"api/instruments/chemical/IGAC/#AeroViz.rawDataReader.script.IGAC.Reader.ANION_COLUMNS","title":"ANION_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ANION_COLUMNS = ['Cl-', 'NO2-', 'NO3-', 'PO43-', 'SO42-']\n</code></pre>"},{"location":"api/instruments/chemical/IGAC/#AeroViz.rawDataReader.script.IGAC.Reader.MAIN_IONS","title":"MAIN_IONS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAIN_IONS = ['SO42-', 'NO3-', 'NH4+']\n</code></pre>"},{"location":"api/instruments/chemical/IGAC/#AeroViz.rawDataReader.script.IGAC.Reader.MDL","title":"MDL  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MDL = {'Na+': 0.06, 'NH4+': 0.05, 'K+': 0.05, 'Mg2+': 0.12, 'Ca2+': 0.07, 'Cl-': 0.07, 'NO2-': 0.05, 'NO3-': 0.11, 'SO42-': 0.08}\n</code></pre>"},{"location":"api/instruments/chemical/IGAC/#AeroViz.rawDataReader.script.IGAC.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/chemical/IGAC/#AeroViz.rawDataReader.script.IGAC.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw IGAC monitor data files.</p> <p>Parameters:</p> Name Type Description Default <code>file</code> <code>Path or str</code> <p>Path to the IGAC data file.</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed IGAC data with datetime index and ion concentration columns.</p>"},{"location":"api/instruments/chemical/IGAC/#AeroViz.rawDataReader.script.IGAC.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on IGAC ion composition data.</p> QC Rules Applied <ol> <li>Mass Closure    : Total ion mass &gt; PM2.5 mass</li> <li>Missing Main    : Main ions (NH4+, SO42-, NO3-) not present</li> <li>Below MDL       : Ion concentration below detection limit</li> <li>Ion Balance     : Cation/Anion ratio outside valid range</li> </ol>"},{"location":"api/instruments/chemical/IGAC/#data-format","title":"Data Format","text":"<ul> <li>File format: CSV file</li> <li>Sampling frequency: 1 hour</li> <li>File naming pattern: <code>*.csv</code></li> <li>Data structure:<ul> <li>Datetime index</li> <li>Ion concentration columns</li> <li>PM2.5 mass concentration</li> <li>Special values: '-' treated as NA</li> </ul> </li> </ul>"},{"location":"api/instruments/chemical/IGAC/#measurement-parameters","title":"Measurement Parameters","text":"<p>The IGAC provides measurements of water-soluble ions:</p>"},{"location":"api/instruments/chemical/IGAC/#cations","title":"Cations","text":"Ion Unit Description Na+ \u03bcg/m\u00b3 Sodium NH4+ \u03bcg/m\u00b3 Ammonium K+ \u03bcg/m\u00b3 Potassium Mg2+ \u03bcg/m\u00b3 Magnesium Ca2+ \u03bcg/m\u00b3 Calcium"},{"location":"api/instruments/chemical/IGAC/#anions","title":"Anions","text":"Ion Unit Description Cl- \u03bcg/m\u00b3 Chloride NO2- \u03bcg/m\u00b3 Nitrite NO3- \u03bcg/m\u00b3 Nitrate PO43- \u03bcg/m\u00b3 Phosphate SO42- \u03bcg/m\u00b3 Sulfate"},{"location":"api/instruments/chemical/IGAC/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/chemical/IGAC/#data-reading","title":"Data Reading","text":"<ul> <li>Processes CSV files with datetime index</li> <li>Handles special values as NA</li> <li>Standardizes column names</li> <li>Converts measurements to numeric format</li> <li>Removes duplicate timestamps</li> </ul>"},{"location":"api/instruments/chemical/IGAC/#quality-control","title":"Quality Control","text":"<p>The IGAC reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                         QC Thresholds                                 |\n+-----------------------------------------------------------------------+\n| MDL (Minimum Detection Limits):                                       |\n|   Cations: Na+ 0.06, NH4+ 0.05, K+ 0.05, Mg2+ 0.12, Ca2+ 0.07 \u03bcg/m\u00b3   |\n|   Anions:  Cl- 0.07, NO2- 0.05, NO3- 0.11, SO42- 0.08 \u03bcg/m\u00b3           |\n| Main Ions: NH4+, SO42-, NO3- (must be present)                        |\n| Ion Balance: 0.8 &lt; cation/anion ratio &lt; 1.2                           |\n+-----------------------------------------------------------------------+\n\n+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  [Pre-process] Calculate ion sum, cation/anion equivalents            |\n|       |                                                               |\n|       v                                                               |\n|  +---------------------------+    +---------------------------+       |\n|  | Rule: Mass Closure        |    | Rule: Missing Main        |       |\n|  +---------------------------+    +---------------------------+       |\n|  | Ion sum &gt; PM2.5 mass      |    | NH4+, SO42-, or NO3-      |       |\n|  | (physically impossible)   |    | is missing                |       |\n|  +---------------------------+    +---------------------------+       |\n|           |                                |                          |\n|           v                                v                          |\n|  +---------------------------+    +---------------------------+       |\n|  | Rule: Below MDL           |    | Rule: Ion Balance         |       |\n|  +---------------------------+    +---------------------------+       |\n|  | Any ion below its         |    | Cation/Anion ratio        |       |\n|  | detection limit           |    | outside 0.8-1.2 range     |       |\n|  +---------------------------+    +---------------------------+       |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/chemical/IGAC/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Mass Closure Ion sum &gt; PM2.5 Total ion mass exceeds PM2.5 (physically impossible) Missing Main NH4+, SO42-, or NO3- is NaN Primary ion species are missing Below MDL Value &lt; MDL Measurement below minimum detection limit Ion Balance Ratio &lt; 0.8 OR &gt; 1.2 Cation/Anion equivalent ratio imbalance"},{"location":"api/instruments/chemical/IGAC/#minimum-detection-limits","title":"Minimum Detection Limits","text":"Ion MDL (\u03bcg/m\u00b3) Na+ 0.06 NH4+ 0.05 K+ 0.05 Mg2+ 0.12 Ca2+ 0.07 Cl- 0.07 NO2- 0.05 NO3- 0.11 SO42- 0.08"},{"location":"api/instruments/chemical/IGAC/#ion-balance-check","title":"Ion Balance Check","text":"<pre><code>    Cation/Anion Ratio\n         ^\n     1.2 +-------------------------------- Upper limit\n         |   +-----------------------+\n         |   |    VALID RANGE        |\n     1.0 +---|       (balanced)      |\n         |   +-----------------------+\n     0.8 +-------------------------------- Lower limit\n         +----------------------------&gt; Sample\n</code></pre>"},{"location":"api/instruments/chemical/IGAC/#output-data","title":"Output Data","text":"<p>The processed data contains:</p> Column Unit Description Na+, NH4+, K+, Mg2+, Ca2+ \u03bcg/m\u00b3 Cation concentrations Cl-, NO2-, NO3-, PO43-, SO42- \u03bcg/m\u00b3 Anion concentrations <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_igac_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/chemical/IGAC/#notes","title":"Notes","text":"<ul> <li>Critical for secondary inorganic aerosol analysis</li> <li>Significant contributor to PM2.5 mass</li> <li>Comprehensive quality control procedures</li> <li>Ion balance validation ensures data integrity</li> <li>Main ion species (NH4+, SO42-, NO3-) typically dominate</li> </ul>"},{"location":"api/instruments/chemical/OCEC/","title":"Organic Carbon/Elemental Carbon Analyzer (OC/EC)","text":"<p>The OC/EC analyzer measures carbonaceous aerosol components using thermal and optical methods.</p>"},{"location":"api/instruments/chemical/OCEC/#AeroViz.rawDataReader.script.OCEC.Reader","title":"AeroViz.rawDataReader.script.OCEC.Reader","text":"<pre><code>Reader(path: Path | str, reset: bool | str = False, qc: bool | str = True, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>OC/EC (Organic Carbon/Elemental Carbon) Analyzer Data Reader</p> <p>A specialized reader for OC/EC analyzer data files, which measure carbonaceous aerosol composition using thermal and optical methods.</p> <p>See full documentation at docs/source/instruments/OCEC.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/chemical/OCEC/#AeroViz.rawDataReader.script.OCEC.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/chemical/OCEC/#AeroViz.rawDataReader.script.OCEC.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'OCEC'\n</code></pre>"},{"location":"api/instruments/chemical/OCEC/#AeroViz.rawDataReader.script.OCEC.Reader.OUTPUT_COLUMNS","title":"OUTPUT_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>OUTPUT_COLUMNS = ['Thermal_OC', 'Thermal_EC', 'Optical_OC', 'Optical_EC', 'TC', 'OC1', 'OC2', 'OC3', 'OC4', 'PC']\n</code></pre>"},{"location":"api/instruments/chemical/OCEC/#AeroViz.rawDataReader.script.OCEC.Reader.MIN_VALUE","title":"MIN_VALUE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_VALUE = -5\n</code></pre>"},{"location":"api/instruments/chemical/OCEC/#AeroViz.rawDataReader.script.OCEC.Reader.MAX_VALUE","title":"MAX_VALUE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_VALUE = 100\n</code></pre>"},{"location":"api/instruments/chemical/OCEC/#AeroViz.rawDataReader.script.OCEC.Reader.MDL","title":"MDL  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MDL = {'Thermal_OC': 0.3, 'Optical_OC': 0.3, 'Thermal_EC': 0.015, 'Optical_EC': 0.015}\n</code></pre>"},{"location":"api/instruments/chemical/OCEC/#AeroViz.rawDataReader.script.OCEC.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/chemical/OCEC/#AeroViz.rawDataReader.script.OCEC.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw OC/EC data files.</p> <p>Parameters:</p> Name Type Description Default <code>file</code> <code>Path or str</code> <p>Path to the OC/EC data file.</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed OC/EC data with datetime index and carbon fraction columns.</p>"},{"location":"api/instruments/chemical/OCEC/#AeroViz.rawDataReader.script.OCEC.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on OC/EC data.</p> QC Rules Applied <ol> <li>Invalid Carbon  : Carbon value outside valid range (-5-100 ugC/m3)</li> <li>Below MDL       : Value below method detection limit</li> <li>Spike           : Sudden value change (vectorized spike detection)</li> <li>Missing OC      : Thermal_OC or Optical_OC is missing</li> </ol>"},{"location":"api/instruments/chemical/OCEC/#data-format","title":"Data Format","text":"<ul> <li>File format: CSV file</li> <li>Sampling frequency: 1 hour</li> <li>File naming pattern: <code>*LCRes.csv</code></li> <li>Data structure:<ul> <li>Header: 3 rows of metadata</li> <li>Time column: Start Date/Time</li> <li>Carbon fraction measurements</li> <li>Sample volume information</li> </ul> </li> </ul>"},{"location":"api/instruments/chemical/OCEC/#measurement-parameters","title":"Measurement Parameters","text":"<p>The OC/EC analyzer provides measurements of:</p> Parameter Unit Description Thermal_OC \u03bcgC/m\u00b3 Thermal organic carbon Thermal_EC \u03bcgC/m\u00b3 Thermal elemental carbon Optical_OC \u03bcgC/m\u00b3 Optical organic carbon Optical_EC \u03bcgC/m\u00b3 Optical elemental carbon OC1-4 \u03bcgC/m\u00b3 Carbon fractions by temperature PC \u03bcgC/m\u00b3 Pyrolyzed carbon TC \u03bcgC/m\u00b3 Total carbon"},{"location":"api/instruments/chemical/OCEC/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/chemical/OCEC/#data-reading","title":"Data Reading","text":"<ul> <li>Processes CSV files with varying header structures</li> <li>Handles 12/24 hour time formats</li> <li>Standardizes column names</li> <li>Rounds timestamps to nearest hour</li> <li>Converts raw measurements to concentration units</li> </ul>"},{"location":"api/instruments/chemical/OCEC/#quality-control","title":"Quality Control","text":"<p>The OCEC reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                         QC Thresholds                                 |\n+-----------------------------------------------------------------------+\n| MIN_VALUE = -5       \u03bcgC/m\u00b3                                           |\n| MAX_VALUE = 100      \u03bcgC/m\u00b3                                           |\n| MDL (Minimum Detection Limits):                                       |\n|   - Thermal_OC: 0.3 \u03bcgC/m\u00b3                                            |\n|   - Optical_OC: 0.3 \u03bcgC/m\u00b3                                            |\n|   - Thermal_EC: 0.015 \u03bcgC/m\u00b3                                          |\n|   - Optical_EC: 0.015 \u03bcgC/m\u00b3                                          |\n+-----------------------------------------------------------------------+\n\n+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  +---------------------------+    +---------------------------+       |\n|  | Rule: Invalid Carbon      |    | Rule: Below MDL           |       |\n|  +---------------------------+    +---------------------------+       |\n|  | Value &lt;= -5 OR            |    | Value &lt; MDL for           |       |\n|  | Value &gt; 100 \u03bcgC/m\u00b3        |    | respective column         |       |\n|  +---------------------------+    +---------------------------+       |\n|           |                                |                          |\n|           v                                v                          |\n|  +---------------------------+    +---------------------------+       |\n|  | Rule: Spike               |    | Rule: Missing OC          |       |\n|  +---------------------------+    +---------------------------+       |\n|  | Sudden value change       |    | Thermal_OC is NaN         |       |\n|  | (vectorized detection)    |    | (primary measurement)     |       |\n|  +---------------------------+    +---------------------------+       |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/chemical/OCEC/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Invalid Carbon Value \u2264 -5 OR &gt; 100 \u03bcgC/m\u00b3 Carbon value outside valid range Below MDL Value &lt; MDL Measurement below minimum detection limit Spike Sudden value change Unreasonable sudden change detected Missing OC Thermal_OC or Optical_OC is NaN Primary OC measurement is missing"},{"location":"api/instruments/chemical/OCEC/#minimum-detection-limits","title":"Minimum Detection Limits","text":"Parameter MDL (\u03bcgC/m\u00b3) Thermal_OC 0.3 Optical_OC 0.3 Thermal_EC 0.015 Optical_EC 0.015"},{"location":"api/instruments/chemical/OCEC/#output-data","title":"Output Data","text":"<p>The processed data contains:</p> Column Unit Description Thermal_OC \u03bcgC/m\u00b3 Thermal organic carbon Thermal_EC \u03bcgC/m\u00b3 Thermal elemental carbon Optical_OC \u03bcgC/m\u00b3 Optical organic carbon Optical_EC \u03bcgC/m\u00b3 Optical elemental carbon TC \u03bcgC/m\u00b3 Total carbon <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_ocec_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/chemical/OCEC/#notes","title":"Notes","text":"<ul> <li>Provides critical information about combustion sources</li> <li>Helps identify secondary organic aerosol formation</li> <li>Combines thermal and optical analysis methods</li> <li>Standardizes output across different instrument formats</li> </ul>"},{"location":"api/instruments/chemical/VOC/","title":"Volatile Organic Compounds Analyzer (VOC)","text":"<p>The VOC analyzer measures concentrations of various volatile organic compounds in air.</p>"},{"location":"api/instruments/chemical/VOC/#data-format","title":"Data Format","text":"<ul> <li>File format: CSV file</li> <li>Sampling frequency: Variable</li> <li>File naming pattern: <code>*.csv</code></li> <li>Data structure:<ul> <li>Datetime index</li> <li>VOC species columns</li> <li>Special values:<ul> <li>'-' treated as NA</li> <li>'N.D.' (Not Detected) treated as NA</li> </ul> </li> </ul> </li> </ul>"},{"location":"api/instruments/chemical/VOC/#measurement-parameters","title":"Measurement Parameters","text":"<p>The VOC analyzer provides:</p> <ul> <li>Multiple VOC species measurements</li> <li>Concentration data for each compound</li> <li>Supported species list required</li> <li>Species-specific detection limits</li> </ul>"},{"location":"api/instruments/chemical/VOC/#supported-voc-species","title":"Supported VOC Species","text":"<p>The analyzer supports the following VOC species:</p> class Species MIR MW SOAP KOH aromatic Benzene 0.72 78.11 92.9 1.22 Toluene 4.0 92.14 100.0 5.63 Ethylbenzene 3.04 106.17 111.6 7.0 m/p-Xylene 7.8 106.2 75.8 18.95 o-Xylene 7.64 106.16 95.5 13.6 alkane Ethane 0.28 30.07 0.1 0.248 Propane 0.49 44.1 0.0 1.09 Isobutane 1.23 58.12 0.0 2.12 n-Butane 1.15 58.12 0.3 2.36 Isopentane 1.45 72.15 0.2 3.6 n-Pentane 1.31 72.15 0.3 3.8 n-Hexane 1.24 86.18 0.1 5.2 n-Heptane 1.07 100.21 0.1 6.76 n-Octane 0.9 114.23 0.8 8.11 n-Nonane 0.78 128.2 1.9 9.7 n-Decane 0.68 142.29 7.0 11.0 n-Undecane 0.61 156.31 16.2 12.3 n-Dodecane 0.55 null null null alkene Ethylene 9.0 28.05 1.3 8.52 Propylene (Propene) 11.66 42.08 1.6 26.3 1-Butene 9.73 56.1 1.2 31.4 t-2-Butene 15.16 56.1 3.1 56.4 cis-2-Butene 14.24 56.1 3.6 64.0 1-Pentene 7.21 70.13 0.0 31.4 t-2-Pentene 10.56 70.13 4.0 67.0 cis-2-Pentene 10.38 70.13 3.6 65.0 1-Hexene 5.49 null null null Isoprene 10.61 68.1 1.9 100.0 alkyne Acetylene 0.95 26.04 0.1 0.85 alkane Cyclopentane 2.39 70.1 0.0 4.97 Methylcyclopentane 2.19 84.16 0.0 5.2 Cyclohexane 1.25 84.16 0.0 6.97 Methylcyclohexane 1.7 98.19 0.0 4.97 2,2-Dimethylbutane 1.17 86.17 0.0 2.23 2,3-Dimethylbutane 0.97 86.18 0.0 5.78 2-Methylpentane 1.5 86.18 0.0 5.4 3-Methylpentane 1.8 86.18 0.2 5.2 2,3-Dimethylpentane 1.34 100.2 0.4 1.5 2,4-Dimethylpentane 1.55 100.2 0.0 4.77 2-Methylhexane 1.19 100.2 0.0 5.65 3-Methylheptane 1.24 114.23 0.0 5.6 2,2,4-Trimethylpentane 1.26 114.23 0.0 3.34 2,3,4-Trimethylpentane 1.03 114.23 0.0 6.6 2-Methylheptane 1.07 114.23 0.0 7.0 3-Methylhexane 1.61 100.2 0.0 7.0 aromatic Styrene 1.73 104.15 212.3 58.0 Isopropylbenzene 2.52 120.19 95.5 6.3 n-Propylbenzene 2.03 null null null m-Ethyltoluene 7.39 120.19 100.6 11.8 p-Ethyltoluene 4.44 120.19 69.7 18.6 o-Ethyltoluene 5.59 120.19 94.8 11.9 m-Diethylbenzene 7.1 134.22 0.0 32.5 p-Diethylbenzene 4.43 134.22 0.0 32.7 1,3,5-Trimethylbenzene 11.76 120.19 13.5 56.7 1,2,4-Trimethylbenzene 8.87 120.19 20.6 32.5 1,2,3-Trimethylbenzene 11.97 120.19 43.9 32.7 1,3-Butadiene 12.61 54.1 1.8 66.6 1-Octene 3.25 112.2 null 30.0 2-Ethyltoluene 5.59 120.2 94.8 11.9 3,4-Ethyltoluene 5.92 120.2 85.2 15.2 OVOC Acetaldehyde 6.54 44.1 0.6 15.0 OVOC Acetone 0.36 58.1 0.3 0.17 OVOC Butyl Acetate 0.83 116.2 0.0 null OVOC Ethanol 1.53 46.1 0.6 3.2 OVOC Ethyl Acetate 0.63 88.1 0.1 null OVOC IPA 0.61 60.1 0.4 5.1 ClVOC 1,2-DCB 0.18 147.0 null null ClVOC 1,4-DCB 0.18 147.0 null null ClVOC PCE 0.03 165.8 null 0.16 ClVOC TCE 0.64 131.4 null 1.9 ClVOC VCM 2.83 62.5 null null"},{"location":"api/instruments/chemical/VOC/#species-parameters","title":"Species Parameters:","text":"<ul> <li>MIR: Maximum Incremental Reactivity</li> <li>MW: Molecular Weight</li> <li>SOAP: Secondary Organic Aerosol Potential</li> <li>KOH: Rate constant for the reaction with OH radicals</li> </ul>"},{"location":"api/instruments/chemical/VOC/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/chemical/VOC/#data-reading","title":"Data Reading","text":"<ul> <li>Processes CSV files with datetime index</li> <li>Handles special values as NA</li> <li>Standardizes column names</li> <li>Filters based on supported species list</li> <li>Warns about unsupported species</li> <li>Removes duplicate timestamps</li> </ul>"},{"location":"api/instruments/chemical/VOC/#quality-control","title":"Quality Control","text":"<ul> <li>Basic file validation</li> <li>No additional QC currently implemented</li> <li>Future QC possibilities:<ul> <li>Minimum detection limit filtering</li> <li>Value range checks</li> <li>Time-based outlier detection</li> <li>Correlation checks between species</li> </ul> </li> </ul>"},{"location":"api/instruments/chemical/VOC/#output-data","title":"Output Data","text":"<p>The processed data contains:</p> <ul> <li>Time index: Data acquisition time</li> <li>VOC species: Concentrations of supported compounds</li> <li>All measurements in standard units</li> <li>Validated species names</li> </ul>"},{"location":"api/instruments/chemical/VOC/#usage-example","title":"Usage Example","text":"<pre><code>from datetime import datetime as dtm\nfrom pathlib import Path\n\nfrom AeroViz.dataProcess import *\nfrom AeroViz.rawDataReader import *\n\nstart, end = dtm(2024, 2, 1), dtm(2024, 7, 31, 23)\n\npath_raw = Path('data')\npath_prcs = Path('prcs')\n\n# read data\ndt_VOC = RawDataReader('VOC', path_raw / 'VOC', reset=False, start=start, end=end)\ndt_VOC.rename(columns={'isoprene': 'Isoprene', 'm,p-Xylene': 'm/p-Xylene'}, inplace=True)\n\nvoc_prcs = DataProcess('VOC', path_out=path_prcs, excel=False, csv=True)\n\ndf = voc_prcs.VOC_basic(dt_VOC)\n</code></pre>"},{"location":"api/instruments/chemical/VOC/#notes","title":"Notes","text":"<ul> <li>Critical for air quality assessment</li> <li>Important for photochemical reaction studies</li> <li>Helps identify secondary organic aerosol sources</li> <li>Requires predefined species list</li> <li>Species name standardization essential</li> <li>Some species may have missing parameters (marked as \"null\")</li> <li>Analysis includes concentration, MIR, SOAP, and KOH values</li> </ul>"},{"location":"api/instruments/chemical/Xact/","title":"Xact 625i XRF Analyzer","text":"<p>The Xact 625i is a continuous X-ray fluorescence (XRF) analyzer for real-time elemental analysis of particulate matter.</p>"},{"location":"api/instruments/chemical/Xact/#instrument-overview","title":"Instrument Overview","text":"Specification Value Manufacturer Cooper Environmental Services Model Xact 625i Measurement Elemental composition (ng/m3) Time Resolution Hourly Elements 72 elements (Mg to U)"},{"location":"api/instruments/chemical/Xact/#data-format","title":"Data Format","text":"<ul> <li>File format: CSV</li> <li>Time format: <code>MM/DD/YYYY HH:MM:SS</code></li> <li>Data structure: Element concentrations with uncertainties + environmental parameters</li> </ul>"},{"location":"api/instruments/chemical/Xact/#column-structure","title":"Column Structure","text":"<p>The raw data file contains:</p> <ol> <li>Element concentrations: <code>Element AtomicNumber (ng/m3)</code> (e.g., <code>Mg 12 (ng/m3)</code>)</li> <li>Uncertainties: <code>Element Uncert (ng/m3)</code> (e.g., <code>Mg uncert (ng/m3)</code>)</li> <li>Environmental parameters: Temperature, pressure, flow, RH, etc.</li> <li>Alarm codes: Instrument status indicators</li> </ol>"},{"location":"api/instruments/chemical/Xact/#supported-elements","title":"Supported Elements","text":"<pre><code>ELEMENTS = [\n    'Mg', 'Al', 'Si', 'P', 'S', 'Cl', 'Ar', 'K', 'Ca', 'Sc', 'Ti', 'V', 'Cr', 'Mn', 'Fe',\n    'Co', 'Ni', 'Cu', 'Zn', 'Ga', 'Ge', 'As', 'Se', 'Br', 'Rb', 'Sr', 'Y', 'Zr', 'Nb', 'Mo',\n    'Ru', 'Rh', 'Pd', 'Ag', 'Cd', 'In', 'Sn', 'Sb', 'Te', 'I', 'Cs', 'Ba', 'La', 'Ce',\n    'Pr', 'Nd', 'Pm', 'Sm', 'Eu', 'Gd', 'Tb', 'Dy', 'Ho', 'Er', 'Tm', 'Yb', 'Lu',\n    'Hf', 'Ta', 'W', 'Re', 'Os', 'Ir', 'Pt', 'Au', 'Hg', 'Tl', 'Pb', 'Bi', 'Th', 'Pa', 'U'\n]\n</code></pre>"},{"location":"api/instruments/chemical/Xact/#usage","title":"Usage","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nfrom AeroViz import RawDataReader\n\n# Read Xact data\ndata = RawDataReader(\n    instrument='Xact',\n    path=Path('/path/to/xact/data'),\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 12, 31),\n    mean_freq='1h'\n)\n\n# View available elements\nprint(data.columns.tolist())\n# ['Mg', 'Al', 'Si', 'S', 'K', 'Ca', 'Fe', 'Pb', ...]\n</code></pre>"},{"location":"api/instruments/chemical/Xact/#quality-control","title":"Quality Control","text":""},{"location":"api/instruments/chemical/Xact/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Instrument Error ALARM code 100-110 Instrument malfunction detected Upscale Warning ALARM code 200-203 Concentration exceeds measurement range Invalid Value &lt; 0 or &gt; 100,000 ng/m3 Concentration outside valid range High Uncertainty Uncertainty &gt; 50% of value Measurement reliability concern"},{"location":"api/instruments/chemical/Xact/#alarm-codes","title":"Alarm Codes","text":"<p>Error Codes (100-110) - Invalidate data:</p> Code Description 100 X-ray Voltage Error 101 X-ray Current Error 102 Tube Temperature Error 103 Enclosure Temperature Error 104 Tape Error 105 Pump Error 106 Filter Wheel Error 107 Dynamic Rod Error 108 Nozzle Error 109 Energy Calibration Error 110 Software Error <p>Warning Codes (200-203) - Upscale warnings:</p> Code Description 200 Upscale Cr Warning 201 Upscale Pb Warning 202 Upscale Cd Warning 203 Upscale Nb Warning"},{"location":"api/instruments/chemical/Xact/#output-data","title":"Output Data","text":""},{"location":"api/instruments/chemical/Xact/#element-columns","title":"Element Columns","text":"<p>Each detected element has two columns: - <code>Element</code> - Concentration in ng/m3 (e.g., <code>Pb</code>, <code>Fe</code>, <code>S</code>) - <code>Element_uncert</code> - Measurement uncertainty in ng/m3</p>"},{"location":"api/instruments/chemical/Xact/#environmental-columns","title":"Environmental Columns","text":"Column Description Unit <code>AT</code> Ambient Temperature C <code>SAMPLE_T</code> Sample Temperature C <code>BP</code> Barometric Pressure mmHg <code>TAPE</code> Tape Pressure mmHg <code>FLOW_25</code> Flow at 25C slpm <code>FLOW_ACT</code> Actual Flow lpm <code>FLOW_STD</code> Standard Flow slpm <code>VOLUME</code> Sample Volume L <code>TUBE_T</code> X-ray Tube Temperature C <code>ENCLOSURE_T</code> Enclosure Temperature C <code>FILAMENT_V</code> Filament Voltage V <code>SDD_T</code> SDD Temperature C <code>DPP_T</code> DPP Temperature C <code>RH</code> Relative Humidity % <code>WIND</code> Wind Speed m/s <code>WIND_DIR</code> Wind Direction deg <code>SAMPLE_TIME</code> Sample Time min <code>ALARM</code> Alarm Code -"},{"location":"api/instruments/chemical/Xact/#example-analysis","title":"Example Analysis","text":"<pre><code>from AeroViz import RawDataReader\nfrom pathlib import Path\nfrom datetime import datetime\n\n# Read data\nxact = RawDataReader(\n    instrument='Xact',\n    path=Path('./data/xact'),\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 3, 31)\n)\n\n# Calculate crustal elements ratio\nsoil_elements = ['Al', 'Si', 'Ca', 'Fe', 'Ti']\nxact['Soil'] = (\n    2.20 * xact['Al'] +\n    2.49 * xact['Si'] +\n    1.63 * xact['Ca'] +\n    2.42 * xact['Fe'] +\n    1.94 * xact['Ti']\n) / 1000  # Convert to ug/m3\n\n# Heavy metals analysis\nheavy_metals = ['Pb', 'Cd', 'As', 'Cr', 'Ni']\nprint(xact[heavy_metals].describe())\n</code></pre>"},{"location":"api/instruments/chemical/Xact/#notes","title":"Notes","text":"<ul> <li>Data is automatically rounded to hourly resolution</li> <li>Duplicate timestamps are removed</li> <li>Non-numeric values are coerced to NaN</li> <li>QC flags are stored in <code>QC_Flag</code> column during processing</li> <li>Units are ng/m3 (nanograms per cubic meter)</li> </ul>"},{"location":"api/instruments/chemical/Xact/#api-reference","title":"API Reference","text":""},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader","title":"AeroViz.rawDataReader.script.Xact.Reader","text":"<pre><code>Reader(path: Path | str, reset: bool | str = False, qc: bool | str = True, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>Xact 625i XRF Analyzer Data Reader</p> <p>A specialized reader for Xact 625i continuous XRF analyzer data files, which measure elemental composition of particulate matter.</p>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'Xact'\n</code></pre>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader.ELEMENTS","title":"ELEMENTS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ELEMENTS = ['Mg', 'Al', 'Si', 'P', 'S', 'Cl', 'Ar', 'K', 'Ca', 'Sc', 'Ti', 'V', 'Cr', 'Mn', 'Fe', 'Co', 'Ni', 'Cu', 'Zn', 'Ga', 'Ge', 'As', 'Se', 'Br', 'Rb', 'Sr', 'Y', 'Zr', 'Nb', 'Mo', 'Ru', 'Rh', 'Pd', 'Ag', 'Cd', 'In', 'Sn', 'Sb', 'Te', 'I', 'Cs', 'Ba', 'La', 'Ce', 'Pr', 'Nd', 'Pm', 'Sm', 'Eu', 'Gd', 'Tb', 'Dy', 'Ho', 'Er', 'Tm', 'Yb', 'Lu', 'Hf', 'Ta', 'W', 'Re', 'Os', 'Ir', 'Pt', 'Au', 'Hg', 'Tl', 'Pb', 'Bi', 'Th', 'Pa', 'U']\n</code></pre>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader.ENV_COLUMNS","title":"ENV_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ENV_COLUMNS = ['AT', 'SAMPLE_T', 'BP', 'TAPE', 'FLOW_25', 'FLOW_ACT', 'FLOW_STD', 'VOLUME', 'TUBE_T', 'ENCLOSURE_T', 'FILAMENT_V', 'SDD_T', 'DPP_T', 'RH', 'WIND', 'WIND_DIR', 'SAMPLE_TIME', 'ALARM']\n</code></pre>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader.ERROR_CODES","title":"ERROR_CODES  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ERROR_CODES = {100: 'Xray Voltage Error', 101: 'Xray Current Error', 102: 'Tube Temperature Error', 103: 'Enclosure Temperature Error', 104: 'Tape Error', 105: 'Pump Error', 106: 'Filter Wheel Error', 107: 'Dynamic Rod Error', 108: 'Nozzle Error', 109: 'Energy Calibration Error', 110: 'Software Error'}\n</code></pre>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader.WARNING_CODES","title":"WARNING_CODES  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>WARNING_CODES = {200: 'Upscale Cr Warning', 201: 'Upscale Pb Warning', 202: 'Upscale Cd Warning', 203: 'Upscale Nb Warning'}\n</code></pre>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader.MIN_VALUE","title":"MIN_VALUE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_VALUE = 0\n</code></pre>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader.MAX_VALUE","title":"MAX_VALUE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_VALUE = 100000\n</code></pre>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw Xact 625i XRF data files.</p>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on Xact XRF data.</p> QC Rules Applied <ol> <li>Instrument Error  : ALARM code 100-110 indicates instrument error</li> <li>Upscale Warning   : ALARM code 200-203 indicates upscale warning</li> <li>Invalid Value     : Element concentration outside valid range (0-100000 ng/m3)</li> <li>High Uncertainty  : Measurement uncertainty &gt; 50% of value</li> </ol>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader._check_high_uncertainty","title":"_check_high_uncertainty","text":"<pre><code>_check_high_uncertainty(df, element_cols)\n</code></pre> <p>Check if uncertainty is &gt; 50% of measured value.</p>"},{"location":"api/instruments/chemical/Xact/#AeroViz.rawDataReader.script.Xact.Reader.decode_alarm","title":"decode_alarm","text":"<pre><code>decode_alarm(alarm_code)\n</code></pre> <p>Decode ALARM code to human-readable message.</p> <p>Parameters:</p> Name Type Description Default <code>alarm_code</code> <code>int</code> <p>The ALARM code from the Xact data</p> required <p>Returns:</p> Type Description <code>str</code> <p>Human-readable description of the alarm</p>"},{"location":"api/instruments/mass/BAM1020/","title":"BAM1020 Beta Attenuation Monitor","text":"<p>The BAM1020 is a beta attenuation monitor used for measuring PM2.5 mass concentrations in ambient air.</p>"},{"location":"api/instruments/mass/BAM1020/#AeroViz.rawDataReader.script.BAM1020.Reader","title":"AeroViz.rawDataReader.script.BAM1020.Reader","text":"<pre><code>Reader(path: Path | str, reset: bool | str = False, qc: bool | str = True, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>BAM1020 (Beta Attenuation Monitor) Data Reader</p> <p>A specialized reader for BAM1020 data files, which measure PM2.5 mass concentration using beta attenuation technology.</p> <p>See full documentation at docs/source/instruments/BAM1020.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/mass/BAM1020/#AeroViz.rawDataReader.script.BAM1020.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/mass/BAM1020/#AeroViz.rawDataReader.script.BAM1020.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'BAM1020'\n</code></pre>"},{"location":"api/instruments/mass/BAM1020/#AeroViz.rawDataReader.script.BAM1020.Reader.MIN_CONC","title":"MIN_CONC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_CONC = 0\n</code></pre>"},{"location":"api/instruments/mass/BAM1020/#AeroViz.rawDataReader.script.BAM1020.Reader.MAX_CONC","title":"MAX_CONC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_CONC = 500\n</code></pre>"},{"location":"api/instruments/mass/BAM1020/#AeroViz.rawDataReader.script.BAM1020.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/mass/BAM1020/#AeroViz.rawDataReader.script.BAM1020.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw BAM1020 data files.</p> <p>Parameters:</p> Name Type Description Default <code>file</code> <code>Path or str</code> <p>Path to the BAM1020 data file.</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed BAM1020 data with datetime index and PM2.5 concentration column.</p>"},{"location":"api/instruments/mass/BAM1020/#AeroViz.rawDataReader.script.BAM1020.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on BAM1020 data.</p> QC Rules Applied <ol> <li>Invalid Conc    : Concentration outside valid range (0-500 ug/m3)</li> <li>Spike           : Sudden value change (vectorized spike detection)</li> </ol>"},{"location":"api/instruments/mass/BAM1020/#data-format","title":"Data Format","text":"<ul> <li>File format: CSV files</li> <li>Sampling frequency: 1 hour</li> <li>File naming pattern: Various formats supported</li> <li>Data columns: PM2.5 mass concentration and related parameters</li> </ul>"},{"location":"api/instruments/mass/BAM1020/#measurement-parameters","title":"Measurement Parameters","text":"<p>The BAM1020 provides:</p> Parameter Unit Description Conc \u03bcg/m\u00b3 PM2.5 mass concentration Status - Instrument status codes Flow L/min Sample flow rate Temperature \u00b0C Internal temperature Pressure hPa Atmospheric pressure"},{"location":"api/instruments/mass/BAM1020/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/mass/BAM1020/#data-reading","title":"Data Reading","text":"<ul> <li>Reads CSV format files with automatic column detection</li> <li>Handles various timestamp formats</li> <li>Processes instrument status information</li> <li>Validates data integrity</li> </ul>"},{"location":"api/instruments/mass/BAM1020/#quality-control","title":"Quality Control","text":"<p>The BAM1020 reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                         QC Thresholds                                 |\n+-----------------------------------------------------------------------+\n| MIN_CONC = 0         \u03bcg/m\u00b3                                            |\n| MAX_CONC = 1000      \u03bcg/m\u00b3                                            |\n+-----------------------------------------------------------------------+\n\n+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  +---------------------------+    +---------------------------+       |\n|  | Rule: Invalid Conc        |    | Rule: Spike               |       |\n|  +---------------------------+    +---------------------------+       |\n|  | Conc &lt;= 0 OR              |    | Sudden value change       |       |\n|  | Conc &gt; 500 \u03bcg/m\u00b3          |    | (vectorized detection)    |       |\n|  +---------------------------+    +---------------------------+       |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/mass/BAM1020/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Invalid Conc Conc \u2264 0 OR Conc &gt; 500 \u03bcg/m\u00b3 Concentration outside valid range Spike Sudden value change Unreasonable sudden change detected"},{"location":"api/instruments/mass/BAM1020/#valid-concentration-range","title":"Valid Concentration Range","text":"<pre><code>    Conc (\u03bcg/m\u00b3)\n       ^\n  1000 +-------------------------------- MAX_CONC\n       |   +-----------------------+    (reject if exceeded)\n       |   |    VALID RANGE        |\n       |   +-----------------------+\n     0 +-------------------------------- MIN_CONC\n       +----------------------------&gt; Time\n</code></pre>"},{"location":"api/instruments/mass/BAM1020/#output-data","title":"Output Data","text":"<p>The processed data contains:</p> Column Unit Description Conc \u03bcg/m\u00b3 PM2.5 mass concentration <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_bam1020_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/mass/BAM1020/#notes","title":"Notes","text":"<ul> <li>Beta attenuation technology provides real-time PM2.5 measurements</li> <li>Regular calibration and maintenance are required for accurate results</li> <li>Status codes indicate instrument health and measurement validity</li> <li>Suitable for continuous ambient air quality monitoring</li> </ul>"},{"location":"api/instruments/mass/TEOM/","title":"TEOM (Tapered Element Oscillating Microbalance)","text":"<p>The TEOM is used for continuous monitoring of PM2.5 mass concentrations using microbalance technology.</p>"},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader","title":"AeroViz.rawDataReader.script.TEOM.Reader","text":"<pre><code>Reader(*args, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>TEOM Output Data Formats Reader</p> <p>A specialized reader for TEOM (Tapered Element Oscillating Microbalance) particulate matter data files with support for multiple file formats and comprehensive quality control.</p> <p>See full documentation at docs/source/instruments/TEOM.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'TEOM'\n</code></pre>"},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader.PM_COLUMNS","title":"PM_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>PM_COLUMNS = ['PM_NV', 'PM_Total']\n</code></pre>"},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader.OUTPUT_COLUMNS","title":"OUTPUT_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>OUTPUT_COLUMNS = ['PM_NV', 'PM_Total', 'Volatile_Fraction']\n</code></pre>"},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader.MAX_NOISE","title":"MAX_NOISE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_NOISE = 0.01\n</code></pre>"},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader.STATUS_COLUMN","title":"STATUS_COLUMN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_COLUMN = 'status'\n</code></pre>"},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader.STATUS_OK","title":"STATUS_OK  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_OK = 0\n</code></pre>"},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader._status_data","title":"_status_data  <code>instance-attribute</code>","text":"<pre><code>_status_data = None\n</code></pre>"},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw TEOM data files in various formats.</p> <p>Handles multiple TEOM data formats and standardizes them to a consistent structure with uniform column names and datetime index.</p> <p>Parameters:</p> Name Type Description Default <code>file</code> <code>Path or str</code> <p>Path to the TEOM data file.</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed raw TEOM data with datetime index and standardized columns.</p> <p>Raises:</p> Type Description <code>NotImplementedError</code> <p>If the file format is not recognized as a supported TEOM data format.</p>"},{"location":"api/instruments/mass/TEOM/#AeroViz.rawDataReader.script.TEOM.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on TEOM particulate matter data.</p> QC Rules Applied <ol> <li>Status Error         : Non-zero status code indicates instrument error</li> <li>High Noise           : noise &gt;= 0.01</li> <li>Non-positive         : PM_NV &lt;= 0 OR PM_Total &lt;= 0</li> <li>NV &gt; Total           : PM_NV &gt; PM_Total (physically impossible)</li> <li>Invalid Vol Frac     : Volatile_Fraction outside valid range (0-1)</li> <li>Spike                : Sudden value change (vectorized spike detection)</li> <li>Insufficient         : Less than 50% hourly data completeness</li> </ol>"},{"location":"api/instruments/mass/TEOM/#data-format","title":"Data Format","text":"<ul> <li>File format: CSV file</li> <li>Sampling frequency: 6 minutes</li> <li>File naming pattern: <code>*.csv</code></li> <li>Supported formats:<ul> <li>Remote Download Format (Time Stamp column)</li> <li>USB Download/Auto Export Format (tmoStatusCondition_0 column)</li> </ul> </li> </ul>"},{"location":"api/instruments/mass/TEOM/#remote-download-format","title":"Remote Download Format","text":"Column Mapping Description Time Stamp time Timestamp (DD - MM - YYYY HH:MM:SS) System status status Instrument status PM-2.5 base MC PM_NV Non-volatile PM2.5 PM-2.5 MC PM_Total Total PM2.5 PM-2.5 TEOM noise noise Measurement noise"},{"location":"api/instruments/mass/TEOM/#usbauto-export-format","title":"USB/Auto Export Format","text":"Column Mapping Description Date, Time time Timestamp tmoStatusCondition_0 status Instrument status tmoTEOMABaseMC_0 PM_NV Non-volatile PM2.5 tmoTEOMAMC_0 PM_Total Total PM2.5 tmoTEOMANoise_0 noise Measurement noise"},{"location":"api/instruments/mass/TEOM/#measurement-parameters","title":"Measurement Parameters","text":"Parameter Unit Description PM_Total \u03bcg/m\u00b3 Total PM2.5 mass concentration PM_NV \u03bcg/m\u00b3 Non-volatile PM2.5 concentration noise - TEOM measurement noise"},{"location":"api/instruments/mass/TEOM/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/mass/TEOM/#data-reading","title":"Data Reading","text":"<ul> <li>Unifies column names across different data formats</li> <li>Handles various time formats, including Chinese month name conversion</li> <li>Converts all measurement values to numeric format</li> <li>Removes duplicate timestamps and invalid indices</li> </ul>"},{"location":"api/instruments/mass/TEOM/#quality-control","title":"Quality Control","text":"<p>The TEOM reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                         QC Thresholds                                 |\n+-----------------------------------------------------------------------+\n| MAX_NOISE          = 0.01                                             |\n| MIN_VOL_FRAC       = 0.01      PM_NV / PM_Total minimum               |\n| MAX_VOL_FRAC       = 0.9       PM_NV / PM_Total maximum               |\n| STATUS_OK          = 0         (numeric status code)                  |\n+-----------------------------------------------------------------------+\n\n+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  [Pre-process] Calculate volatile fraction (PM_NV / PM_Total)         |\n|       |                                                               |\n|       v                                                               |\n|  +-------------------------+                                          |\n|  | Rule: Status Error      |                                          |\n|  +-------------------------+                                          |\n|  | Status code != 0        |                                          |\n|  +-------------------------+                                          |\n|           |                                                           |\n|           v                                                           |\n|  +-------------------------+    +-------------------------+           |\n|  | Rule: High Noise        |    | Rule: Non-positive      |           |\n|  +-------------------------+    +-------------------------+           |\n|  | noise &gt; 0.01            |    | PM_Total &lt;= 0 OR        |           |\n|  +-------------------------+    | PM_NV &lt;= 0              |           |\n|           |                     +-------------------------+           |\n|           v                              |                            |\n|  +-------------------------+             v                            |\n|  | Rule: NV &gt; Total        |    +-------------------------+           |\n|  +-------------------------+    | Rule: Invalid Vol Frac  |           |\n|  | PM_NV &gt; PM_Total        |    +-------------------------+           |\n|  | (physically impossible) |    | Ratio &gt; 0.9 OR &lt; 0.01   |           |\n|  +-------------------------+    +-------------------------+           |\n|           |                              |                            |\n|           v                              v                            |\n|  +-------------------------+    +-------------------------+           |\n|  | Rule: Spike             |    | Rule: Insufficient      |           |\n|  +-------------------------+    +-------------------------+           |\n|  | Sudden value change     |    | &lt; 50% hourly data       |           |\n|  | (vectorized detection)  |    | completeness            |           |\n|  +-------------------------+    +-------------------------+           |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/mass/TEOM/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Status Error Status \u2260 0 Non-zero status code indicates instrument error High Noise noise \u2265 0.01 Measurement noise exceeds threshold Non-positive PM_Total \u2264 0 OR PM_NV \u2264 0 Non-positive concentration values NV &gt; Total PM_NV &gt; PM_Total Non-volatile exceeds total (physically impossible) Invalid Vol Frac Ratio &lt; 0 OR &gt; 1 Volatile fraction outside valid range (0-1) Spike Sudden value change Unreasonable sudden change detected Insufficient &lt; 50% hourly data Less than 50% hourly data completeness"},{"location":"api/instruments/mass/TEOM/#output-data","title":"Output Data","text":"<p>The processed data contains the following columns:</p> Column Unit Description PM_Total \u03bcg/m\u00b3 Total PM2.5 mass concentration PM_NV \u03bcg/m\u00b3 Non-volatile PM2.5 concentration <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_teom_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/mass/TEOM/#usage-example","title":"Usage Example","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\n\nfrom AeroViz import RawDataReader\n\n# Set data path and time range\ndata_path = Path('/path/to/your/data/folder')\nstart_time = datetime(2024, 2, 1)\nend_time = datetime(2024, 3, 31, 23, 59, 59)\n\n# Read and process TEOM data\nteom_data = RawDataReader(\n    instrument='TEOM',\n    path=data_path,\n    reset=True,\n    qc='1MS',\n    start=start_time,\n    end=end_time,\n    mean_freq='1h',\n)\n\n# Show processed data\nprint(\"\\nProcessed TEOM data:\")\nprint(teom_data.head())\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/","title":"Aurora Integrating Nephelometer","text":"<p>The Aurora is an integrating nephelometer used for measuring light scattering properties of aerosols at multiple wavelengths.</p>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader","title":"AeroViz.rawDataReader.script.Aurora.Reader","text":"<pre><code>Reader(*args, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>Aurora Integrating Nephelometer Data Reader</p> <p>A specialized reader for Aurora nephelometer data files, which measure aerosol light scattering properties at multiple wavelengths.</p> <p>See full documentation at docs/source/instruments/Aurora.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'Aurora'\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader.SCAT_COLUMNS","title":"SCAT_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>SCAT_COLUMNS = ['B', 'G', 'R', 'BB', 'BG', 'BR']\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader.CAL_COLUMNS","title":"CAL_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CAL_COLUMNS = ['sca_550', 'SAE']\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader.MIN_SCAT_VALUE","title":"MIN_SCAT_VALUE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_SCAT_VALUE = 0\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader.MAX_SCAT_VALUE","title":"MAX_SCAT_VALUE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_SCAT_VALUE = 2000\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader.STATUS_COLUMN","title":"STATUS_COLUMN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_COLUMN = 'Status'\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader.STATUS_COLUMNS","title":"STATUS_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_COLUMNS = ['Status', 'status', 'Error', 'error', 'Flag', 'flag']\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader.STATUS_OK","title":"STATUS_OK  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_OK = 0\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader._status_data","title":"_status_data  <code>instance-attribute</code>","text":"<pre><code>_status_data = None\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw Aurora nephelometer data files.</p> <p>Parameters:</p> Name Type Description Default <code>file</code> <code>Path or str</code> <p>Path to the Aurora data file.</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed Aurora data with datetime index and standardized scattering coefficient columns.</p>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on Aurora nephelometer raw data.</p> QC Rules Applied (raw data only) <ol> <li>Status Error      : Non-zero status code indicates instrument error</li> <li>No Data           : All scattering columns are NaN</li> <li>Invalid Scat Value: Scattering coefficient outside 0-2000 Mm^-1</li> <li>Invalid Scat Rel. : Wavelength dependence violation (B &lt; G &lt; R)</li> <li>Insufficient      : Less than 50% hourly data completeness</li> </ol> <p>Note: SAE calculation is done in _process() after QC.</p>"},{"location":"api/instruments/nephelometers/Aurora/#AeroViz.rawDataReader.script.Aurora.Reader._process","title":"_process","text":"<pre><code>_process(_df)\n</code></pre> <p>Calculate scattering coefficients and SAE.</p> Processing Steps <ol> <li>Calculate scattering coefficient at 550nm</li> <li>Calculate SAE (Scattering \u00c5ngstr\u00f6m Exponent)</li> </ol> <p>Parameters:</p> Name Type Description Default <code>_df</code> <code>DataFrame</code> <p>Quality-controlled DataFrame with scattering columns and QC_Flag</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>DataFrame with sca_550, SAE, and updated QC_Flag</p>"},{"location":"api/instruments/nephelometers/Aurora/#data-format","title":"Data Format","text":"<ul> <li>File format: CSV file</li> <li>Sampling frequency: 1 minute</li> <li>File naming pattern: <code>*.csv</code></li> <li>Timestamp column: Date / time local</li> <li>Column naming conventions:<ul> <li>UV BCc, Blue BCc, Green BCc, Red BCc, IR BCc</li> <li>Biomass BCc, Fossil fuel BCc</li> <li>Delta-C, AAE, BB (%)</li> </ul> </li> </ul>"},{"location":"api/instruments/nephelometers/Aurora/#measurement-parameters","title":"Measurement Parameters","text":"<p>The Aurora provides measurements at three wavelengths:</p> Column Wavelength Description B 450 nm Total scattering (blue) G 550 nm Total scattering (green) R 700 nm Total scattering (red) BB 450 nm Backscattering (blue) BG 550 nm Backscattering (green) BR 700 nm Backscattering (red)"},{"location":"api/instruments/nephelometers/Aurora/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/nephelometers/Aurora/#data-reading","title":"Data Reading","text":"<ul> <li>Parses timestamps from 'Date / time local' column</li> <li>Standardizes column names for consistent output</li> <li>Converts all measurement values to numeric format</li> <li>Handles different column naming conventions</li> <li>Maps wavelength-specific measurements to standardized names</li> </ul>"},{"location":"api/instruments/nephelometers/Aurora/#quality-control","title":"Quality Control","text":"<p>The Aurora reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                         QC Thresholds                                 |\n+-----------------------------------------------------------------------+\n| MIN_SCAT_VALUE = 0       Mm\u207b\u00b9                                         |\n| MAX_SCAT_VALUE = 2000    Mm\u207b\u00b9                                         |\n| STATUS_OK      = 0       (numeric status code)                        |\n+-----------------------------------------------------------------------+\n\n+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  [Pre-process] Calculate scattering Angstrom exponent (SAE)           |\n|       |                                                               |\n|       v                                                               |\n|  +---------------------------+                                        |\n|  | Rule: Status Error        |                                        |\n|  +---------------------------+                                        |\n|  | Status code != 0          |                                        |\n|  | (if column available)     |                                        |\n|  +---------------------------+                                        |\n|           |                                                           |\n|           v                                                           |\n|  +---------------------------+    +---------------------------+       |\n|  | Rule: No Data             |    | Rule: Invalid Scat Value  |       |\n|  +---------------------------+    +---------------------------+       |\n|  | All columns are NaN       |    | Value &lt;= 0 OR             |       |\n|  +---------------------------+    | Value &gt; 2000 Mm\u207b\u00b9         |       |\n|           |                       +---------------------------+       |\n|           v                                |                          |\n|  +---------------------------+             v                          |\n|  | Rule: Invalid Scat Rel    |    +---------------------------+       |\n|  +---------------------------+    | Rule: Insufficient        |       |\n|  | Blue &lt; Green &lt; Red        |    +---------------------------+       |\n|  | (violates physics)        |    | &lt; 50% hourly data         |       |\n|  +---------------------------+    +---------------------------+       |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/nephelometers/Aurora/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Status Error Status \u2260 0 Non-zero status code indicates instrument error (if column available) No Data All columns NaN All scattering columns are missing Invalid Scat Value Value \u2264 0 OR &gt; 2000 Mm\u207b\u00b9 Scattering outside valid range Invalid Scat Rel B &lt; G &lt; R Wavelength dependence violation Insufficient &lt; 50% hourly data Less than 50% hourly data completeness"},{"location":"api/instruments/nephelometers/Aurora/#output-data","title":"Output Data","text":"<p>The processed data contains the following columns:</p> Column Unit Description B, G, R Mm\u207b\u00b9 Total scattering coefficients BB, BG, BR Mm\u207b\u00b9 Backscattering coefficients sca_550 Mm\u207b\u00b9 Scattering at 550nm SAE - Scattering Angstrom Exponent <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_aurora_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/nephelometers/Aurora/#notes","title":"Notes","text":"<ul> <li>Provides real-time measurement of aerosol scattering</li> <li>Same QC rules as NEPH nephelometer</li> <li>Wavelength dependence follows Rayleigh scattering principle</li> </ul>"},{"location":"api/instruments/nephelometers/NEPH/","title":"Nephelometer (NEPH)","text":"<p>The Nephelometer is an instrument used for measuring light scattering properties of aerosols at multiple wavelengths.</p>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader","title":"AeroViz.rawDataReader.script.NEPH.Reader","text":"<pre><code>Reader(*args, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>Nephelometer (NEPH) Data Reader</p> <p>A specialized reader for integrating nephelometer data files, which measure light scattering properties of aerosols at multiple wavelengths.</p> <p>See full documentation at docs/source/instruments/NEPH.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'NEPH'\n</code></pre>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader.SCAT_COLUMNS","title":"SCAT_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>SCAT_COLUMNS = ['B', 'G', 'R', 'BB', 'BG', 'BR']\n</code></pre>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader.CAL_COLUMNS","title":"CAL_COLUMNS  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>CAL_COLUMNS = ['sca_550', 'SAE']\n</code></pre>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader.MIN_SCAT_VALUE","title":"MIN_SCAT_VALUE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_SCAT_VALUE = 0\n</code></pre>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader.MAX_SCAT_VALUE","title":"MAX_SCAT_VALUE  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_SCAT_VALUE = 2000\n</code></pre>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader.STATUS_COLUMN","title":"STATUS_COLUMN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_COLUMN = 'status'\n</code></pre>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader.STATUS_OK","title":"STATUS_OK  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_OK = 0\n</code></pre>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader._status_data","title":"_status_data  <code>instance-attribute</code>","text":"<pre><code>_status_data = None\n</code></pre>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw Nephelometer data files.</p> <p>Parameters:</p> Name Type Description Default <code>file</code> <code>Path or str</code> <p>Path to the Nephelometer data file.</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed Nephelometer data with datetime index and scattering coefficient columns.</p>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on Nephelometer raw data.</p> QC Rules Applied (raw data only) <ol> <li>Status Error      : Non-zero status code indicates instrument error</li> <li>No Data           : All scattering columns are NaN</li> <li>Invalid Scat Value: Scattering coefficient outside 0-2000 Mm^-1</li> <li>Invalid Scat Rel. : Wavelength dependence violation (B &lt; G &lt; R)</li> <li>Insufficient      : Less than 50% hourly data completeness</li> </ol> <p>Note: SAE calculation is done in _process() after QC.</p>"},{"location":"api/instruments/nephelometers/NEPH/#AeroViz.rawDataReader.script.NEPH.Reader._process","title":"_process","text":"<pre><code>_process(_df)\n</code></pre> <p>Calculate scattering coefficients and SAE.</p> Processing Steps <ol> <li>Calculate scattering coefficient at 550nm</li> <li>Calculate SAE (Scattering \u00c5ngstr\u00f6m Exponent)</li> </ol> <p>Parameters:</p> Name Type Description Default <code>_df</code> <code>DataFrame</code> <p>Quality-controlled DataFrame with scattering columns and QC_Flag</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>DataFrame with sca_550, SAE, and updated QC_Flag</p>"},{"location":"api/instruments/nephelometers/NEPH/#data-format","title":"Data Format","text":"Time Record Format T YYYY MM DD HH NN SS Example T 2022 05 08 13 29 22 Data Record Format D mode time B G R BB GB RB Example D NBXX 2258 7.527e-5 6.984e-5 4.275e-5 6.821e-6 1.070e-5 5.130e-6 Auxiliary Record Format Y x pressure Sample Temp Inlet Temp RH lamp voltage lamp current BNC voltage Status Example Y 348 973 302.8 300 91.2 12.5 5.7 2 0000 <ul> <li>File format: Raw data file (.dat)</li> <li>Sampling frequency: 5 minutes</li> <li>File naming pattern: <code>*.dat</code></li> <li>Record types:<ul> <li>T records: Timestamp information</li> <li>D records: Scattering measurements</li> <li>Y records: Status and RH information</li> </ul> </li> </ul>"},{"location":"api/instruments/nephelometers/NEPH/#measurement-parameters","title":"Measurement Parameters","text":"<p>The Nephelometer provides measurements at three wavelengths:</p> Column Wavelength Description B 450 nm Total scattering (blue) G 550 nm Total scattering (green) R 700 nm Total scattering (red) BB 450 nm Backscattering (blue) BG 550 nm Backscattering (green) BR 700 nm Backscattering (red)"},{"location":"api/instruments/nephelometers/NEPH/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/nephelometers/NEPH/#data-reading","title":"Data Reading","text":"<ul> <li>Processes different record types (T, D, Y)</li> <li>Extracts timestamp from T records</li> <li>Extracts scattering measurements from D records</li> <li>Extracts status and RH from Y records</li> <li>Converts raw scattering values to Mm\u207b\u00b9</li> <li>Handles both normal (NBXX) and total (NTXX) scattering modes</li> </ul>"},{"location":"api/instruments/nephelometers/NEPH/#quality-control","title":"Quality Control","text":"<p>The NEPH reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                         QC Thresholds                                 |\n+-----------------------------------------------------------------------+\n| MIN_SCAT_VALUE = 0       Mm\u207b\u00b9                                         |\n| MAX_SCAT_VALUE = 2000    Mm\u207b\u00b9                                         |\n| STATUS_OK      = 0       (numeric status code)                        |\n+-----------------------------------------------------------------------+\n\n+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  [Pre-process] Calculate scattering Angstrom exponent (SAE)           |\n|       |                                                               |\n|       v                                                               |\n|  +---------------------------+                                        |\n|  | Rule: Status Error        |                                        |\n|  +---------------------------+                                        |\n|  | Status code != 0          |                                        |\n|  | (from Y record col 9)     |                                        |\n|  +---------------------------+                                        |\n|           |                                                           |\n|           v                                                           |\n|  +---------------------------+    +---------------------------+       |\n|  | Rule: No Data             |    | Rule: Invalid Scat Value  |       |\n|  +---------------------------+    +---------------------------+       |\n|  | All columns are NaN       |    | Value &lt;= 0 OR             |       |\n|  +---------------------------+    | Value &gt; 2000 Mm\u207b\u00b9         |       |\n|           |                       +---------------------------+       |\n|           v                                |                          |\n|  +---------------------------+             v                          |\n|  | Rule: Invalid Scat Rel    |    +---------------------------+       |\n|  +---------------------------+    | Rule: Insufficient        |       |\n|  | Blue &lt; Green &lt; Red        |    +---------------------------+       |\n|  | (violates physics)        |    | &lt; 50% hourly data         |       |\n|  +---------------------------+    +---------------------------+       |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/nephelometers/NEPH/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Status Error Status \u2260 0 Non-zero status code indicates instrument error No Data All columns NaN All scattering columns are missing Invalid Scat Value Value \u2264 0 OR &gt; 2000 Mm\u207b\u00b9 Scattering outside valid range Invalid Scat Rel B &lt; G &lt; R Wavelength dependence violation Insufficient &lt; 50% hourly data Less than 50% hourly data completeness"},{"location":"api/instruments/nephelometers/NEPH/#wavelength-dependence-check","title":"Wavelength Dependence Check","text":"<pre><code>    Scattering (Mm\u207b\u00b9)\n       ^\n       |     Expected: Blue &gt; Green &gt; Red\n       |\n       |  B *\n       |      \\\n       |       G *\n       |           \\\n       |            R *\n       +----+----+----+-----&gt; Wavelength\n           450  550  700\n</code></pre>"},{"location":"api/instruments/nephelometers/NEPH/#output-data","title":"Output Data","text":"<p>The processed data contains the following columns:</p> Column Unit Description B, G, R Mm\u207b\u00b9 Total scattering coefficients BB, BG, BR Mm\u207b\u00b9 Backscattering coefficients sca_550 Mm\u207b\u00b9 Scattering at 550nm SAE - Scattering Angstrom Exponent <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_neph_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/nephelometers/NEPH/#notes","title":"Notes","text":"<ul> <li>Provides information about aerosol optical properties and size distribution</li> <li>Supports both normal and total scattering modes</li> <li>Wavelength dependence follows Rayleigh scattering principle</li> </ul>"},{"location":"api/instruments/particle-sizers/APS/","title":"Aerodynamic Particle Sizer (APS)","text":"<p>The APS is an instrument used for measuring aerodynamic particle size distributions in the micrometer range.</p>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader","title":"AeroViz.rawDataReader.script.APS.Reader","text":"<pre><code>Reader(*args, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>APS (Aerodynamic Particle Sizer) Data Reader</p> <p>A specialized reader for APS data files, which measure particle size distributions in the range of 542-1981 nm (aerodynamic diameter).</p> <p>See full documentation at docs/source/instruments/APS.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'APS'\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader.MIN_HOURLY_COUNT","title":"MIN_HOURLY_COUNT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_HOURLY_COUNT = 5\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader.MIN_TOTAL_CONC","title":"MIN_TOTAL_CONC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_TOTAL_CONC = 1\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader.MAX_TOTAL_CONC","title":"MAX_TOTAL_CONC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_TOTAL_CONC = 700\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader.STATUS_COLUMN","title":"STATUS_COLUMN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_COLUMN = 'Status Flags'\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader.STATUS_OK","title":"STATUS_OK  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_OK = '0000 0000 0000 0000'\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader.ERROR_STATES","title":"ERROR_STATES  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>ERROR_STATES = {0: 'Laser fault', 1: 'Total Flow out of range', 2: 'Sheath Flow out of range', 3: 'Excessive sample concentration', 4: 'Accumulator clipped', 5: 'Autocal failed', 6: 'Internal temperature &lt; 10\u00b0C', 7: 'Internal temperature &gt; 40\u00b0C', 8: 'Detector voltage out of range'}\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader._status_data","title":"_status_data  <code>instance-attribute</code>","text":"<pre><code>_status_data = None\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader._distributions","title":"_distributions  <code>instance-attribute</code>","text":"<pre><code>_distributions = None\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader.__call__","title":"__call__","text":"<pre><code>__call__(start, end, mean_freq='1h')\n</code></pre> <p>Process APS data and save size distributions to separate files.</p> <p>Overrides AbstractReader.call to add distribution file saving and filter out size bins from main output.</p> <p>Parameters:</p> Name Type Description Default <code>start</code> <code>datetime</code> <p>Start time for data processing</p> required <code>end</code> <code>datetime</code> <p>End time for data processing</p> required <code>mean_freq</code> <code>str</code> <p>Frequency for resampling the data</p> <code>'1h'</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed and resampled data (statistics only, no size bins)</p>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader._parse_status_flags","title":"_parse_status_flags  <code>staticmethod</code>","text":"<pre><code>_parse_status_flags(status_str)\n</code></pre> <p>Parse APS binary status flags string to integer.</p> <p>Parameters:</p> Name Type Description Default <code>status_str</code> <code>str</code> <p>Status flags in binary format, e.g., \"0000 0000 0000 0000\"</p> required <p>Returns:</p> Type Description <code>int</code> <p>Integer value of the status flags (0 if normal)</p>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw APS data files.</p>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on APS data.</p> QC Rules Applied <ol> <li>Status Error   : Non-zero status flags indicate instrument error</li> <li>Insufficient   : Less than 5 measurements per hour</li> <li>Invalid Number Conc : Total number concentration outside valid range (1-700 #/cm\u00b3)</li> </ol>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader._process","title":"_process","text":"<pre><code>_process(_df)\n</code></pre> <p>Calculate size distribution statistics from QC'd APS data.</p> Processing Steps <ol> <li>Calculate dlogDp from bin diameters</li> <li>Calculate number, surface, volume distributions (all in dX/dlogDp)</li> <li>Calculate total, GMD, GSD, mode for each weighting</li> <li>Calculate totals for size cutoffs: 1\u03bcm, 2.5\u03bcm, all</li> <li>Store distributions for separate file output</li> </ol> Size Cutoffs (APS range: 0.542-19.81 \u03bcm) <ul> <li>1\u03bcm: particles smaller than 1 \u03bcm</li> <li>2.5\u03bcm: particles smaller than 2.5 \u03bcm</li> <li>all: full size range</li> </ul> <p>Parameters:</p> Name Type Description Default <code>_df</code> <code>DataFrame</code> <p>Quality-controlled DataFrame with size bin columns and QC_Flag</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Original size bins (dN/dlogDp) + calculated statistics + QC_Flag</p>"},{"location":"api/instruments/particle-sizers/APS/#AeroViz.rawDataReader.script.APS.Reader._save_distributions","title":"_save_distributions","text":"<pre><code>_save_distributions(mean_freq: str = '1h') -&gt; None\n</code></pre> <p>Save size distributions to separate CSV files.</p> Output Files <ul> <li>output_aps_dNdlogDp.csv : Number distribution (dN/dlogDp)</li> <li>output_aps_dSdlogDp.csv : Surface distribution (dS/dlogDp)</li> <li>output_aps_dVdlogDp.csv : Volume distribution (dV/dlogDp)</li> </ul> <p>Parameters:</p> Name Type Description Default <code>mean_freq</code> <code>str</code> <p>Frequency for resampling the data</p> <code>'1h'</code>"},{"location":"api/instruments/particle-sizers/APS/#data-format","title":"Data Format","text":"<ul> <li>File format: Tab-delimited text file</li> <li>Sampling frequency: 6 minutes (typical)</li> <li>File naming pattern: <code>*.txt</code></li> <li>Data structure:<ul> <li>Header: 6 rows of metadata</li> <li>Time columns: Date and Start Time</li> <li>Size distribution data: Columns 3-54</li> </ul> </li> </ul>"},{"location":"api/instruments/particle-sizers/APS/#measurement-parameters","title":"Measurement Parameters","text":"<p>The APS provides aerodynamic particle size distribution measurements:</p> Parameter Value Description Size range 542-1981 nm Aerodynamic diameter range Output dN/dlogDp Number concentration per size bin Unit #/cm\u00b3 Particle number concentration"},{"location":"api/instruments/particle-sizers/APS/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/particle-sizers/APS/#data-reading","title":"Data Reading","text":"<ul> <li>Automatically skips 6 rows of header metadata</li> <li>Parses date and time into datetime index</li> <li>Extracts particle size distribution data (columns 3-54)</li> <li>Rounds size bin values to 4 decimal places</li> <li>Handles transposed data formats</li> <li>Validates datetime values</li> </ul>"},{"location":"api/instruments/particle-sizers/APS/#quality-control","title":"Quality Control","text":"<p>The APS reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                         QC Thresholds                                 |\n+-----------------------------------------------------------------------+\n| MIN_HOURLY_COUNT = 5      measurements per hour                       |\n| MIN_TOTAL_CONC   = 1      #/cm\u00b3                                       |\n| MAX_TOTAL_CONC   = 700    #/cm\u00b3                                       |\n| STATUS_OK        = \"0000 0000 0000 0000\" (16-bit binary, all zeros)   |\n+-----------------------------------------------------------------------+\n\n+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  [Pre-process] Calculate dlogDp and total concentration               |\n|       |                                                               |\n|       v                                                               |\n|  +-------------------------+                                          |\n|  | Rule: Status Error      |                                          |\n|  +-------------------------+                                          |\n|  | Status Flags != all     |                                          |\n|  | zeros (16-bit binary)   |                                          |\n|  +-------------------------+                                          |\n|           |                                                           |\n|           v                                                           |\n|  +-------------------------+                                          |\n|  | Rule: Insufficient      |                                          |\n|  +-------------------------+                                          |\n|  | &lt; 5 measurements        |                                          |\n|  | per hour                |                                          |\n|  +-------------------------+                                          |\n|           |                                                           |\n|           v                                                           |\n|  +-------------------------+                                          |\n|  | Rule: Invalid Number    |                                          |\n|  |       Conc              |                                          |\n|  +-------------------------+                                          |\n|  | Total number conc.      |                                          |\n|  | outside range (1-700)   |                                          |\n|  +-------------------------+                                          |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Status Error Status Flags \u2260 0 Non-zero status flags indicate instrument error Insufficient &lt; 5 measurements/hour Less than 5 measurements per hour Invalid Number Conc Total &lt; 1 OR &gt; 700 #/cm\u00b3 Total number concentration outside valid range"},{"location":"api/instruments/particle-sizers/APS/#error-status-codes-from-tsi-rf-command","title":"Error Status Codes (from TSI RF command)","text":"Bit Binary Value Description 0 0000 0000 0000 0001 Laser fault 1 0000 0000 0000 0010 Total Flow out of range 2 0000 0000 0000 0100 Sheath Flow out of range 3 0000 0000 0000 1000 Excessive sample concentration 4 0000 0000 0001 0000 Accumulator clipped (&gt; 65535) 5 0000 0000 0010 0000 Autocal failed 6 0000 0000 0100 0000 Internal temperature &lt; 10\u00b0C 7 0000 0000 1000 0000 Internal temperature &gt; 40\u00b0C 8 0000 0001 0000 0000 Detector voltage out of range (\u00b110% Vb) 9 0000 0010 0000 0000 Reserved (unused)"},{"location":"api/instruments/particle-sizers/APS/#valid-concentration-range","title":"Valid Concentration Range","text":"<pre><code>    Total Conc (#/cm\u00b3)\n       ^\n   700 +-------------------------------- MAX_TOTAL_CONC\n       |   +-----------------------+    (reject if exceeded)\n       |   |    VALID RANGE        |\n       |   +-----------------------+\n     1 +-------------------------------- MIN_TOTAL_CONC\n     0 +-------------------------------- (reject if below)\n       +----------------------------&gt; Time\n</code></pre>"},{"location":"api/instruments/particle-sizers/APS/#output-data","title":"Output Data","text":"<p>The processed data contains:</p> Column Unit Description Size bins (542-1981 nm) dN/dlogDp Number concentration for each size <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_aps_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/particle-sizers/APS/#notes","title":"Notes","text":"<ul> <li>Measures aerodynamic particle diameter directly</li> <li>Complementary to SMPS for larger particle sizes</li> <li>Size range approximately 0.5-2 \u03bcm</li> <li>Logarithmic bin spacing in size distribution</li> </ul>"},{"location":"api/instruments/particle-sizers/GRIMM/","title":"GRIMM Aerosol Spectrometer","text":"<p>The GRIMM is an optical particle counter that measures particle size distributions across multiple size channels.</p>"},{"location":"api/instruments/particle-sizers/GRIMM/#data-format","title":"Data Format","text":"<ul> <li>File format: Tab-delimited text file</li> <li>Sampling frequency: Variable</li> <li>File naming pattern:<ul> <li><code>A407ST*.txt</code> (specific format)</li> <li>Other GRIMM formats</li> </ul> </li> <li>Data structure:<ul> <li>Header: 233 rows of metadata</li> <li>European date format (DD/MM/YYYY)</li> <li>Size distribution channels (columns 11-127/128)</li> </ul> </li> </ul>"},{"location":"api/instruments/particle-sizers/GRIMM/#measurement-parameters","title":"Measurement Parameters","text":"<p>The GRIMM provides:</p> <ul> <li>Size range: 0.25 to 32 \u03bcm</li> <li>Resolution: Multiple size channels</li> <li>Output: Number concentration for each size bin</li> <li>Units: particles/cm\u00b3 (after scaling)</li> </ul>"},{"location":"api/instruments/particle-sizers/GRIMM/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/particle-sizers/GRIMM/#data-reading","title":"Data Reading","text":"<ul> <li>Processes tab-delimited files</li> <li>Handles European date format</li> <li>Extracts size distribution channels</li> <li>Applies scaling factor (1/0.035)</li> <li>Uses ISO-8859-1 encoding</li> <li>Handles different file formats</li> </ul>"},{"location":"api/instruments/particle-sizers/GRIMM/#quality-control","title":"Quality Control","text":"<ul> <li>Basic file validation</li> <li>Empty file detection</li> <li>No additional QC currently implemented</li> <li>Future QC possibilities:<ul> <li>Value range checks</li> <li>Total concentration consistency</li> <li>Time-based outlier detection</li> </ul> </li> </ul>"},{"location":"api/instruments/particle-sizers/GRIMM/#output-data","title":"Output Data","text":"<p>The processed data contains:</p> <ul> <li>Time index: Data acquisition time</li> <li>Size channels: Number concentration for each bin</li> <li>All measurements in particles/cm\u00b3</li> </ul>"},{"location":"api/instruments/particle-sizers/GRIMM/#notes","title":"Notes","text":"<ul> <li>High resolution size information</li> <li>Wide size range coverage</li> <li>Multiple size channels</li> <li>Standard scaling factor applied</li> <li>European date format support </li> </ul>"},{"location":"api/instruments/particle-sizers/SMPS/","title":"Scanning Mobility Particle Sizer (SMPS)","text":"<p>The SMPS is an instrument used for measuring particle size distributions in the nanometer range.</p>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader","title":"AeroViz.rawDataReader.script.SMPS.Reader","text":"<pre><code>Reader(*args, **kwargs)\n</code></pre> <p>               Bases: <code>AbstractReader</code></p> <p>SMPS (Scanning Mobility Particle Sizer) Data Reader</p> <p>A specialized reader for SMPS data files, which measure particle size distributions in the range of 11.8-593.5 nm.</p> <p>See full documentation at docs/source/instruments/SMPS.md for detailed information on supported formats and QC procedures.</p>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader-attributes","title":"Attributes","text":""},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader.nam","title":"nam  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>nam = 'SMPS'\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader.MIN_HOURLY_COUNT","title":"MIN_HOURLY_COUNT  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_HOURLY_COUNT = 5\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader.MIN_TOTAL_CONC","title":"MIN_TOTAL_CONC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MIN_TOTAL_CONC = 2000\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader.MAX_TOTAL_CONC","title":"MAX_TOTAL_CONC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_TOTAL_CONC = 10000000.0\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader.MAX_LARGE_BIN_CONC","title":"MAX_LARGE_BIN_CONC  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>MAX_LARGE_BIN_CONC = 4000\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader.LARGE_BIN_THRESHOLD","title":"LARGE_BIN_THRESHOLD  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>LARGE_BIN_THRESHOLD = 400\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader.STATUS_COLUMN","title":"STATUS_COLUMN  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_COLUMN = 'Status Flag'\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader.STATUS_OK","title":"STATUS_OK  <code>class-attribute</code> <code>instance-attribute</code>","text":"<pre><code>STATUS_OK = 'Normal Scan'\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader._status_data","title":"_status_data  <code>instance-attribute</code>","text":"<pre><code>_status_data = None\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader._distributions","title":"_distributions  <code>instance-attribute</code>","text":"<pre><code>_distributions = None\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader-functions","title":"Functions","text":""},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader.__call__","title":"__call__","text":"<pre><code>__call__(start, end, mean_freq='1h')\n</code></pre> <p>Process SMPS data and save size distributions to separate files.</p> <p>Overrides AbstractReader.call to add distribution file saving and filter out size bins from main output.</p> <p>Parameters:</p> Name Type Description Default <code>start</code> <code>datetime</code> <p>Start time for data processing</p> required <code>end</code> <code>datetime</code> <p>End time for data processing</p> required <code>mean_freq</code> <code>str</code> <p>Frequency for resampling the data</p> <code>'1h'</code> <p>Returns:</p> Type Description <code>DataFrame</code> <p>Processed and resampled data (statistics only, no size bins)</p>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader._raw_reader","title":"_raw_reader","text":"<pre><code>_raw_reader(file)\n</code></pre> <p>Read and parse raw SMPS data files.</p>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader._QC","title":"_QC","text":"<pre><code>_QC(_df)\n</code></pre> <p>Perform quality control on SMPS particle size distribution data.</p> QC Rules Applied <ol> <li>Status Error        : Non-empty status flag indicates instrument error</li> <li>Insufficient        : Less than 5 measurements per hour</li> <li>Invalid Number Conc : Total number concentration outside valid range (2000-1e7 #/cm\u00b3)</li> <li>DMA Water Ingress   : Bins &gt;400nm with concentration &gt; 4000 dN/dlogDp (indicates water in DMA)</li> </ol>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader._process","title":"_process","text":"<pre><code>_process(_df)\n</code></pre> <p>Calculate size distribution statistics from QC'd SMPS data.</p> Processing Steps <ol> <li>Calculate dlogDp from bin diameters</li> <li>Calculate number, surface, volume distributions (all in dX/dlogDp)</li> <li>Calculate total, GMD, GSD, mode for each weighting</li> <li>Calculate mode contributions (ultra, accum, coarse fractions)</li> <li>Store distributions for separate file output</li> </ol> <p>Parameters:</p> Name Type Description Default <code>_df</code> <code>DataFrame</code> <p>Quality-controlled DataFrame with size bin columns and QC_Flag</p> required <p>Returns:</p> Type Description <code>DataFrame</code> <p>Original size bins (dN/dlogDp) + calculated statistics + QC_Flag</p>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader._save_distributions","title":"_save_distributions","text":"<pre><code>_save_distributions(mean_freq: str = '1h') -&gt; None\n</code></pre> <p>Save size distributions to separate CSV files.</p> Output Files <ul> <li>output_smps_dNdlogDp.csv : Number distribution (dN/dlogDp)</li> <li>output_smps_dSdlogDp.csv : Surface distribution (dS/dlogDp)</li> <li>output_smps_dVdlogDp.csv : Volume distribution (dV/dlogDp)</li> </ul> <p>Parameters:</p> Name Type Description Default <code>mean_freq</code> <code>str</code> <p>Frequency for resampling the data</p> <code>'1h'</code>"},{"location":"api/instruments/particle-sizers/SMPS/#AeroViz.rawDataReader.script.SMPS.Reader._geometric_prop","title":"_geometric_prop  <code>staticmethod</code>","text":"<pre><code>_geometric_prop(dp, dist)\n</code></pre> <p>Calculate geometric mean diameter and geometric standard deviation.</p> <p>Parameters:</p> Name Type Description Default <code>dp</code> <code>ndarray</code> <p>Particle diameters (nm)</p> required <code>dist</code> <code>DataFrame</code> <p>Distribution data (dN, dS, or dV)</p> required <p>Returns:</p> Type Description <code>tuple</code> <p>(total, GMD, GSD) as pandas Series</p>"},{"location":"api/instruments/particle-sizers/SMPS/#data-format","title":"Data Format","text":"<ul> <li>File format:<ul> <li>.txt files (tab-delimited) from older AIM versions (8.x, 9.x)</li> <li>.csv files (comma-delimited) from newer AIM versions (10.x+)</li> </ul> </li> <li>Sampling frequency: 6 minutes (typical)</li> <li>File naming pattern: <code>*.txt</code> or <code>*.csv</code></li> <li>Timestamp formats:<ul> <li>mm/dd/yy HH:MM:SS (US format, older versions)</li> <li>mm/dd/yyyy HH:MM:SS (US format, newer versions)</li> <li>dd/mm/yyyy HH:MM:SS (EU format)</li> </ul> </li> </ul>"},{"location":"api/instruments/particle-sizers/SMPS/#measurement-parameters","title":"Measurement Parameters","text":"<p>The SMPS provides particle size distribution measurements:</p> Parameter Value Description Size range 11.8-593.5 nm Default particle diameter range Output dN/dlogDp Number concentration per size bin Unit #/cm\u00b3 Particle number concentration"},{"location":"api/instruments/particle-sizers/SMPS/#data-processing","title":"Data Processing","text":""},{"location":"api/instruments/particle-sizers/SMPS/#data-reading","title":"Data Reading","text":"<ul> <li>Automatically detects and skips header rows</li> <li>Supports multiple date formats based on AIM version</li> <li>Handles transposed data formats</li> <li>Extracts and sorts particle size columns numerically</li> <li>Validates size range against expected settings</li> </ul>"},{"location":"api/instruments/particle-sizers/SMPS/#quality-control","title":"Quality Control","text":"<p>The SMPS reader uses the declarative QCFlagBuilder system with the following rules:</p> <pre><code>+-----------------------------------------------------------------------+\n|                         QC Thresholds                                 |\n+-----------------------------------------------------------------------+\n| MIN_HOURLY_COUNT  = 5        measurements per hour                    |\n| MIN_TOTAL_CONC    = 2000     #/cm\u00b3                                    |\n| MAX_TOTAL_CONC    = 1e7      #/cm\u00b3                                    |\n| MAX_LARGE_BIN_CONC= 4000     dN/dlogDp (DMA water ingress indicator)  |\n| LARGE_BIN_THRESH  = 400      nm                                       |\n| STATUS_OK         = \"Normal Scan\"                                     |\n+-----------------------------------------------------------------------+\n\n+-----------------------------------------------------------------------+\n|                            _QC() Pipeline                             |\n+-----------------------------------------------------------------------+\n|                                                                       |\n|  [Pre-process] Apply size range filter, calculate total concentration |\n|       |                                                               |\n|       v                                                               |\n|  +-------------------------+                                          |\n|  | Rule: Status Error      |                                          |\n|  +-------------------------+                                          |\n|  | Status Flag !=          |                                          |\n|  | \"Normal Scan\"           |                                          |\n|  +-------------------------+                                          |\n|           |                                                           |\n|           v                                                           |\n|  +-------------------------+    +-------------------------+           |\n|  | Rule: Insufficient      |    | Rule: Invalid Number    |           |\n|  +-------------------------+    |       Conc              |           |\n|  | &lt; 5 measurements        |    +-------------------------+           |\n|  | per hour                |    | Total conc. outside     |           |\n|  +-------------------------+    | range (2000-1e7 #/cm\u00b3)  |           |\n|                                 +-------------------------+           |\n|           |                              |                            |\n|           v                              v                            |\n|           |                     +-------------------------+           |\n|           |                     | Rule: DMA Water Ingress |           |\n|           |                     +-------------------------+           |\n|           |                     | Bins &gt; 400nm with       |           |\n|           |                     | conc. &gt; 4000 dN/dlogDp  |           |\n|           |                     | (indicates water in DMA)|           |\n|           |                     +-------------------------+           |\n|                                                                       |\n+-----------------------------------------------------------------------+\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#qc-rules-applied","title":"QC Rules Applied","text":"Rule Condition Description Status Error Status Flag \u2260 \"Normal Scan\" Instrument reported error (e.g., \"Conditioner Temperature Error\") Insufficient &lt; 5 measurements/hour Less than 5 measurements per hour Invalid Number Conc Total &lt; 2000 OR &gt; 1e7 #/cm\u00b3 Total number concentration outside valid range DMA Water Ingress Bins &gt;400nm &gt; 4000 dN/dlogDp Water contamination in DMA column"},{"location":"api/instruments/particle-sizers/SMPS/#size-distribution-qc-visualization","title":"Size Distribution QC Visualization","text":"<pre><code>    dN/dlogDp\n       ^\n       |\n  4000 +                              ........... MAX_LARGE_BIN_CONC\n       |      ___                     :          (DMA water ingress)\n       |     /   \\                    :\n       |    /     \\____               :\n       +---+------+-------+-------+---+---&gt; Dp (nm)\n          11.8   100     400    593.5\n                          ^\n                    LARGE_BIN_THRESHOLD\n</code></pre>"},{"location":"api/instruments/particle-sizers/SMPS/#output-data","title":"Output Data","text":"<p>The processed data contains:</p> Column Unit Description Size bins dN/dlogDp Number concentration for each particle size <p>QC_Flag Handling</p> <ul> <li>The intermediate file (<code>_read_smps_qc.pkl/csv</code>) contains the <code>QC_Flag</code> column</li> <li>The final output has invalid data set to NaN and <code>QC_Flag</code> column removed</li> </ul>"},{"location":"api/instruments/particle-sizers/SMPS/#notes","title":"Notes","text":"<ul> <li>Different AIM software versions may produce different file formats</li> <li>Size range validation ensures data quality</li> <li>DMA water ingress detection: High concentrations in bins &gt;400nm indicate water contamination in the DMA column</li> <li>Automatic format detection and parsing</li> </ul>"},{"location":"api/plot/","title":"Plot Documentation","text":""},{"location":"api/plot/#overview","title":"Overview","text":"<p>The plot module provides visualization tools for creating publication-quality plots of aerosol data. It includes various plot types commonly used in aerosol science.</p>"},{"location":"api/plot/#basic-usage","title":"Basic Usage","text":"<pre><code>from AeroViz import plot\n\n# Create a time series plot\nplot.time_series(data, 'BC')\n\n# Create a scatter plot\nplot.scatter(data, 'BC', 'PM2.5')\n</code></pre>"},{"location":"api/plot/#available-plot-types","title":"Available Plot Types","text":""},{"location":"api/plot/#time_series","title":"time_series()","text":"<p>Create a time series plot of specified variables.</p> <pre><code>plot.time_series(\n    data,\n    variables=['BC', 'PM2.5'],\n    start='2024-01-01',\n    end='2024-12-31',\n    title='Time Series of BC and PM2.5'\n)\n</code></pre>"},{"location":"api/plot/#scatter","title":"scatter()","text":"<p>Create a scatter plot of two variables.</p> <pre><code>plot.scatter(\n    data,\n    x='BC',\n    y='PM2.5',\n    color='PM2.5',\n    size='BC'\n)\n</code></pre>"},{"location":"api/plot/#box","title":"box()","text":"<p>Create a box plot of specified variables.</p> <pre><code>plot.box(\n    data,\n    variables=['BC', 'PM2.5'],\n    by='month'\n)\n</code></pre>"},{"location":"api/plot/#histogram","title":"histogram()","text":"<p>Create a histogram of specified variables.</p> <pre><code>plot.histogram(\n    data,\n    variables=['BC'],\n    bins=50\n)\n</code></pre>"},{"location":"api/plot/#parameters","title":"Parameters","text":""},{"location":"api/plot/#common-parameters","title":"Common Parameters","text":"<ul> <li><code>data</code> (DataFrame): Input data</li> <li><code>variables</code> (list): Variables to plot</li> <li><code>title</code> (str): Plot title</li> <li><code>figsize</code> (tuple): Figure size</li> <li><code>style</code> (str): Plot style</li> </ul>"},{"location":"api/plot/#time-series-parameters","title":"Time Series Parameters","text":"<ul> <li><code>start</code> (str): Start date</li> <li><code>end</code> (str): End date</li> <li><code>freq</code> (str): Time frequency</li> </ul>"},{"location":"api/plot/#scatter-parameters","title":"Scatter Parameters","text":"<ul> <li><code>x</code> (str): X-axis variable</li> <li><code>y</code> (str): Y-axis variable</li> <li><code>color</code> (str): Color variable</li> <li><code>size</code> (str): Size variable</li> </ul>"},{"location":"api/plot/#examples","title":"Examples","text":""},{"location":"api/plot/#time-series-with-multiple-variables","title":"Time Series with Multiple Variables","text":"<pre><code>plot.time_series(\n    data,\n    variables=['BC', 'PM2.5', 'PM10'],\n    start='2024-01-01',\n    end='2024-12-31',\n    title='Aerosol Components Time Series'\n)\n</code></pre>"},{"location":"api/plot/#scatter-plot-with-color-and-size","title":"Scatter Plot with Color and Size","text":"<pre><code>plot.scatter(\n    data,\n    x='BC',\n    y='PM2.5',\n    color='PM10',\n    size='PM1',\n    title='BC vs PM2.5'\n)\n</code></pre>"},{"location":"api/plot/#box-plot-by-month","title":"Box Plot by Month","text":"<pre><code>plot.box(\n    data,\n    variables=['BC'],\n    by='month',\n    title='Monthly BC Distribution'\n)\n</code></pre>"},{"location":"api/plot/#notes","title":"Notes","text":"<ul> <li>All plots are customizable with various parameters</li> <li>Plots can be saved in multiple formats (PNG, PDF, etc.)</li> <li>The plot module uses matplotlib and seaborn under the hood</li> <li>Publication-quality settings are applied by default</li> </ul>"},{"location":"api/plot/#windrose-and-conditional-bivariate-probability-function-cbpf","title":"WindRose and Conditional Bivariate Probability Function (CBPF)","text":"<pre><code>from AeroViz import plot, DataBase\n\ndf = DataBase()  # build default data, uers can use their own data\n\n# wind rose\nplot.meteorology.wind_rose(df, 'WS', 'WD', typ='bar')\nplot.meteorology.wind_rose(df, 'WS', 'WD', 'PM2.5', typ='scatter')\n\nplot.meteorology.CBPF(df, 'WS', 'WD', 'PM2.5')\nplot.meteorology.CBPF(df, 'WS', 'WD', 'PM2.5', percentile=[75, 100])\n</code></pre>"},{"location":"api/plot/#linear-regression","title":"Linear Regression","text":"<pre><code>from AeroViz import plot, DataBase\n\ndf = DataBase()  # build default data, uers can use their own data\n\n# regression\nplot.linear_regression(df, x='PM25', y='Extinction')\nplot.linear_regression(df, x='PM25', y=['Extinction', 'Scattering', 'Absorption'])\n\nplot.multiple_linear_regression(df, x=['AS', 'AN', 'OM', 'EC', 'SS', 'Soil'], y=['Extinction'])\nplot.multiple_linear_regression(df, x=['NO', 'NO2', 'CO', 'PM1'], y=['PM25'])\n</code></pre>"},{"location":"api/plot/#timeseries","title":"Timeseries","text":"<pre><code>from AeroViz import plot, DataBase\n\ndf = DataBase()  # build default data, uers can use their own data\n\n# timeseries\nplot.timeseries.timeseries(df,\n                           y=['Extinction', 'Scattering'],\n                           color=[None, None],\n                           style=['line', 'line'],\n                           times=('2021-02-01', '2021-03-31'), ylim=[0, None], ylim2=[0, None], rolling=50,\n                           inset_kws2=dict(bbox_to_anchor=(1.12, 0, 1.2, 1)))\n\nplot.timeseries.timeseries(df, y='WS', color='WD', style='scatter', times=('2020-10-01', '2020-11-30'),\n                           scatter_kws=dict(cmap='hsv'), cbar_kws=dict(ticks=[0, 90, 180, 270, 360]),\n                           ylim=[0, None])\n\nplot.timeseries.timeseries_template(df.loc['2021-02-01', '2021-03-31'])\n</code></pre>"},{"location":"api/plot/#particle-size-distribution","title":"Particle Size Distribution","text":"<p>[!IMPORTANT]\\ The provided code of distribution suitable for SMPS and APS data in \"dX/dlogdp\" unit. It can be converted into surface area and volume distribution. At the same time, chemical composition data can also be used to calculate particle extinction through Mie theory.</p> <p></p> <pre><code>from pathlib import Path\nfrom AeroViz import plot\nfrom AeroViz.tools import DataBase\n\ndf = DataBase()  # build default data, uers can use their own data\n\nPNSD = DataBase('DEFAULT_PNSD_DATA.csv')\n\nplot.distribution.distribution.heatmap(PNSD, unit='Number')\nplot.distribution.distribution.heatmap_tms(PNSD, unit='Number', freq='60d')\n</code></pre>"},{"location":"api/plot/#for-some-basic-plot","title":"For some basic plot","text":"Three_dimension Correlation Matrix Mutiply Linear Regression Pie &amp; Donut Dounts Scatter"},{"location":"api/plot/#pymiescatt","title":"PyMieScatt","text":"Mie_Q Mie_MEE"},{"location":"api/plot/basic/bar/","title":"bar","text":""},{"location":"api/plot/basic/bar/#AeroViz.plot.bar.bar","title":"AeroViz.plot.bar.bar","text":"<pre><code>bar(data_set: DataFrame | dict, data_std: DataFrame | None, labels: list[str], unit: str, style: Literal['stacked', 'dispersed'] = 'dispersed', orientation: Literal['va', 'ha'] = 'va', ax: Axes | None = None, symbol=True, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Parameters:</p> Name Type Description Default <code>data_set</code> <code>DataFrame or dict</code> <p>A mapping from category names to a list of species mean or a DataFrame with columns as categories and values as means.</p> required <code>data_std</code> <code>DataFrame or None</code> <p>A DataFrame with standard deviations corresponding to data_set, or None if standard deviations are not provided.</p> required <code>labels</code> <code>list of str</code> <p>The species names.</p> required <code>unit</code> <code>str</code> <p>The unit for the values.</p> required <code>style</code> <code>(stacked, dispersed)</code> <p>Whether to display the bars stacked or dispersed.</p> <code>'stacked'</code> <code>orientation</code> <code>(va, ha)</code> <p>The orientation of the bars, 'va' for vertical and 'ha' for horizontal.</p> <code>'va'</code> <code>ax</code> <code>Axes or None</code> <p>The Axes object to plot on. If None, a new figure and Axes are created.</p> <code>None</code> <code>symbol</code> <code>bool</code> <p>Whether to display values for each bar.</p> <code>True</code> <code>kwargs</code> <code>dict</code> <p>Additional keyword arguments passed to the barplot function.</p> <code>{}</code> <p>Returns:</p> Type Description <code>Axes</code> <p>The Axes object containing the plot.</p>"},{"location":"api/plot/basic/box/","title":"box","text":""},{"location":"api/plot/basic/box/#AeroViz.plot.box.box","title":"AeroViz.plot.box.box","text":"<pre><code>box(df: DataFrame, x: str, y: str, x_bins: list | ndarray = None, add_scatter: bool = True, ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre>"},{"location":"api/plot/basic/pie/","title":"pie","text":""},{"location":"api/plot/basic/pie/#AeroViz.plot.pie.pie","title":"AeroViz.plot.pie.pie","text":"<pre><code>pie(data_set: DataFrame | dict, labels: list[str], unit: str, style: Literal['pie', 'donut'], ax: Axes | None = None, symbol: bool = True, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Create a pie or donut chart based on the provided data.</p> <p>Parameters:</p> Name Type Description Default <code>data_set</code> <code>DataFrame | dict</code> <p>A pandas DataFrame or dictionary mapping category names to a list of species. If a DataFrame is provided, the index represents the categories, and each column contains species data. If a dictionary is provided, it maps category names to lists of species data. It is assumed that all lists or DataFrame columns contain the same number of entries as the labels list.</p> required <code>labels</code> <code>list of str</code> <p>The labels for each category.</p> required <code>unit</code> <code>str</code> <p>The unit to display in the center of the donut chart.</p> required <code>style</code> <code>Literal['pie', 'donut']</code> <p>The style of the chart, either 'pie' for a standard pie chart or 'donut' for a donut chart.</p> required <code>ax</code> <code>Axes or None</code> <p>The Axes object to plot the chart onto. If None, a new figure and Axes will be created.</p> <code>None</code> <code>symbol</code> <code>bool</code> <p>Whether to display values for each species in the chart.</p> <code>True</code> <code>**kwargs</code> <p>Additional keyword arguments to be passed to the plotting function.</p> <code>{}</code> <p>Returns:</p> Type Description <code>Axes</code> <p>The Axes object containing the violin plot.</p> Notes <ul> <li>If data_set is a dictionary, it should contain lists of species that correspond to each category in labels.</li> <li>The length of each list in data_set or the number of columns in the DataFrame should match the length of the labels list.</li> </ul> <p>Examples:</p> <pre><code>&gt;&gt;&gt; data_set = {'Category 1': [10, 20, 30], 'Category 2': [15, 25, 35]}\n&gt;&gt;&gt; labels = ['Species 1', 'Species 2', 'Species 3']\n&gt;&gt;&gt; pie(data_set, labels, unit='kg', style='pie', symbol=True)\n</code></pre>"},{"location":"api/plot/basic/pie/#AeroViz.plot.pie.donuts","title":"AeroViz.plot.pie.donuts","text":"<pre><code>donuts(data_set: DataFrame | dict, labels: list[str], unit: str, ax: Axes | None = None, symbol=True, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Plot a donut chart based on the data set.</p> <p>Parameters:</p> Name Type Description Default <code>data_set</code> <code>DataFrame | dict</code> <p>A pandas DataFrame or a dictionary mapping category names to a list of species. If a DataFrame is provided, the index represents the categories, and each column contains species data. If a dictionary is provided, it maps category names to lists of species data. It is assumed that all lists or DataFrame columns contain the same number of entries as the labels list.</p> required <code>labels</code> <code>list of str</code> <p>The category labels.</p> required <code>unit</code> <code>str</code> <p>The unit to be displayed in the center of the donut chart.</p> required <code>ax</code> <code>Axes</code> <p>The axes to plot on. If None, the current axes will be used (default).</p> <code>None</code> <code>symbol</code> <code>bool</code> <p>Whether to display values for each species (default is True).</p> <code>True</code> <code>**kwargs</code> <code>dict</code> <p>Additional keyword arguments to pass to the matplotlib pie chart function.</p> <code>{}</code> <p>Returns:</p> Type Description <code>Axes</code> <p>The axes containing the donut chart.</p>"},{"location":"api/plot/basic/radar/","title":"radar","text":""},{"location":"api/plot/basic/radar/#AeroViz.plot.radar","title":"AeroViz.plot.radar","text":""},{"location":"api/plot/basic/radar/#AeroViz.plot.radar-attributes","title":"Attributes","text":""},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.__all__","title":"__all__  <code>module-attribute</code>","text":"<pre><code>__all__ = ['radar']\n</code></pre>"},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.data","title":"data  <code>module-attribute</code>","text":"<pre><code>data = [[0.88, 0.01, 0.03, 0.03, 0.0, 0.06, 0.01, 0.0], [0.07, 0.95, 0.04, 0.05, 0.0, 0.02, 0.01, 0.0], [0.01, 0.02, 0.85, 0.19, 0.05, 0.1, 0.0, 0.0], [0.02, 0.01, 0.07, 0.01, 0.21, 0.12, 0.98, 0.0], [0.01, 0.01, 0.02, 0.71, 0.74, 0.7, 0.3, 0.2]]\n</code></pre>"},{"location":"api/plot/basic/radar/#AeroViz.plot.radar-classes","title":"Classes","text":""},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.Color","title":"Color","text":""},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.Unit","title":"Unit","text":""},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.Unit-functions","title":"Functions","text":""},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.Unit.load_jsonfile","title":"load_jsonfile  <code>classmethod</code>","text":"<pre><code>load_jsonfile()\n</code></pre> <p>\u8b80\u53d6 JSON \u6a94\u4e2d\u6578\u64da\u5e76\u5c07\u5176\u8b8a\u6210\u5c6c\u6027</p>"},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.Unit.update_jsonfile","title":"update_jsonfile  <code>classmethod</code>","text":"<pre><code>update_jsonfile(key, value)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p>"},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.Unit.del_jsonfile","title":"del_jsonfile  <code>classmethod</code>","text":"<pre><code>del_jsonfile(key)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p>"},{"location":"api/plot/basic/radar/#AeroViz.plot.radar-functions","title":"Functions","text":""},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.set_figure","title":"set_figure","text":"<pre><code>set_figure(func=None, *, figsize: tuple | None = None, fs: int | None = None, fw: str = None, autolayout: bool = True)\n</code></pre>"},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.combine_legends","title":"combine_legends","text":"<pre><code>combine_legends(axes_list: list[Axes]) -&gt; tuple[list, list]\n</code></pre>"},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.auto_label_pct","title":"auto_label_pct","text":"<pre><code>auto_label_pct(pct, symbol: bool = True, include_pct: bool = False, ignore: Literal['inner', 'outer'] = 'inner', value: float = 2)\n</code></pre>"},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.linear_regression_base","title":"linear_regression_base","text":"<pre><code>linear_regression_base(x_array: ndarray, y_array: ndarray, columns: str | list[str] | None = None, positive: bool = True, fit_intercept: bool = True)\n</code></pre>"},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.radar_factory","title":"radar_factory","text":"<pre><code>radar_factory(num_vars, frame='circle')\n</code></pre> <p>Create a radar chart with <code>num_vars</code> axes.</p> <p>This function creates a RadarAxes projection and registers it.</p> <p>Parameters:</p> Name Type Description Default <code>num_vars</code> <code>int</code> <p>Number of variables for radar chart.</p> required <code>frame</code> <code>(circle, polygon)</code> <p>Shape of frame surrounding axes.</p> <code>'circle'</code>"},{"location":"api/plot/basic/radar/#AeroViz.plot.radar.radar","title":"radar","text":"<pre><code>radar(data, labels=None, legend_labels=None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Creates a radar chart based on the provided data.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>list of list</code> <p>A 2D list where each inner list represents a factor, and each element within the inner lists represents a value for a species. Shape: (n_factors, n_species) Example: [[0.88, 0.01, 0.03, ...], [0.07, 0.95, 0.04, ...], ...]</p> required <code>labels</code> <code>list</code> <p>A list of strings representing the names of species (variables). If provided, it should have the same length as the number of elements in each inner list of <code>data</code>. Example: ['Sulfate', 'Nitrate', 'EC', 'OC1', 'OC2', 'OP', 'CO', 'O3']</p> <code>None</code> <code>legend_labels</code> <code>list</code> <p>A list of strings for labeling each factor in the legend. If provided, it should have the same length as the number of inner lists in <code>data</code>.</p> <code>None</code> <code>**kwargs</code> <code>dict</code> <p>Additional keyword arguments to be passed to the plotting function. This may include 'title' for setting the chart title.</p> <code>{}</code> <p>Returns:</p> Type Description <code>tuple[Figure, Axes]</code> <p>A tuple containing the Figure and Axes objects of the created plot.</p> Example <p>data = [[0.88, 0.01, 0.03, 0.03, 0.00, 0.06, 0.01, 0.00],         [0.07, 0.95, 0.04, 0.05, 0.00, 0.02, 0.01, 0.00],         [0.01, 0.02, 0.85, 0.19, 0.05, 0.10, 0.00, 0.00],         [0.02, 0.01, 0.07, 0.01, 0.21, 0.12, 0.98, 0.00],         [0.01, 0.01, 0.02, 0.71, 0.74, 0.70, 0.30, 0.20]] labels = ['Sulfate', 'Nitrate', 'EC', 'OC1', 'OC2', 'OP', 'CO', 'O3'] fig, ax = radar(data, labels=labels, title='Basecase')</p> Note <p>The first dimension of <code>data</code> represents each factor, while the second dimension represents each species.</p>"},{"location":"api/plot/basic/regression/","title":"regression","text":""},{"location":"api/plot/basic/regression/#AeroViz.plot.regression.linear_regression","title":"AeroViz.plot.regression.linear_regression","text":"<pre><code>linear_regression(df: DataFrame, x: str | list[str], y: str | list[str], labels: str | list[str] = None, ax: Axes | None = None, diagonal=False, positive: bool = True, fit_intercept: bool = True, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Create a scatter plot with regression lines for the given data.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input DataFrame containing the data.</p> required <code>x</code> <code>str or list of str</code> <p>Column name(s) for the x-axis variable(s). If a list, only the first element is used.</p> required <code>y</code> <code>str or list of str</code> <p>Column name(s) for the y-axis variable(s).</p> required <code>labels</code> <code>str or list of str</code> <p>Labels for the y-axis variable(s). If None, column names are used as labels. Default is None.</p> <code>None</code> <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object to use for the plot. If None, a new subplot is created. Default is None.</p> <code>None</code> <code>diagonal</code> <code>bool</code> <p>If True, a diagonal line (1:1 line) is added to the plot. Default is False.</p> <code>False</code> <code>positive</code> <code>bool</code> <p>Whether to constrain the regression coefficients to be positive. Default is True.</p> <code>True</code> <code>fit_intercept</code> <code>bool</code> <p>Whether to calculate the intercept for this model. Default is True.</p> <code>True</code> <code>**kwargs</code> <p>Additional keyword arguments for plot customization.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>fig</code> <code>Figure</code> <p>The matplotlib Figure object.</p> <code>ax</code> <code>Axes</code> <p>The matplotlib Axes object with the scatter plot.</p> Notes <ul> <li>The function creates a scatter plot with optional regression lines.</li> <li>The regression line is fitted for each y variable.</li> <li>Customization options are provided via **kwargs.</li> </ul> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from AeroViz import plot\n&gt;&gt;&gt;\n&gt;&gt;&gt; plot.linear_regression(df, x='X', y=['Y1', 'Y2'], labels=['Label1', 'Label2'],\n...                        diagonal=True, xlim=(0, 10), ylim=(0, 20),\n...                        xlabel=\"X-axis\", ylabel=\"Y-axis\", title=\"Scatter Plot with Regressions\")\n</code></pre>"},{"location":"api/plot/basic/regression/#AeroViz.plot.regression.multiple_linear_regression","title":"AeroViz.plot.regression.multiple_linear_regression","text":"<pre><code>multiple_linear_regression(df: DataFrame, x: str | list[str], y: str | list[str], labels: str | list[str] = None, ax: Axes | None = None, diagonal=False, positive: bool = True, fit_intercept: bool = True, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Perform multiple linear regression analysis and plot the results.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>Input DataFrame containing the data.</p> required <code>x</code> <code>str or list of str</code> <p>Column name(s) for the independent variable(s). Can be a single string or a list of strings.</p> required <code>y</code> <code>str or list of str</code> <p>Column name(s) for the dependent variable(s). Can be a single string or a list of strings.</p> required <code>labels</code> <code>str or list of str</code> <p>Labels for the dependent variable(s). If None, column names are used as labels. Default is None.</p> <code>None</code> <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object to use for the plot. If None, a new subplot is created. Default is None.</p> <code>None</code> <code>diagonal</code> <code>bool</code> <p>Whether to include a diagonal line (1:1 line) in the plot. Default is False.</p> <code>False</code> <code>positive</code> <code>bool</code> <p>Whether to constrain the regression coefficients to be positive. Default is True.</p> <code>True</code> <code>fit_intercept</code> <code>bool</code> <p>Whether to calculate the intercept for this model. Default is True.</p> <code>True</code> <code>**kwargs</code> <p>Additional keyword arguments for plot customization.</p> <code>{}</code> <p>Returns:</p> Type Description <code>tuple[Figure, Axes]</code> <p>The Figure and Axes containing the regression plot.</p> Notes <p>This function performs multiple linear regression analysis using the input DataFrame. It supports multiple independent variables and can plot the regression results.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; from AeroViz import plot\n&gt;&gt;&gt;\n&gt;&gt;&gt; plot.multiple_linear_regression(df, x=['X1', 'X2'], y='Y', labels=['Y1', 'Y2'],\n...                                 diagonal=True, fit_intercept=True,\n...                                 xlabel=\"X-axis\", ylabel=\"Y-axis\", title=\"Multiple Linear Regression Plot\")\n</code></pre>"},{"location":"api/plot/basic/scatter/","title":"scatter","text":""},{"location":"api/plot/basic/scatter/#AeroViz.plot.scatter.scatter","title":"AeroViz.plot.scatter.scatter","text":"<pre><code>scatter(df: DataFrame, x: str, y: str, c: str | None = None, color: str | None = '#7a97c9', s: str | None = None, cmap='jet', regression=False, regression_line_color: str | None = xkcd_rgb['denim blue'], diagonal=False, ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Creates a scatter plot with optional color and size encoding.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> <p>The DataFrame containing the data to plot.</p> required <code>x</code> <code>str</code> <p>The column name for the x-axis values.</p> required <code>y</code> <code>str</code> <p>The column name for the y-axis values.</p> required <code>c</code> <code>str</code> <p>The column name for c encoding. Default is None.</p> <code>None</code> <code>color</code> <code>str</code> <p>The column name for color encoding. Default is None.</p> <code>'#7a97c9'</code> <code>s</code> <code>str</code> <p>The column name for size encoding. Default is None.</p> <code>None</code> <code>cmap</code> <code>str</code> <p>The colormap to use for the color encoding. Default is 'jet'.</p> <code>'jet'</code> <code>regression</code> <code>bool</code> <p>If True, fits and plots a linear regression line. Default is False.</p> <code>False</code> <code>regression_line_color</code> <code>str</code> <p>The color of the regression line. Default is 'sns.xkcd_rgb[\"denim blue\"]'.</p> <code>xkcd_rgb['denim blue']</code> <code>diagonal</code> <code>bool</code> <p>If True, plots a 1:1 diagonal line. Default is False.</p> <code>False</code> <code>ax</code> <code>Axes</code> <p>The matplotlib Axes to plot on. If not provided, a new figure and axes are created.</p> <code>None</code> <code>**kwargs</code> <code>Any</code> <p>Additional keyword arguments passed to customize the plot, such as <code>fig_kws</code> for figure creation and <code>xlabel</code>, <code>ylabel</code>, <code>xlim</code>, <code>ylim</code>, <code>title</code> for axis labeling and limits.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>fig</code> <code>Figure</code> <p>The matplotlib Figure object.</p> <code>ax</code> <code>Axes</code> <p>The matplotlib Axes object with the scatter plot.</p> Notes <ul> <li>If both <code>c</code> and <code>s</code> are provided, the scatter plot will encode data points using both color and size.</li> <li>If only <code>c</code> is provided, data points will be color-coded according to the values in the <code>c</code> column.</li> <li>If only <code>s</code> is provided, data points will be sized according to the values in the <code>s</code> column.</li> <li>If neither <code>c</code> nor <code>s</code> is provided, a basic scatter plot is created.</li> <li>The <code>regression</code> option will add a linear regression line and display the equation on the plot.</li> <li>The <code>diagonal</code> option will add a 1:1 reference line to the plot.</li> </ul> <p>Examples:</p> <pre><code>&gt;&gt;&gt; import pandas as pd\n&gt;&gt;&gt; from AeroViz.plot import scatter\n&gt;&gt;&gt; df = pd.DataFrame({\n&gt;&gt;&gt;     'x': [1, 2, 3, 4],\n&gt;&gt;&gt;     'y': [1.1, 2.0, 2.9, 4.1],\n&gt;&gt;&gt;     'color': [10, 20, 30, 40],\n&gt;&gt;&gt;     'size': [100, 200, 300, 400]\n&gt;&gt;&gt; })\n&gt;&gt;&gt; fig, ax = scatter(df, x='x', y='y', c='color', s='size', regression=True, diagonal=True)\n</code></pre>"},{"location":"api/plot/basic/violin/","title":"violin","text":""},{"location":"api/plot/basic/violin/#AeroViz.plot.violin.violin","title":"AeroViz.plot.violin.violin","text":"<pre><code>violin(df: DataFrame | dict, unit: str, ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a violin plot for multiple data sets.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame or dict</code> <p>A mapping from category names to pandas DataFrames containing the data.</p> required <code>unit</code> <code>str</code> <p>The unit for the data being plotted.</p> required <code>ax</code> <code>Axes</code> <p>The Axes object to draw the plot onto. If not provided, a new figure will be created.</p> <code>None</code> <code>**kwargs</code> <code>dict</code> <p>Additional keyword arguments to be passed to the violinplot function.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>fig</code> <code>Figure</code> <p>The matplotlib Figure object.</p> <code>ax</code> <code>Axes</code> <p>The matplotlib Axes object with the scatter plot.</p>"},{"location":"api/plot/distribution/distribution/","title":"distribution","text":""},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution","title":"AeroViz.plot.distribution","text":""},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution-functions","title":"Functions","text":""},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.plot_dist","title":"plot_dist","text":"<pre><code>plot_dist(data: DataFrame | ndarray, data_std: DataFrame | None = None, std_scale: float | None = 1, unit: Literal['Number', 'Surface', 'Volume', 'Extinction'] = 'Number', additional: Literal['Std', 'Enhancement', 'Error'] = None, fig: Figure | None = None, ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Plot particle size distribution curves and optionally show enhancements.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>dict or list</code> <p>If dict, keys are labels and values are arrays of distribution values. If listed, it should contain three arrays for different curves.</p> required <code>data_std</code> <code>dict</code> <p>Dictionary containing standard deviation data for ambient extinction distribution.</p> <code>None</code> <code>std_scale</code> <code>float</code> <p>The width of standard deviation.</p> <code>1</code> <code>unit</code> <code>(Number, Surface, Volume, Extinction)</code> <p>Unit of measurement for the data.</p> <code>'Number'</code> <code>additional</code> <code>(std, enhancement, error)</code> <p>Whether to show enhancement curves.</p> <code>'std'</code> <code>fig</code> <code>Figure</code> <p>Matplotlib Figure object to use.</p> <code>None</code> <code>ax</code> <code>AxesSubplot</code> <p>Matplotlib AxesSubplot  object to use. If not provided, a new subplot will be created.</p> <code>None</code> <code>**kwargs</code> <code>dict</code> <p>Additional keyword arguments.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>AxesSubplot</code> <p>Matplotlib AxesSubplot.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; plot_dist(DataFrame(...), additional=\"Enhancement\")\n</code></pre>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.heatmap","title":"heatmap","text":"<pre><code>heatmap(data: DataFrame, unit: Literal['Number', 'Surface', 'Volume', 'Extinction'], cmap: str = 'Blues', colorbar: bool = False, magic_number: int = 11, ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Plot a heatmap of particle size distribution.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>DataFrame</code> <p>The data containing particle size distribution values. Each column corresponds to a size bin, and each row corresponds to a different distribution.</p> required <code>unit</code> <code>(Number, Surface, Volume, Extinction)</code> <p>The unit of measurement for the data.</p> <code>'Number'</code> <code>cmap</code> <code>str</code> <p>The colormap to use for the heatmap.</p> <code>'Blues'</code> <code>colorbar</code> <code>bool</code> <p>Whether to show the colorbar.</p> <code>False</code> <code>magic_number</code> <code>int</code> <p>The number of bins to use for the histogram.</p> <code>11</code> <code>ax</code> <code>Axes</code> <p>The axes to plot the heatmap on. If not provided, a new subplot will be created.</p> <code>None</code> <code>**kwargs</code> <p>Additional keyword arguments to pass to matplotlib functions.</p> <code>{}</code> <p>Returns:</p> Type Description <code>Axes</code> <p>The Axes object containing the heatmap.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; heatmap(DataFrame(...), unit='Number')\n</code></pre> Notes <p>This function calculates a 2D histogram of the log-transformed particle sizes and the distribution values. It then plots the heatmap using a logarithmic color scale.</p>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.heatmap_tms","title":"heatmap_tms","text":"<pre><code>heatmap_tms(data: DataFrame, unit: Literal['Number', 'Surface', 'Volume', 'Extinction'], cmap: str = 'jet', ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Plot the size distribution over time.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>DataFrame</code> <p>A DataFrame of particle concentrations to plot the heatmap.</p> required <code>ax</code> <code>Axis</code> <p>An axis object to plot on. If none is provided, one will be created.</p> <code>None</code> <code>unit</code> <code>Literal['Number', 'Surface', 'Volume', 'Extinction']</code> <p>default='Number'</p> required <code>cmap</code> <code>colormap</code> <p>The colormap to use. Can be anything other that 'jet'.</p> <code>'viridis'</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axis</code> Notes <pre><code>Do not dropna when using this code.\n</code></pre> <p>Examples:</p> <p>Plot a SPMS + APS data:</p> <pre><code>&gt;&gt;&gt; heatmap_tms(DataFrame(...), cmap='jet')\n</code></pre>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.three_dimension","title":"three_dimension","text":"<pre><code>three_dimension(data: DataFrame | ndarray, unit: Literal['Number', 'Surface', 'Volume', 'Extinction'], cmap: str = 'Blues', ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Create a 3D plot with data from a pandas DataFrame or numpy array.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>DataFrame or ndarray</code> <p>Input data containing the values to be plotted.</p> required <code>unit</code> <code>(Number, Surface, Volume, Extinction)</code> <p>Unit of measurement for the data.</p> <code>'Number'</code> <code>cmap</code> <code>str</code> <p>The colormap to use for the facecolors.</p> <code>'Blues'</code> <code>ax</code> <code>AxesSubplot</code> <p>Matplotlib AxesSubplot. If not provided, a new subplot will be created.</p> <code>None</code> <code>**kwargs</code> <p>Additional keyword arguments to customize the plot.</p> <code>{}</code> <p>Returns:</p> Type Description <code>Axes</code> <p>Matplotlib Axes object representing the 3D plot.</p> Notes <ul> <li>The function creates a 3D plot with data provided in a pandas DataFrame or numpy array.</li> <li>The x-axis is logarithmically scaled, and ticks and labels are formatted accordingly.</li> <li>Additional customization can be done using the **kwargs.</li> </ul> Example <p>three_dimension(DataFrame(...), unit='Number', cmap='Blues')</p>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.curve_fitting","title":"curve_fitting","text":"<pre><code>curve_fitting(dp: ndarray, dist: ndarray | Series | DataFrame, mode: int = None, unit: Literal['Number', 'Surface', 'Volume', 'Extinction'] = None, ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Fit a log-normal distribution to the given data and plot the result.</p> <p>Returns:</p> Type Description <code>None</code> Notes <ul> <li>The function fits a sum of log-normal distribution to the input data.</li> <li>The number of distribution is determined by the 'mode' parameter.</li> <li>Additional plotting customization can be done using the **kwargs.</li> </ul> Example <p>curve_fitting(dp, dist, mode=2, xlabel=\"Diameter (nm)\", ylabel=\"Distribution\")</p>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution-modules","title":"Modules","text":""},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution","title":"distribution","text":""},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution-classes","title":"Classes","text":""},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution.Unit","title":"Unit","text":"Functions load_jsonfile <code>classmethod</code> <pre><code>load_jsonfile()\n</code></pre> <p>\u8b80\u53d6 JSON \u6a94\u4e2d\u6578\u64da\u5e76\u5c07\u5176\u8b8a\u6210\u5c6c\u6027</p> update_jsonfile <code>classmethod</code> <pre><code>update_jsonfile(key, value)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p> del_jsonfile <code>classmethod</code> <pre><code>del_jsonfile(key)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution-functions","title":"Functions","text":""},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution.plot_dist","title":"plot_dist","text":"<pre><code>plot_dist(data: DataFrame | ndarray, data_std: DataFrame | None = None, std_scale: float | None = 1, unit: Literal['Number', 'Surface', 'Volume', 'Extinction'] = 'Number', additional: Literal['Std', 'Enhancement', 'Error'] = None, fig: Figure | None = None, ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Plot particle size distribution curves and optionally show enhancements.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>dict or list</code> <p>If dict, keys are labels and values are arrays of distribution values. If listed, it should contain three arrays for different curves.</p> required <code>data_std</code> <code>dict</code> <p>Dictionary containing standard deviation data for ambient extinction distribution.</p> <code>None</code> <code>std_scale</code> <code>float</code> <p>The width of standard deviation.</p> <code>1</code> <code>unit</code> <code>(Number, Surface, Volume, Extinction)</code> <p>Unit of measurement for the data.</p> <code>'Number'</code> <code>additional</code> <code>(std, enhancement, error)</code> <p>Whether to show enhancement curves.</p> <code>'std'</code> <code>fig</code> <code>Figure</code> <p>Matplotlib Figure object to use.</p> <code>None</code> <code>ax</code> <code>AxesSubplot</code> <p>Matplotlib AxesSubplot  object to use. If not provided, a new subplot will be created.</p> <code>None</code> <code>**kwargs</code> <code>dict</code> <p>Additional keyword arguments.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>AxesSubplot</code> <p>Matplotlib AxesSubplot.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; plot_dist(DataFrame(...), additional=\"Enhancement\")\n</code></pre>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution.heatmap","title":"heatmap","text":"<pre><code>heatmap(data: DataFrame, unit: Literal['Number', 'Surface', 'Volume', 'Extinction'], cmap: str = 'Blues', colorbar: bool = False, magic_number: int = 11, ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Plot a heatmap of particle size distribution.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>DataFrame</code> <p>The data containing particle size distribution values. Each column corresponds to a size bin, and each row corresponds to a different distribution.</p> required <code>unit</code> <code>(Number, Surface, Volume, Extinction)</code> <p>The unit of measurement for the data.</p> <code>'Number'</code> <code>cmap</code> <code>str</code> <p>The colormap to use for the heatmap.</p> <code>'Blues'</code> <code>colorbar</code> <code>bool</code> <p>Whether to show the colorbar.</p> <code>False</code> <code>magic_number</code> <code>int</code> <p>The number of bins to use for the histogram.</p> <code>11</code> <code>ax</code> <code>Axes</code> <p>The axes to plot the heatmap on. If not provided, a new subplot will be created.</p> <code>None</code> <code>**kwargs</code> <p>Additional keyword arguments to pass to matplotlib functions.</p> <code>{}</code> <p>Returns:</p> Type Description <code>Axes</code> <p>The Axes object containing the heatmap.</p> <p>Examples:</p> <pre><code>&gt;&gt;&gt; heatmap(DataFrame(...), unit='Number')\n</code></pre> Notes <p>This function calculates a 2D histogram of the log-transformed particle sizes and the distribution values. It then plots the heatmap using a logarithmic color scale.</p>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution.heatmap_tms","title":"heatmap_tms","text":"<pre><code>heatmap_tms(data: DataFrame, unit: Literal['Number', 'Surface', 'Volume', 'Extinction'], cmap: str = 'jet', ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Plot the size distribution over time.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>DataFrame</code> <p>A DataFrame of particle concentrations to plot the heatmap.</p> required <code>ax</code> <code>Axis</code> <p>An axis object to plot on. If none is provided, one will be created.</p> <code>None</code> <code>unit</code> <code>Literal['Number', 'Surface', 'Volume', 'Extinction']</code> <p>default='Number'</p> required <code>cmap</code> <code>colormap</code> <p>The colormap to use. Can be anything other that 'jet'.</p> <code>'viridis'</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axis</code> Notes <pre><code>Do not dropna when using this code.\n</code></pre> <p>Examples:</p> <p>Plot a SPMS + APS data:</p> <pre><code>&gt;&gt;&gt; heatmap_tms(DataFrame(...), cmap='jet')\n</code></pre>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution.three_dimension","title":"three_dimension","text":"<pre><code>three_dimension(data: DataFrame | ndarray, unit: Literal['Number', 'Surface', 'Volume', 'Extinction'], cmap: str = 'Blues', ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Create a 3D plot with data from a pandas DataFrame or numpy array.</p> <p>Parameters:</p> Name Type Description Default <code>data</code> <code>DataFrame or ndarray</code> <p>Input data containing the values to be plotted.</p> required <code>unit</code> <code>(Number, Surface, Volume, Extinction)</code> <p>Unit of measurement for the data.</p> <code>'Number'</code> <code>cmap</code> <code>str</code> <p>The colormap to use for the facecolors.</p> <code>'Blues'</code> <code>ax</code> <code>AxesSubplot</code> <p>Matplotlib AxesSubplot. If not provided, a new subplot will be created.</p> <code>None</code> <code>**kwargs</code> <p>Additional keyword arguments to customize the plot.</p> <code>{}</code> <p>Returns:</p> Type Description <code>Axes</code> <p>Matplotlib Axes object representing the 3D plot.</p> Notes <ul> <li>The function creates a 3D plot with data provided in a pandas DataFrame or numpy array.</li> <li>The x-axis is logarithmically scaled, and ticks and labels are formatted accordingly.</li> <li>Additional customization can be done using the **kwargs.</li> </ul> Example <p>three_dimension(DataFrame(...), unit='Number', cmap='Blues')</p>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution.curve_fitting","title":"curve_fitting","text":"<pre><code>curve_fitting(dp: ndarray, dist: ndarray | Series | DataFrame, mode: int = None, unit: Literal['Number', 'Surface', 'Volume', 'Extinction'] = None, ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Fit a log-normal distribution to the given data and plot the result.</p> <p>Returns:</p> Type Description <code>None</code> Notes <ul> <li>The function fits a sum of log-normal distribution to the input data.</li> <li>The number of distribution is determined by the 'mode' parameter.</li> <li>Additional plotting customization can be done using the **kwargs.</li> </ul> Example <p>curve_fitting(dp, dist, mode=2, xlabel=\"Diameter (nm)\", ylabel=\"Distribution\")</p>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution.ls_mode","title":"ls_mode","text":"<pre><code>ls_mode(**kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Plot log-normal mass size distribution for small mode, large mode, and sea salt particles.</p> <p>Parameters:</p> Name Type Description Default <code>**kwargs</code> <code>dict</code> <p>Additional keyword arguments.</p> <code>{}</code> <p>Examples:</p> <p>Example : Plot log-normal mass size distribution with default settings</p> <pre><code>&gt;&gt;&gt; ls_mode()\n</code></pre>"},{"location":"api/plot/distribution/distribution/#AeroViz.plot.distribution.distribution.lognorm_dist","title":"lognorm_dist","text":"<pre><code>lognorm_dist(**kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Plot various particle size distribution to illustrate log-normal distribution and transformations.</p> <p>Parameters:</p> Name Type Description Default <code>**kwargs</code> <code>dict</code> <p>Additional keyword arguments.</p> <code>{}</code> <p>Examples:</p> <p>Example : Plot default particle size distribution</p> <pre><code>&gt;&gt;&gt; lognorm_dist()\n</code></pre>"},{"location":"api/plot/meteorology/CBPF/","title":"CBPF","text":""},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF","title":"AeroViz.plot.meteorology.CBPF","text":""},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF-attributes","title":"Attributes","text":""},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.__all__","title":"__all__  <code>module-attribute</code>","text":"<pre><code>__all__ = ['CBPF']\n</code></pre>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF-classes","title":"Classes","text":""},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.Color","title":"Color","text":""},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.Unit","title":"Unit","text":""},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.Unit-functions","title":"Functions","text":""},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.Unit.load_jsonfile","title":"load_jsonfile  <code>classmethod</code>","text":"<pre><code>load_jsonfile()\n</code></pre> <p>\u8b80\u53d6 JSON \u6a94\u4e2d\u6578\u64da\u5e76\u5c07\u5176\u8b8a\u6210\u5c6c\u6027</p>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.Unit.update_jsonfile","title":"update_jsonfile  <code>classmethod</code>","text":"<pre><code>update_jsonfile(key, value)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.Unit.del_jsonfile","title":"del_jsonfile  <code>classmethod</code>","text":"<pre><code>del_jsonfile(key)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF-functions","title":"Functions","text":""},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.set_figure","title":"set_figure","text":"<pre><code>set_figure(func=None, *, figsize: tuple | None = None, fs: int | None = None, fw: str = None, autolayout: bool = True)\n</code></pre>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.combine_legends","title":"combine_legends","text":"<pre><code>combine_legends(axes_list: list[Axes]) -&gt; tuple[list, list]\n</code></pre>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.auto_label_pct","title":"auto_label_pct","text":"<pre><code>auto_label_pct(pct, symbol: bool = True, include_pct: bool = False, ignore: Literal['inner', 'outer'] = 'inner', value: float = 2)\n</code></pre>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.linear_regression_base","title":"linear_regression_base","text":"<pre><code>linear_regression_base(x_array: ndarray, y_array: ndarray, columns: str | list[str] | None = None, positive: bool = True, fit_intercept: bool = True)\n</code></pre>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.improve_density_estimation","title":"improve_density_estimation","text":"<pre><code>improve_density_estimation(df, WS, WD, val, resolution=100, bandwidth=None)\n</code></pre> <p>\u6539\u9032\u7684\u5bc6\u5ea6\u4f30\u8a08\u51fd\u6578\uff0c\u4f7f\u7528KDE\u65b9\u6cd5\u4f86\u7522\u751f\u66f4\u5e73\u6ed1\u7684\u5206\u5e03</p> Parameters: <p>df : DataFrame     \u5305\u542b\u98a8\u901f\u98a8\u5411\u6578\u64da\u7684DataFrame WS : str     \u98a8\u901f\u5217\u540d WD : str     \u98a8\u5411\u5217\u540d val : str     \u8981\u5206\u6790\u7684\u8b8a\u91cf\u5217\u540d resolution : int     \u7db2\u683c\u89e3\u6790\u5ea6 bandwidth : float or tuple     KDE\u7684\u983b\u5bec\u53c3\u6578\uff0c\u5982\u679c\u70baNone\u5247\u81ea\u52d5\u9078\u64c7</p>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.smooth_and_clean","title":"smooth_and_clean","text":"<pre><code>smooth_and_clean(Z, smooth_radius=2, min_density=1)\n</code></pre> <p>\u5e73\u6ed1\u4e26\u6e05\u7406\u5bc6\u5ea6\u5716\uff0c\u53bb\u9664\u5b64\u7acb\u9ede</p> Parameters: <p>Z : ndarray     \u5bc6\u5ea6\u4f30\u8a08\u7d50\u679c smooth_radius : int     \u5e73\u6ed1\u534a\u5f91 min_density : float     \u6700\u5c0f\u5bc6\u5ea6\u95be\u503c</p>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.is_within_circle","title":"is_within_circle","text":"<pre><code>is_within_circle(center_row, center_col, row, col, radius)\n</code></pre>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.remove_lonely_point","title":"remove_lonely_point","text":"<pre><code>remove_lonely_point(filtered_histogram, radius=4, magic_num=13)\n</code></pre>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.fill_nan_with_mean","title":"fill_nan_with_mean","text":"<pre><code>fill_nan_with_mean(filtered_histogram, radius=4, magic_num=13)\n</code></pre>"},{"location":"api/plot/meteorology/CBPF/#AeroViz.plot.meteorology.CBPF.CBPF","title":"CBPF","text":"<pre><code>CBPF(df: DataFrame, WS: Series | str, WD: Series | str, val: Series | str | None = None, percentile: list | float | int | None = None, max_ws: float | None = 5, resolution: int = 50, sigma: float | tuple = 2, rlabel_pos: float = 30, bottom_text: str | bool | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre>"},{"location":"api/plot/meteorology/hysplit/","title":"hysplit","text":""},{"location":"api/plot/meteorology/hysplit/#AeroViz.plot.meteorology.hysplit","title":"AeroViz.plot.meteorology.hysplit","text":""},{"location":"api/plot/meteorology/hysplit/#AeroViz.plot.meteorology.hysplit-attributes","title":"Attributes","text":""},{"location":"api/plot/meteorology/hysplit/#AeroViz.plot.meteorology.hysplit.__all__","title":"__all__  <code>module-attribute</code>","text":"<pre><code>__all__ = ['hysplit']\n</code></pre>"},{"location":"api/plot/meteorology/hysplit/#AeroViz.plot.meteorology.hysplit.DEFAULT_FILE","title":"DEFAULT_FILE  <code>module-attribute</code>","text":"<pre><code>DEFAULT_FILE = parent / 'data' / 'hysplit_example_data.txt'\n</code></pre>"},{"location":"api/plot/meteorology/hysplit/#AeroViz.plot.meteorology.hysplit-functions","title":"Functions","text":""},{"location":"api/plot/meteorology/hysplit/#AeroViz.plot.meteorology.hysplit.set_figure","title":"set_figure","text":"<pre><code>set_figure(func=None, *, figsize: tuple | None = None, fs: int | None = None, fw: str = None, autolayout: bool = True)\n</code></pre>"},{"location":"api/plot/meteorology/hysplit/#AeroViz.plot.meteorology.hysplit.read_hysplit_data","title":"read_hysplit_data","text":"<pre><code>read_hysplit_data(file: Path)\n</code></pre>"},{"location":"api/plot/meteorology/hysplit/#AeroViz.plot.meteorology.hysplit.hysplit","title":"hysplit","text":"<pre><code>hysplit(file: Path = DEFAULT_FILE)\n</code></pre>"},{"location":"api/plot/meteorology/wind_rose/","title":"wind_rose","text":""},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose","title":"AeroViz.plot.meteorology.wind_rose","text":""},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose-attributes","title":"Attributes","text":""},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.__all__","title":"__all__  <code>module-attribute</code>","text":"<pre><code>__all__ = ['wind_rose']\n</code></pre>"},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose-classes","title":"Classes","text":""},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.Color","title":"Color","text":""},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.Unit","title":"Unit","text":""},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.Unit-functions","title":"Functions","text":""},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.Unit.load_jsonfile","title":"load_jsonfile  <code>classmethod</code>","text":"<pre><code>load_jsonfile()\n</code></pre> <p>\u8b80\u53d6 JSON \u6a94\u4e2d\u6578\u64da\u5e76\u5c07\u5176\u8b8a\u6210\u5c6c\u6027</p>"},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.Unit.update_jsonfile","title":"update_jsonfile  <code>classmethod</code>","text":"<pre><code>update_jsonfile(key, value)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p>"},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.Unit.del_jsonfile","title":"del_jsonfile  <code>classmethod</code>","text":"<pre><code>del_jsonfile(key)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p>"},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose-functions","title":"Functions","text":""},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.set_figure","title":"set_figure","text":"<pre><code>set_figure(func=None, *, figsize: tuple | None = None, fs: int | None = None, fw: str = None, autolayout: bool = True)\n</code></pre>"},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.combine_legends","title":"combine_legends","text":"<pre><code>combine_legends(axes_list: list[Axes]) -&gt; tuple[list, list]\n</code></pre>"},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.auto_label_pct","title":"auto_label_pct","text":"<pre><code>auto_label_pct(pct, symbol: bool = True, include_pct: bool = False, ignore: Literal['inner', 'outer'] = 'inner', value: float = 2)\n</code></pre>"},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.linear_regression_base","title":"linear_regression_base","text":"<pre><code>linear_regression_base(x_array: ndarray, y_array: ndarray, columns: str | list[str] | None = None, positive: bool = True, fit_intercept: bool = True)\n</code></pre>"},{"location":"api/plot/meteorology/wind_rose/#AeroViz.plot.meteorology.wind_rose.wind_rose","title":"wind_rose","text":"<pre><code>wind_rose(df: DataFrame, WS: Series | str, WD: Series | str, val: Series | str | None = None, typ: Literal['bar', 'scatter'] = 'scatter', rlabel_pos: float = 30, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre>"},{"location":"api/plot/optical/optical/","title":"optical","text":""},{"location":"api/plot/optical/optical/#AeroViz.plot.optical","title":"AeroViz.plot.optical","text":""},{"location":"api/plot/optical/optical/#AeroViz.plot.optical-functions","title":"Functions","text":""},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.Q_plot","title":"Q_plot","text":"<pre><code>Q_plot(species: Literal['AS', 'AN', 'OM', 'Soil', 'SS', 'BC', 'Water'] | list[Literal['AS', 'AN', 'OM', 'Soil', 'SS', 'BC', 'Water']], x: Literal['dp', 'sp'] = 'dp', y: Literal['Q', 'MEE'] = 'Q', mode: Literal['ext', 'sca', 'abs'] = 'ext', **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a plot showing optical efficiency or mass optical efficiency for different particle species.</p> <p>Parameters:</p> Name Type Description Default <code>species</code> <code>Union[Literal['AS', 'AN', 'OM', 'Soil', 'SS', 'BC', 'Water'], list[Literal['AS', 'AN', 'OM', 'Soil', 'SS', 'BC', 'Water']]]</code> <p>The particle species or list of particle species to plot. Valid species include 'AS' (Ammonium Sulfate), 'AN' (Ammonium Nitrate), 'OM' (Organic Matter), 'Soil', 'SS' (Sea Salt), 'BC' (Black Carbon), and 'Water'.</p> required <code>x</code> <code>Literal['dp', 'sp']</code> <p>The x-axis parameter. 'dp' represents particle diameter, and 'sp' represents size parameter (alpha). Default is 'dp'.</p> <code>'dp'</code> <code>y</code> <code>Literal['Q', 'MEE']</code> <p>The y-axis parameter. 'Q' represents optical efficiency (Q_ext, Q_sca, Q_abs), and 'MEE' represents mass optical efficiency (MEE, MSE, MAE). Default is 'Q'.</p> <code>'Q'</code> <code>mode</code> <code>Literal['ext', 'sca', 'abs']</code> <p>The mode of efficiency to plot. 'ext' for extinction efficiency, 'sca' for scattering efficiency, and 'abs' for absorption efficiency. Default is 'ext'.</p> <code>'ext'</code> <code>**kwargs</code> <p>Additional keyword arguments to pass to the plot function.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object containing the generated plot.</p> <p>Examples:</p> <p>Example usage of the Q_plot function:</p> <pre><code>&gt;&gt;&gt; Q_plot('AS', x='dp', y='Q', mode='ext')\n&gt;&gt;&gt; Q_plot(['AS', 'AN'], x='sp', y='MEE')\n</code></pre>"},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.RI_couple","title":"RI_couple","text":"<pre><code>RI_couple(**kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a plot to test the influence of imaginary parts on scattering and absorption efficiencies.</p> <p>Parameters:</p> Name Type Description Default <code>**kwargs</code> <p>Additional keyword arguments to pass to the plot function.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object containing the generated plot.</p> <p>Examples:</p> <p>Example usage of the IJ_couple function:</p> <pre><code>&gt;&gt;&gt; ax = RI_couple()\n</code></pre>"},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.RRI_2D","title":"RRI_2D","text":"<pre><code>RRI_2D(mode: Literal['ext', 'sca', 'abs'] = 'ext', **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a 2D plot of scattering efficiency (Q) against real and imaginary parts of the refractive index.</p> <p>Parameters:</p> Name Type Description Default <code>mode</code> <code>(ext, sca, abs)</code> <p>The mode of scattering efficiency to plot: - 'ext' for extinction efficiency (Q_ext) - 'sca' for scattering efficiency (Q_sca) - 'abs' for absorption efficiency (Q_abs) Default is 'ext'.</p> <code>'ext'</code> <code>**kwargs</code> <p>Additional keyword arguments to pass to the plot function.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object containing the generated 2D plot.</p> <p>Examples:</p> <p>Example usage of the RRI_2D function:</p> <pre><code>&gt;&gt;&gt; RRI_2D(mode='sca', xlabel='Real Part (n)', ylabel='Imaginary Part (k)', title='Scattering Efficiency 2D Plot')\n</code></pre>"},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.scattering_phase","title":"scattering_phase","text":"<pre><code>scattering_phase(m: complex = 1.55 + 0.01j, wave: float = 600, dp: float = 200) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a polar plot to visualize the scattering phase function.</p> <p>Parameters:</p> Name Type Description Default <code>m</code> <code>complex</code> <p>The complex refractive index of the scattering medium. Default is 1.55 + 0.01j.</p> <code>1.55 + 0.01j</code> <code>wave</code> <code>float</code> <p>The wavelength of the incident light in nanometers. Default is 600 nm.</p> <code>600</code> <code>dp</code> <code>float</code> <p>The particle diameter in nanometers. Default is 200 nm.</p> <code>200</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object containing the generated polar plot.</p> <p>Examples:</p> <p>Example usage of the scattering_phase function:</p> <pre><code>&gt;&gt;&gt; ax = scattering_phase(m=1.55 + 0.01j, wave=600, dp=200)\n</code></pre>"},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.response_surface","title":"response_surface","text":"<pre><code>response_surface(real_range=(1.33, 1.7), gmd_range=(10, 500), num=50, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a response surface plot for sensitivity tests of extinction based on Mie scattering.</p> <p>Parameters:</p> Name Type Description Default <code>real_range</code> <code>tuple</code> <p>The range of real part (refractive index) values for sensitivity testing. Default is (1.33, 1.7).</p> <code>(1.33, 1.7)</code> <code>gmd_range</code> <code>tuple</code> <p>The range of geometric mean diameter (GMD) values for sensitivity testing. Default is (60, 400).</p> <code>(10, 500)</code> <code>num</code> <code>int</code> <p>The number of points to generate within the specified ranges. Default is 50.</p> <code>50</code> <code>**kwargs</code> <p>Additional keyword arguments to pass to the plot function.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object containing the generated response surface plot.</p> <p>Examples:</p> <p>Example usage of the response_surface function:</p> <pre><code>&gt;&gt;&gt; response_surface(real_range=(1.4, 1.6), gmd_range=(100, 300), num=30, xlabel='Real Part (n)',\n...                  ylabel='GMD (nm)', zlabel='Extinction (1/Mm)', title='Sensitivity Tests of Extinction')\n</code></pre>"},{"location":"api/plot/optical/optical/#AeroViz.plot.optical-modules","title":"Modules","text":""},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.optical","title":"optical","text":""},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.optical-classes","title":"Classes","text":""},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.optical.Unit","title":"Unit","text":"Functions load_jsonfile <code>classmethod</code> <pre><code>load_jsonfile()\n</code></pre> <p>\u8b80\u53d6 JSON \u6a94\u4e2d\u6578\u64da\u5e76\u5c07\u5176\u8b8a\u6210\u5c6c\u6027</p> update_jsonfile <code>classmethod</code> <pre><code>update_jsonfile(key, value)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p> del_jsonfile <code>classmethod</code> <pre><code>del_jsonfile(key)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p>"},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.optical-functions","title":"Functions","text":""},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.optical.Q_plot","title":"Q_plot","text":"<pre><code>Q_plot(species: Literal['AS', 'AN', 'OM', 'Soil', 'SS', 'BC', 'Water'] | list[Literal['AS', 'AN', 'OM', 'Soil', 'SS', 'BC', 'Water']], x: Literal['dp', 'sp'] = 'dp', y: Literal['Q', 'MEE'] = 'Q', mode: Literal['ext', 'sca', 'abs'] = 'ext', **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a plot showing optical efficiency or mass optical efficiency for different particle species.</p> <p>Parameters:</p> Name Type Description Default <code>species</code> <code>Union[Literal['AS', 'AN', 'OM', 'Soil', 'SS', 'BC', 'Water'], list[Literal['AS', 'AN', 'OM', 'Soil', 'SS', 'BC', 'Water']]]</code> <p>The particle species or list of particle species to plot. Valid species include 'AS' (Ammonium Sulfate), 'AN' (Ammonium Nitrate), 'OM' (Organic Matter), 'Soil', 'SS' (Sea Salt), 'BC' (Black Carbon), and 'Water'.</p> required <code>x</code> <code>Literal['dp', 'sp']</code> <p>The x-axis parameter. 'dp' represents particle diameter, and 'sp' represents size parameter (alpha). Default is 'dp'.</p> <code>'dp'</code> <code>y</code> <code>Literal['Q', 'MEE']</code> <p>The y-axis parameter. 'Q' represents optical efficiency (Q_ext, Q_sca, Q_abs), and 'MEE' represents mass optical efficiency (MEE, MSE, MAE). Default is 'Q'.</p> <code>'Q'</code> <code>mode</code> <code>Literal['ext', 'sca', 'abs']</code> <p>The mode of efficiency to plot. 'ext' for extinction efficiency, 'sca' for scattering efficiency, and 'abs' for absorption efficiency. Default is 'ext'.</p> <code>'ext'</code> <code>**kwargs</code> <p>Additional keyword arguments to pass to the plot function.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object containing the generated plot.</p> <p>Examples:</p> <p>Example usage of the Q_plot function:</p> <pre><code>&gt;&gt;&gt; Q_plot('AS', x='dp', y='Q', mode='ext')\n&gt;&gt;&gt; Q_plot(['AS', 'AN'], x='sp', y='MEE')\n</code></pre>"},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.optical.RI_couple","title":"RI_couple","text":"<pre><code>RI_couple(**kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a plot to test the influence of imaginary parts on scattering and absorption efficiencies.</p> <p>Parameters:</p> Name Type Description Default <code>**kwargs</code> <p>Additional keyword arguments to pass to the plot function.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object containing the generated plot.</p> <p>Examples:</p> <p>Example usage of the IJ_couple function:</p> <pre><code>&gt;&gt;&gt; ax = RI_couple()\n</code></pre>"},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.optical.RRI_2D","title":"RRI_2D","text":"<pre><code>RRI_2D(mode: Literal['ext', 'sca', 'abs'] = 'ext', **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a 2D plot of scattering efficiency (Q) against real and imaginary parts of the refractive index.</p> <p>Parameters:</p> Name Type Description Default <code>mode</code> <code>(ext, sca, abs)</code> <p>The mode of scattering efficiency to plot: - 'ext' for extinction efficiency (Q_ext) - 'sca' for scattering efficiency (Q_sca) - 'abs' for absorption efficiency (Q_abs) Default is 'ext'.</p> <code>'ext'</code> <code>**kwargs</code> <p>Additional keyword arguments to pass to the plot function.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object containing the generated 2D plot.</p> <p>Examples:</p> <p>Example usage of the RRI_2D function:</p> <pre><code>&gt;&gt;&gt; RRI_2D(mode='sca', xlabel='Real Part (n)', ylabel='Imaginary Part (k)', title='Scattering Efficiency 2D Plot')\n</code></pre>"},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.optical.scattering_phase","title":"scattering_phase","text":"<pre><code>scattering_phase(m: complex = 1.55 + 0.01j, wave: float = 600, dp: float = 200) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a polar plot to visualize the scattering phase function.</p> <p>Parameters:</p> Name Type Description Default <code>m</code> <code>complex</code> <p>The complex refractive index of the scattering medium. Default is 1.55 + 0.01j.</p> <code>1.55 + 0.01j</code> <code>wave</code> <code>float</code> <p>The wavelength of the incident light in nanometers. Default is 600 nm.</p> <code>600</code> <code>dp</code> <code>float</code> <p>The particle diameter in nanometers. Default is 200 nm.</p> <code>200</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object containing the generated polar plot.</p> <p>Examples:</p> <p>Example usage of the scattering_phase function:</p> <pre><code>&gt;&gt;&gt; ax = scattering_phase(m=1.55 + 0.01j, wave=600, dp=200)\n</code></pre>"},{"location":"api/plot/optical/optical/#AeroViz.plot.optical.optical.response_surface","title":"response_surface","text":"<pre><code>response_surface(real_range=(1.33, 1.7), gmd_range=(10, 500), num=50, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Generate a response surface plot for sensitivity tests of extinction based on Mie scattering.</p> <p>Parameters:</p> Name Type Description Default <code>real_range</code> <code>tuple</code> <p>The range of real part (refractive index) values for sensitivity testing. Default is (1.33, 1.7).</p> <code>(1.33, 1.7)</code> <code>gmd_range</code> <code>tuple</code> <p>The range of geometric mean diameter (GMD) values for sensitivity testing. Default is (60, 400).</p> <code>(10, 500)</code> <code>num</code> <code>int</code> <p>The number of points to generate within the specified ranges. Default is 50.</p> <code>50</code> <code>**kwargs</code> <p>Additional keyword arguments to pass to the plot function.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>Axes</code> <p>Matplotlib Axes object containing the generated response surface plot.</p> <p>Examples:</p> <p>Example usage of the response_surface function:</p> <pre><code>&gt;&gt;&gt; response_surface(real_range=(1.4, 1.6), gmd_range=(100, 300), num=30, xlabel='Real Part (n)',\n...                  ylabel='GMD (nm)', zlabel='Extinction (1/Mm)', title='Sensitivity Tests of Extinction')\n</code></pre>"},{"location":"api/plot/timeseries/timeseries/","title":"timeseries","text":""},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries","title":"AeroViz.plot.timeseries","text":""},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries-functions","title":"Functions","text":""},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries.timeseries_template","title":"timeseries_template","text":"<pre><code>timeseries_template(df: DataFrame) -&gt; tuple[Figure, Axes]\n</code></pre>"},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries.timeseries_stacked","title":"timeseries_stacked","text":"<pre><code>timeseries_stacked(df, y: list[str] | str, yi: list[str] | str, label: list[str] | str, plot_type: Literal['absolute', 'percentage', 'both'] | str = 'both', rolling: int | str | None = 4, interpolate_limit: int | None = 4, major_freq: str = '10d', minor_freq: str = '1d', support_df: DataFrame | None = None, ax: Axes | None = None, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre>"},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries-modules","title":"Modules","text":""},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries.template","title":"template","text":""},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries.template-functions","title":"Functions","text":""},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries.timeseries","title":"timeseries","text":""},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries.timeseries-classes","title":"Classes","text":""},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries.timeseries.Unit","title":"Unit","text":"Functions load_jsonfile <code>classmethod</code> <pre><code>load_jsonfile()\n</code></pre> <p>\u8b80\u53d6 JSON \u6a94\u4e2d\u6578\u64da\u5e76\u5c07\u5176\u8b8a\u6210\u5c6c\u6027</p> update_jsonfile <code>classmethod</code> <pre><code>update_jsonfile(key, value)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p> del_jsonfile <code>classmethod</code> <pre><code>del_jsonfile(key)\n</code></pre> <p>\u66f4\u65b0JSON\u6a94</p>"},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries.timeseries-functions","title":"Functions","text":""},{"location":"api/plot/timeseries/timeseries/#AeroViz.plot.timeseries.timeseries.timeseries","title":"timeseries","text":"<pre><code>timeseries(df: DataFrame, y: list[str] | str, y2: list[str] | str = None, yi: list[str] | str = None, color: list[str] | str | None = None, label: list[str] | str | None = None, rolling: int | str | None = 3, interpolate_limit: int | None = 6, major_freq: str = '1MS', minor_freq: str = '10d', style: list[Literal['scatter', 'bar', 'line', 'arrow']] | str | None = None, ax: Axes | None = None, set_xaxis_visible: bool | None = None, legend_loc: Literal['best', 'upper right', 'upper left', 'lower left', 'lower right'] = 'best', legend_ncol: int = 1, **kwargs) -&gt; tuple[Figure, Axes]\n</code></pre> <p>Plot the timeseries data with the option of scatterplot, barplot, and lineplot.</p> <p>Parameters:</p> Name Type Description Default <code>df</code> <code>DataFrame</code> required <code>The</code> required <code>y</code> <code>list[str] | str</code> <p>The primary y-axis data columns.</p> required <code>y2</code> <code>list[str] | str</code> <p>The secondary y-axis data columns. Defaults to None.</p> <code>None</code> <code>yi</code> <code>list[str] | str</code> <p>The components for percentage calculation. Defaults to None.</p> <code>None</code> <code>color</code> <code>str</code> <p>The column for color mapping or the color. Defaults to None.</p> <code>None</code> <code>label</code> <code>str</code> <p>The label for the legend. Defaults to None.</p> <code>None</code> <code>rolling</code> <code>str | int | None</code> <p>Rolling window size for smoothing. Defaults to None.</p> <code>3</code> <code>interpolate_limit</code> <code>int</code> <p>Interpolation limit for missing values. Defaults to None.</p> <code>6</code> <code>major_freq</code> <code>str</code> <p>Frequency for x-axis ticks. Defaults to '1MS'.</p> <code>'1MS'</code> <code>minor_freq</code> <code>str</code> <p>Frequency for x-axis minor ticks. Defaults to '10d'.</p> <code>'10d'</code> <code>style</code> <code>Literal['scatter', 'bar', 'line'] | None</code> <p>Style of the plot. Defaults to 'scatter'.</p> <code>None</code> <code>ax</code> <code>Axes | None</code> <p>Matplotlib Axes object to plot on. Defaults to None.</p> <code>None</code> <code>set_xaxis_visible</code> <code>bool | None</code> <p>Whether to set x-axis visibility. Defaults to None.</p> <code>None</code> <code>legend_loc</code> <code>Literal['best', 'upper right', 'upper left', 'lower left', 'lower right']</code> <p>Location of the legend. Defaults to 'best'.</p> <code>'best'</code> <code>legend_ncol</code> <code>int</code> <p>Number of columns in the legend. Defaults to 1.</p> <code>1</code> <code>**kwargs</code> <code>Additional keyword arguments for customization.</code> <p>fig_kws : dict, optional     Additional keyword arguments for the figure. Defaults to {}. scatter_kws : dict, optional     Additional keyword arguments for the scatter plot. Defaults to {}. bar_kws : dict, optional     Additional keyword arguments for the bar plot. Defaults to {}. ax_plot_kws : dict, optional     Additional keyword arguments for the primary y-axis plot. Defaults to {}. ax2_plot_kws : dict, optional     Additional keyword arguments for the secondary y-axis plot. Defaults to {}. cbar_kws : dict, optional     Additional keyword arguments for the colorbar. Defaults to {}. inset_kws : dict, optional     Additional keyword arguments for the inset axes. Defaults to {}.</p> <code>{}</code> <p>Returns:</p> Name Type Description <code>ax</code> <code>AxesSubplot</code> <p>Matplotlib AxesSubplot.</p> Example <p>timeseries(df, y='WS', color='WD', scatter_kws=dict(cmap='hsv'), cbar_kws=dict(ticks=[0, 90, 180, 270, 360]), ylim=[0, None])</p>"},{"location":"guide/","title":"User Guide","text":"<p>Welcome to AeroViz! This guide will help you get started quickly.</p>"},{"location":"guide/#installation","title":"Installation","text":""},{"location":"guide/#using-pip","title":"Using pip","text":"<pre><code>pip install AeroViz\n</code></pre>"},{"location":"guide/#install-from-source","title":"Install from Source","text":"<pre><code>git clone https://github.com/alex870521/AeroViz.git\ncd AeroViz\npip install -e .\n</code></pre>"},{"location":"guide/#dependencies","title":"Dependencies","text":"<p>AeroViz requires Python 3.10+ and the following main dependencies:</p> <ul> <li>numpy, pandas, scipy</li> <li>matplotlib</li> <li>xarray (optional, for NetCDF)</li> </ul>"},{"location":"guide/#quick-start","title":"Quick Start","text":""},{"location":"guide/#1-reading-data","title":"1. Reading Data","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nfrom AeroViz import RawDataReader\n\n# Read AE33 black carbon data\ndata = RawDataReader(\n    instrument='AE33',\n    path=Path('/path/to/data'),\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 12, 31),\n    mean_freq='1h'\n)\n\n# View data\nprint(data.head())\nprint(data.columns)\n</code></pre>"},{"location":"guide/#2-data-processing","title":"2. Data Processing","text":"<pre><code>from AeroViz.dataProcess import DataProcess\n\n# Size distribution processing\ndp = DataProcess('SizeDistr', Path('./output'))\nresult = dp.basic(df_pnsd)\n\n# Chemical composition processing\ndp = DataProcess('Chemistry', Path('./output'))\nresult = dp.reconstruction_basic(df_chem)\n</code></pre>"},{"location":"guide/#3-visualization","title":"3. Visualization","text":"<pre><code>from AeroViz import plot\n\n# Time series plot\nplot.time_series(data, 'BC')\n\n# Scatter plot\nplot.scatter(data, 'BC', 'PM25')\n</code></pre>"},{"location":"guide/#core-concepts","title":"Core Concepts","text":""},{"location":"guide/#rawdatareader","title":"RawDataReader","text":"<p>A unified data reading interface supporting multiple aerosol instruments:</p> Category Instruments Black Carbon AE33, AE43, BC1054, MA350 Scattering NEPH, Aurora Size Distribution SMPS, APS, GRIMM Chemical IGAC, OCEC, Xact, VOC Mass TEOM, BAM1020 <p>See RawDataReader Tutorial</p>"},{"location":"guide/#dataprocess","title":"DataProcess","text":"<p>The data processing engine includes four modules:</p> Module Function SizeDistr Size distribution processing, merging, conversion Chemistry Mass reconstruction, ion balance, kappa calculation Optical Mie calculation, IMPROVE, RI retrieval VOC OFP, SOAP calculation <p>See DataProcess Tutorial</p>"},{"location":"guide/#plot","title":"Plot","text":"<p>The visualization module provides various chart types:</p> <ul> <li>Basic charts: scatter, bar, box, violin, pie</li> <li>Time analysis: time series, diurnal, seasonal</li> <li>Advanced charts: polar, wind rose, contour</li> </ul> <p>See Visualization Tutorial</p>"},{"location":"guide/#examples","title":"Examples","text":"Example Description Size Distribution Analysis SMPS-APS merging, distribution conversion, statistical calculation Optical Closure Analysis Mie calculation, IMPROVE, refractive index retrieval Chemical Composition Analysis Mass reconstruction, ion balance, kappa calculation VOC Analysis OFP, SOAP calculation"},{"location":"guide/#next-steps","title":"Next Steps","text":"<ul> <li>Read the Theoretical Background to understand calculation principles</li> <li>Refer to the API Documentation for detailed parameters</li> </ul>"},{"location":"guide/chemical_analysis/","title":"Chemical Composition Analysis","text":"<p>Chemical composition analysis workflow, including mass reconstruction, ion balance, hygroscopicity calculation, and gas-particle partitioning ratios.</p>"},{"location":"guide/chemical_analysis/#data-preparation","title":"Data Preparation","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nimport pandas as pd\nfrom AeroViz import RawDataReader\nfrom AeroViz.dataProcess import DataProcess\n\n# Read ion data\nigac = RawDataReader(\n    instrument='IGAC',\n    path=Path('./data/igac'),\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 3, 31)\n)\n\n# Read carbon component data\nocec = RawDataReader(\n    instrument='OCEC',\n    path=Path('./data/ocec'),\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 3, 31)\n)\n\n# Read elemental data (Xact 625i)\nxact = RawDataReader(\n    instrument='Xact',\n    path=Path('./data/xrf'),\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 3, 31)\n)\n\n# Merge data\ndf_chem = pd.concat([igac, ocec, xact], axis=1)\n</code></pre>"},{"location":"guide/chemical_analysis/#mass-reconstruction","title":"Mass Reconstruction","text":""},{"location":"guide/chemical_analysis/#basic-reconstruction","title":"Basic Reconstruction","text":"<pre><code>dp = DataProcess('Chemistry', Path('./output'))\n\n# Perform mass reconstruction\nresult = dp.reconstruction_basic(df_chem)\n\n# Main component masses\ndf_mass = result['mass']\nprint(df_mass.columns)\n# ['AS', 'AN', 'OM', 'EC', 'Soil', 'SS', 'PM25_rc']\n\n# Ammonium status\nnh4_status = result['NH4_status']\nprint(nh4_status.value_counts())\n# Balance      45\n# Excess       30\n# Deficiency   15\n</code></pre>"},{"location":"guide/chemical_analysis/#closure-check","title":"Closure Check","text":"<pre><code># Calculate closure\nclosure = df_mass['PM25_rc'] / df_chem['PM25'] * 100\n\nprint(f\"Mean closure: {closure.mean():.1f}%\")\nprint(f\"Std closure: {closure.std():.1f}%\")\n\n# Closure distribution\nimport matplotlib.pyplot as plt\nplt.hist(closure, bins=20, edgecolor='black')\nplt.xlabel('Closure (%)')\nplt.ylabel('Frequency')\nplt.axvline(100, color='r', linestyle='--', label='100%')\nplt.legend()\nplt.show()\n</code></pre>"},{"location":"guide/chemical_analysis/#component-contributions","title":"Component Contributions","text":"<pre><code># Calculate contribution ratios for each component\ncomponents = ['AS', 'AN', 'OM', 'EC', 'Soil', 'SS']\ncontributions = df_mass[components].div(df_mass['PM25_rc'], axis=0) * 100\n\nprint(\"Average contribution (%):\")\nprint(contributions.mean())\n# AS      25.3\n# AN      18.2\n# OM      35.1\n# EC       8.5\n# Soil     7.2\n# SS       5.7\n</code></pre>"},{"location":"guide/chemical_analysis/#volume-and-refractive-index-calculation","title":"Volume and Refractive Index Calculation","text":"<pre><code># Calculate volume fraction and refractive index\nvol_ri = dp.volume_RI(df_chem)\n\n# Volume fraction\ndf_volume = vol_ri['volume']\nprint(df_volume.columns)\n# ['AS_volume', 'AN_volume', 'OM_volume', 'EC_volume', 'Soil_volume', 'SS_volume']\n\n# Refractive index\ndf_RI = vol_ri['RI']\nprint(f\"Mean n: {df_RI['n'].mean():.3f}\")\nprint(f\"Mean k: {df_RI['k'].mean():.4f}\")\n</code></pre>"},{"location":"guide/chemical_analysis/#hygroscopicity-kappa-calculation","title":"Hygroscopicity (kappa) Calculation","text":"<pre><code># Requires RH data\ndf_RH = met_data[['RH']]\n\n# Calculate kappa and growth factor\nkappa_result = dp.kappa(df_chem, df_RH)\n\n# kappa value\ndf_kappa = kappa_result['kappa']\nprint(f\"Mean kappa: {df_kappa.mean():.3f}\")\n\n# Growth factor\ndf_gRH = kappa_result['gRH']\nprint(f\"Mean gRH at RH=80%: {df_gRH.mean():.2f}\")\n</code></pre>"},{"location":"guide/chemical_analysis/#kappa-vs-composition-relationship","title":"kappa vs Composition Relationship","text":"<pre><code># Analyze relationship between kappa and chemical composition\nfig, axes = plt.subplots(1, 3, figsize=(12, 4))\n\n# kappa vs SIA ratio\nsia_ratio = (df_mass['AS'] + df_mass['AN']) / df_mass['PM25_rc']\naxes[0].scatter(sia_ratio, df_kappa, alpha=0.5)\naxes[0].set_xlabel('SIA / PM2.5')\naxes[0].set_ylabel('kappa')\n\n# kappa vs OM ratio\nom_ratio = df_mass['OM'] / df_mass['PM25_rc']\naxes[1].scatter(om_ratio, df_kappa, alpha=0.5)\naxes[1].set_xlabel('OM / PM2.5')\naxes[1].set_ylabel('kappa')\n\n# kappa vs RH\naxes[2].scatter(df_RH['RH'], df_kappa, alpha=0.5)\naxes[2].set_xlabel('RH (%)')\naxes[2].set_ylabel('kappa')\n\nplt.tight_layout()\nplt.show()\n</code></pre>"},{"location":"guide/chemical_analysis/#gas-particle-partitioning-ratios","title":"Gas-Particle Partitioning Ratios","text":"<pre><code># Requires gas data\ndf_gas = gas_data[['SO2', 'NO2', 'HNO3', 'NH3']]\ndf_combined = pd.concat([df_chem, df_gas], axis=1)\n\n# Calculate partitioning ratios\npartition = dp.partition_ratios(df_combined)\n\nprint(partition.columns)\n# ['SOR', 'NOR', 'NTR', 'epsilon_ite', 'epsilon_ss']\n</code></pre>"},{"location":"guide/chemical_analysis/#partitioning-ratio-description","title":"Partitioning Ratio Description","text":"Indicator Formula Meaning SOR SO4^2-/(SO4^2-+SO2) Sulfate conversion degree NOR NO3-/(NO3-+NO2) Nitrate conversion degree NTR NO3-/(NO3-+HNO3) Nitrate partitioning epsilon_ite NO3-/(NO3-+Cl-) Nitrate vs chloride <pre><code># Analyze diurnal variation of SOR and NOR\nhourly_sor = partition['SOR'].groupby(partition.index.hour).mean()\nhourly_nor = partition['NOR'].groupby(partition.index.hour).mean()\n\nfig, ax = plt.subplots()\nax.plot(hourly_sor.index, hourly_sor.values, 'b-o', label='SOR')\nax.plot(hourly_nor.index, hourly_nor.values, 'r-o', label='NOR')\nax.set_xlabel('Hour')\nax.set_ylabel('Ratio')\nax.legend()\nplt.show()\n</code></pre>"},{"location":"guide/chemical_analysis/#ocec-ratio-analysis","title":"OC/EC Ratio Analysis","text":"<pre><code># OC/EC analysis\nocec_result = dp.ocec_ratio(df_chem[['OC', 'EC']])\n\n# OC/EC ratio\nratio = ocec_result['ratio']\nprint(f\"Mean OC/EC: {ratio.mean():.2f}\")\n\n# SOC estimation\nsoc = ocec_result['SOC']\nprint(f\"Mean SOC: {soc.mean():.2f} ug/m3\")\n</code></pre>"},{"location":"guide/chemical_analysis/#complete-analysis-script","title":"Complete Analysis Script","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom AeroViz import RawDataReader\nfrom AeroViz.dataProcess import DataProcess\n\n# 1. Read data\nigac = RawDataReader('IGAC', Path('./data'), ...)\nocec = RawDataReader('OCEC', Path('./data'), ...)\ndf_chem = pd.concat([igac, ocec], axis=1)\ndf_RH = pd.read_csv('met.csv', index_col='time', parse_dates=True)[['RH']]\n\n# 2. Initialize processor\ndp = DataProcess('Chemistry', Path('./output'))\n\n# 3. Mass reconstruction\nmass_result = dp.reconstruction_basic(df_chem)\ndf_mass = mass_result['mass']\n\n# 4. Volume and refractive index\nvol_ri = dp.volume_RI(df_chem)\ndf_RI = vol_ri['RI']\n\n# 5. Hygroscopicity\nkappa_result = dp.kappa(df_chem, df_RH)\ndf_kappa = kappa_result['kappa']\ndf_gRH = kappa_result['gRH']\n\n# 6. Output results summary\nprint(\"=== Chemical Analysis Summary ===\")\nprint(f\"PM2.5: {df_chem['PM25'].mean():.1f} +/- {df_chem['PM25'].std():.1f} ug/m3\")\nprint(f\"Closure: {(df_mass['PM25_rc']/df_chem['PM25']*100).mean():.1f}%\")\nprint(f\"RI: {df_RI['n'].mean():.3f} + {df_RI['k'].mean():.4f}i\")\nprint(f\"kappa: {df_kappa.mean():.3f} +/- {df_kappa.std():.3f}\")\n</code></pre>"},{"location":"guide/chemical_analysis/#related-topics","title":"Related Topics","text":"<ul> <li>Mass Reconstruction Theory</li> <li>kappa-Kohler Theory</li> <li>Chemistry API Reference</li> </ul>"},{"location":"guide/dataprocess/","title":"DataProcess Tutorial","text":"<p>DataProcess is the core data processing engine of AeroViz, providing four specialized modules for processing different types of aerosol data.</p>"},{"location":"guide/dataprocess/#basic-usage","title":"Basic Usage","text":"<pre><code>from pathlib import Path\nfrom AeroViz.dataProcess import DataProcess\n\n# Create processor\ndp = DataProcess('SizeDistr', Path('./output'))\n\n# Call method\nresult = dp.basic(df_pnsd)\n</code></pre>"},{"location":"guide/dataprocess/#module-overview","title":"Module Overview","text":"Module Purpose Main Methods SizeDistr Size distribution processing basic, merge_SMPS_APS_v4, distributions Chemistry Chemical composition analysis reconstruction_basic, volume_RI, kappa Optical Optical property calculation IMPROVE, Mie, retrieve_RI, derived VOC VOC reactivity assessment potential"},{"location":"guide/dataprocess/#sizedistr-module","title":"SizeDistr Module","text":""},{"location":"guide/dataprocess/#basic-processing","title":"Basic Processing","text":"<pre><code>dp = DataProcess('SizeDistr', Path('./output'))\n\n# Basic statistics\nresult = dp.basic(df_pnsd)\n# result['number']   - Number distribution\n# result['surface']  - Surface area distribution\n# result['volume']   - Volume distribution\n# result['other']    - Mode statistics\n</code></pre>"},{"location":"guide/dataprocess/#smps-aps-merging","title":"SMPS-APS Merging","text":"<pre><code># v4 version (recommended)\nresult = dp.merge_SMPS_APS_v4(\n    df_smps=smps_data,\n    df_aps=aps_data,\n    df_pm25=pm25_data  # Optional, for density correction\n)\n\n# Output\nmerged = result['data_dn']           # Merged dN\nmerged_all = result['data_dndsdv']   # dN, dS, dV\ndensity = result['density']          # Estimated density\n</code></pre>"},{"location":"guide/dataprocess/#using-sizedist-class","title":"Using SizeDist Class","text":"<pre><code>from AeroViz.dataProcess.SizeDistr import SizeDist\n\n# Create object\npsd = SizeDist(df_pnsd, state='dlogdp', weighting='n')\n\n# Distribution conversion\nsurface = psd.to_surface()\nvolume = psd.to_volume()\nextinction = psd.to_extinction(df_RI, method='internal')\ndry = psd.to_dry(df_gRH)\n\n# Statistics\nprops = psd.properties()\nstats = psd.mode_statistics()\n\n# Lung deposition\nlung = psd.lung_deposition(activity='light')\n</code></pre>"},{"location":"guide/dataprocess/#chemistry-module","title":"Chemistry Module","text":""},{"location":"guide/dataprocess/#mass-reconstruction","title":"Mass Reconstruction","text":"<pre><code>dp = DataProcess('Chemistry', Path('./output'))\n\n# Basic reconstruction\nresult = dp.reconstruction_basic(df_chem)\n# result['mass']        - Reconstructed mass (AS, AN, OM, EC, Soil, SS)\n# result['NH4_status']  - Ammonium status\n\n# Full reconstruction\nresult = dp.reconstruction_full(df_chem)\n</code></pre>"},{"location":"guide/dataprocess/#volume-and-refractive-index","title":"Volume and Refractive Index","text":"<pre><code>result = dp.volume_RI(df_chem)\n# result['volume']  - Volume fraction of each component\n# result['RI']      - Refractive index (n, k)\n</code></pre>"},{"location":"guide/dataprocess/#hygroscopicity","title":"Hygroscopicity","text":"<pre><code>result = dp.kappa(df_chem, df_RH)\n# result['kappa']  - kappa value\n# result['gRH']    - Growth factor\n</code></pre>"},{"location":"guide/dataprocess/#gas-particle-partitioning-ratios","title":"Gas-Particle Partitioning Ratios","text":"<pre><code>result = dp.partition_ratios(df_combined)\n# SOR, NOR, NTR, epsilon_ite, epsilon_ss\n</code></pre>"},{"location":"guide/dataprocess/#optical-module","title":"Optical Module","text":""},{"location":"guide/dataprocess/#improve-extinction","title":"IMPROVE Extinction","text":"<pre><code>dp = DataProcess('Optical', Path('./output'))\n\nresult = dp.IMPROVE(\n    df_mass=df_mass,     # Mass concentration\n    df_RH=df_RH,         # Relative humidity\n    method='revised'     # 'revised' or 'modified'\n)\n\n# Output\nresult['dry']   # Dry extinction\nresult['wet']   # Wet extinction\nresult['ALWC']  # Aerosol liquid water contribution\nresult['fRH']   # Hygroscopic factor\n</code></pre>"},{"location":"guide/dataprocess/#mie-calculation","title":"Mie Calculation","text":"<pre><code>result = dp.Mie(\n    df_pnsd=df_pnsd,      # Size distribution\n    df_m=df_RI,           # Refractive index\n    wave_length=550       # Wavelength (nm)\n)\n\n# Output\nresult['extinction']   # Extinction coefficient\nresult['scattering']   # Scattering coefficient\nresult['absorption']   # Absorption coefficient\n</code></pre>"},{"location":"guide/dataprocess/#refractive-index-retrieval","title":"Refractive Index Retrieval","text":"<pre><code>result = dp.retrieve_RI(\n    df_optical=df_optical,  # Measured optical properties\n    df_pnsd=df_pnsd,        # Size distribution\n    wavelength=550\n)\n\n# Output\nresult['n']  # Real part\nresult['k']  # Imaginary part\n</code></pre>"},{"location":"guide/dataprocess/#derived-parameters","title":"Derived Parameters","text":"<pre><code>result = dp.derived(\n    df_sca=neph,\n    df_abs=ae33,\n    df_ec=ocec,\n    df_no2=gas,\n    df_temp=met\n)\n\n# Output columns\n# PG, MAC, Ox, Vis_cal, fRH_IMPR, OCEC_ratio, PM1_PM25\n</code></pre>"},{"location":"guide/dataprocess/#voc-module","title":"VOC Module","text":""},{"location":"guide/dataprocess/#ofpsoap-calculation","title":"OFP/SOAP Calculation","text":"<pre><code>dp = DataProcess('VOC', Path('./output'))\n\nresult = dp.potential(df_voc)\n\n# Output\nresult['OFP']    # OFP for each species\nresult['SOAP']   # SOAP for each species\nresult['total']  # Total OFP/SOAP\n</code></pre>"},{"location":"guide/dataprocess/#input-format-requirements","title":"Input Format Requirements","text":""},{"location":"guide/dataprocess/#size-distribution","title":"Size Distribution","text":"<pre><code># Columns are particle diameters (nm)\ndf_pnsd.columns = [11.8, 13.6, 15.7, ..., 523.3]\n\n# Index is time\ndf_pnsd.index = DatetimeIndex\n</code></pre>"},{"location":"guide/dataprocess/#chemical-composition","title":"Chemical Composition","text":"<pre><code># Required columns\ncolumns = [\n    'SO42-', 'NO3-', 'NH4+',      # Ions\n    'OC', 'EC',                    # Carbon\n    'Na+', 'Cl-',                  # Sea salt\n    'Al', 'Fe', 'Ti',              # Crustal elements\n    'PM25'                         # Mass\n]\n</code></pre>"},{"location":"guide/dataprocess/#voc","title":"VOC","text":"<pre><code># Columns are species names\ndf_voc.columns = ['Benzene', 'Toluene', 'Ethylbenzene', ...]\n\n# Units: ppb or ug/m3\n</code></pre>"},{"location":"guide/dataprocess/#output-management","title":"Output Management","text":"<p>All outputs are saved to the specified output path:</p> <pre><code>dp = DataProcess('SizeDistr', Path('./output/size'))\n\n# Outputs saved to ./output/size/\n</code></pre>"},{"location":"guide/dataprocess/#related-topics","title":"Related Topics","text":"<ul> <li>SizeDistr API</li> <li>Chemistry API</li> <li>Optical API</li> <li>VOC API</li> <li>Example Gallery</li> </ul>"},{"location":"guide/optical_closure/","title":"Optical Closure Analysis","text":"<p>Optical closure verifies whether measured optical coefficients are consistent with those calculated from chemical composition/size distribution.</p>"},{"location":"guide/optical_closure/#overview","title":"Overview","text":"<p>Optical closure analysis includes multiple methods:</p> <ol> <li>IMPROVE Closure: Estimate extinction from chemical composition</li> <li>Mie Closure: Calculate extinction from size distribution</li> <li>Hybrid Closure: Combine chemical composition and size distribution</li> </ol>"},{"location":"guide/optical_closure/#data-preparation","title":"Data Preparation","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nfrom AeroViz import RawDataReader\nfrom AeroViz.dataProcess import DataProcess\n\n# Read optical data\nneph = RawDataReader('NEPH', Path('./data/neph'),\n                     datetime(2024,1,1), datetime(2024,3,31))\nae33 = RawDataReader('AE33', Path('./data/ae33'),\n                     datetime(2024,1,1), datetime(2024,3,31))\n\n# Read size distribution\nsmps = RawDataReader('SMPS', Path('./data/smps'),\n                     datetime(2024,1,1), datetime(2024,3,31))\n\n# Read chemical composition\nigac = RawDataReader('IGAC', Path('./data/igac'),\n                     datetime(2024,1,1), datetime(2024,3,31))\nocec = RawDataReader('OCEC', Path('./data/ocec'),\n                     datetime(2024,1,1), datetime(2024,3,31))\n</code></pre>"},{"location":"guide/optical_closure/#improve-closure","title":"IMPROVE Closure","text":""},{"location":"guide/optical_closure/#mass-reconstruction","title":"Mass Reconstruction","text":"<pre><code>dp_chem = DataProcess('Chemistry', Path('./output'))\n\n# Merge chemical data\ndf_chem = pd.concat([igac, ocec], axis=1)\n\n# Mass reconstruction\nmass_result = dp_chem.reconstruction_basic(df_chem)\ndf_mass = mass_result['mass']  # AS, AN, OM, Soil, SS, EC\n</code></pre>"},{"location":"guide/optical_closure/#improve-extinction-calculation","title":"IMPROVE Extinction Calculation","text":"<pre><code>dp_opt = DataProcess('Optical', Path('./output'))\n\n# Get RH data\ndf_RH = met_data[['RH']]\n\n# IMPROVE calculation\nimprove_result = dp_opt.IMPROVE(\n    df_mass=df_mass,\n    df_RH=df_RH,\n    method='revised'\n)\n\n# Output\next_dry = improve_result['dry']   # Dry extinction\next_wet = improve_result['wet']   # Wet extinction\nalwc = improve_result['ALWC']     # Aerosol liquid water contribution\nfRH = improve_result['fRH']       # Hygroscopic factor\n</code></pre>"},{"location":"guide/optical_closure/#closure-comparison","title":"Closure Comparison","text":"<pre><code>import matplotlib.pyplot as plt\n\n# Measured extinction\next_measured = neph['Sca_550'] + ae33['Abs_880']\n\n# Calculated extinction\next_calculated = ext_wet['Total_ext']\n\n# Plot comparison\nfig, ax = plt.subplots(figsize=(8, 8))\nax.scatter(ext_measured, ext_calculated, alpha=0.5)\nax.plot([0, 500], [0, 500], 'k--', label='1:1 line')\nax.set_xlabel('Measured Extinction (Mm-1)')\nax.set_ylabel('IMPROVE Extinction (Mm-1)')\nax.set_title('IMPROVE Optical Closure')\n\n# Calculate R2\nfrom scipy import stats\nslope, intercept, r, p, se = stats.linregress(ext_measured, ext_calculated)\nax.text(0.05, 0.95, f'R2 = {r**2:.3f}\\nSlope = {slope:.2f}',\n        transform=ax.transAxes, va='top')\nplt.show()\n</code></pre>"},{"location":"guide/optical_closure/#mie-closure","title":"Mie Closure","text":""},{"location":"guide/optical_closure/#calculate-refractive-index","title":"Calculate Refractive Index","text":"<pre><code># Calculate volume and refractive index from chemical composition\nri_result = dp_chem.volume_RI(df_chem)\ndf_RI = ri_result['RI']  # n, k columns\n</code></pre>"},{"location":"guide/optical_closure/#mie-extinction-calculation","title":"Mie Extinction Calculation","text":"<pre><code>from AeroViz.dataProcess.SizeDistr import SizeDist\n\n# Create PSD object\npsd = SizeDist(df_pnsd, state='dlogdp', weighting='n')\n\n# Calculate extinction\next_mie = psd.to_extinction(\n    RI=df_RI,\n    method='internal',\n    result_type='extinction'\n)\n\n# Can also calculate scattering and absorption separately\nsca_mie = psd.to_extinction(df_RI, method='internal', result_type='scattering')\nabs_mie = psd.to_extinction(df_RI, method='internal', result_type='absorption')\n</code></pre>"},{"location":"guide/optical_closure/#mixing-mode-comparison","title":"Mixing Mode Comparison","text":"<pre><code>methods = ['internal', 'external', 'core_shell']\nresults = {}\n\nfor method in methods:\n    ext = psd.to_extinction(df_RI, method=method, result_type='extinction')\n    results[method] = ext.sum(axis=1)  # Total extinction\n\n# Compare different mixing modes\nfig, ax = plt.subplots()\nfor method, ext in results.items():\n    ax.scatter(ext_measured, ext, alpha=0.5, label=method)\nax.legend()\nax.set_xlabel('Measured')\nax.set_ylabel('Calculated')\nplt.show()\n</code></pre>"},{"location":"guide/optical_closure/#refractive-index-retrieval","title":"Refractive Index Retrieval","text":""},{"location":"guide/optical_closure/#grid-search-method","title":"Grid Search Method","text":"<pre><code># Retrieve refractive index from measured optical properties and PSD\nri_retrieved = dp_opt.retrieve_RI(\n    df_optical=df_optical,  # Sca, Abs columns\n    df_pnsd=df_pnsd,\n    dlogdp=psd.dlogdp,\n    wavelength=550\n)\n\n# Output\nn_retrieved = ri_retrieved['n']  # Real part\nk_retrieved = ri_retrieved['k']  # Imaginary part\n\nprint(f\"Retrieved RI: {n_retrieved.mean():.3f} + {k_retrieved.mean():.4f}i\")\n</code></pre>"},{"location":"guide/optical_closure/#derived-optical-parameters","title":"Derived Optical Parameters","text":"<pre><code># Calculate derived parameters\nderived = dp_opt.derived(\n    df_sca=neph[['Sca_550']],\n    df_abs=ae33[['Abs_880']],\n    df_ec=ocec[['EC']],\n    df_no2=gas[['NO2']],\n    df_temp=met[['Temp']]\n)\n\n# Output\nprint(derived.columns)\n# ['PG', 'MAC', 'Ox', 'Vis_cal', 'fRH_IMPR', 'OCEC_ratio', 'PM1_PM25']\n\n# Single scattering albedo\nSSA = derived['Sca'] / (derived['Sca'] + derived['Abs'])\n</code></pre>"},{"location":"guide/optical_closure/#complete-closure-analysis-script","title":"Complete Closure Analysis Script","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom AeroViz import RawDataReader\nfrom AeroViz.dataProcess import DataProcess\nfrom AeroViz.dataProcess.SizeDistr import SizeDist\n\n# 1. Read all data\nneph = RawDataReader('NEPH', Path('./data'), ...)\nae33 = RawDataReader('AE33', Path('./data'), ...)\nsmps = RawDataReader('SMPS', Path('./data'), ...)\ndf_chem = pd.read_csv('chemistry.csv', parse_dates=['time'], index_col='time')\ndf_RH = pd.read_csv('met.csv', parse_dates=['time'], index_col='time')[['RH']]\n\n# 2. Initialize processors\ndp_chem = DataProcess('Chemistry', Path('./output'))\ndp_opt = DataProcess('Optical', Path('./output'))\n\n# 3. Mass reconstruction and refractive index\nmass = dp_chem.reconstruction_basic(df_chem)['mass']\nri = dp_chem.volume_RI(df_chem)['RI']\n\n# 4. IMPROVE closure\nimprove = dp_opt.IMPROVE(mass, df_RH, method='revised')\next_improve = improve['wet']['Total_ext']\n\n# 5. Mie closure\npsd = SizeDist(smps, state='dlogdp', weighting='n')\next_mie = psd.to_extinction(ri, method='internal').sum(axis=1)\n\n# 6. Measured extinction\next_measured = neph['Sca_550'] + ae33['Abs_880']\n\n# 7. Compare results\nfig, axes = plt.subplots(1, 2, figsize=(12, 5))\n\naxes[0].scatter(ext_measured, ext_improve, alpha=0.5)\naxes[0].set_title('IMPROVE Closure')\n\naxes[1].scatter(ext_measured, ext_mie, alpha=0.5)\naxes[1].set_title('Mie Closure')\n\nfor ax in axes:\n    ax.plot([0, 500], [0, 500], 'k--')\n    ax.set_xlabel('Measured (Mm-1)')\n    ax.set_ylabel('Calculated (Mm-1)')\n\nplt.tight_layout()\nplt.savefig('optical_closure.png', dpi=300)\n</code></pre>"},{"location":"guide/optical_closure/#related-topics","title":"Related Topics","text":"<ul> <li>Mie Scattering Theory</li> <li>IMPROVE Extinction Equation</li> <li>Optical API Reference</li> </ul>"},{"location":"guide/rawdatareader/","title":"RawDataReader Tutorial","text":"<p>RawDataReader is the core data reading component of AeroViz, providing a unified interface for reading various aerosol instrument data.</p>"},{"location":"guide/rawdatareader/#basic-usage","title":"Basic Usage","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nfrom AeroViz import RawDataReader\n\ndata = RawDataReader(\n    instrument='AE33',           # Instrument type\n    path=Path('/path/to/data'),  # Data path\n    start=datetime(2024, 1, 1),  # Start time\n    end=datetime(2024, 12, 31),  # End time\n    mean_freq='1h'               # Averaging frequency\n)\n</code></pre>"},{"location":"guide/rawdatareader/#parameter-description","title":"Parameter Description","text":"Parameter Type Description <code>instrument</code> str Instrument name <code>path</code> Path Data folder path <code>start</code> datetime Start time <code>end</code> datetime End time <code>mean_freq</code> str Averaging frequency ('1h', '30min', '1D') <code>reset</code> bool Force re-read (ignore cache) <code>qc</code> str QC report frequency ('1MS', '1D')"},{"location":"guide/rawdatareader/#supported-instruments","title":"Supported Instruments","text":""},{"location":"guide/rawdatareader/#black-carbon-absorption","title":"Black Carbon / Absorption","text":"<pre><code># AE33 - Magee Scientific 7-wavelength\nae33 = RawDataReader('AE33', path, start, end)\n\n# AE43 - Real-time black carbon\nae43 = RawDataReader('AE43', path, start, end)\n\n# BC1054 - MetOne high resolution\nbc1054 = RawDataReader('BC1054', path, start, end)\n\n# MA350 - AethLabs multi-angle\nma350 = RawDataReader('MA350', path, start, end)\n</code></pre>"},{"location":"guide/rawdatareader/#scattering","title":"Scattering","text":"<pre><code># NEPH - TSI integrating nephelometer\nneph = RawDataReader('NEPH', path, start, end)\n\n# Aurora - Ecotech 3-wavelength\naurora = RawDataReader('Aurora', path, start, end)\n</code></pre>"},{"location":"guide/rawdatareader/#size-distribution","title":"Size Distribution","text":"<pre><code># SMPS - Scanning Mobility Particle Sizer\nsmps = RawDataReader('SMPS', path, start, end, size_range=(11.8, 593.5))\n\n# APS - Aerodynamic Particle Sizer\naps = RawDataReader('APS', path, start, end)\n\n# GRIMM - Optical Particle Sizer\ngrimm = RawDataReader('GRIMM', path, start, end)\n</code></pre>"},{"location":"guide/rawdatareader/#chemical-composition","title":"Chemical Composition","text":"<pre><code># IGAC - Ion Chromatograph\nigac = RawDataReader('IGAC', path, start, end)\n\n# OCEC - Organic Carbon/Elemental Carbon Analyzer\nocec = RawDataReader('OCEC', path, start, end)\n\n# Xact - Xact 625i XRF Analyzer\nxact = RawDataReader('Xact', path, start, end)\n\n# VOC - Volatile Organic Compounds Monitor\nvoc = RawDataReader('VOC', path, start, end)\n</code></pre>"},{"location":"guide/rawdatareader/#quality-control","title":"Quality Control","text":""},{"location":"guide/rawdatareader/#qc-report","title":"QC Report","text":"<pre><code># Monthly QC report\ndata = RawDataReader(\n    instrument='AE33',\n    path=path,\n    start=start,\n    end=end,\n    qc='1MS'  # Monthly report\n)\n</code></pre> <p>Output example: <pre><code>&gt; Processing: 2024-01-01 to 2024-01-31\n    &gt; BC Mass Conc. (880 nm)\n        +-- Sample Rate    :  100.0%\n        +-- Valid  Rate    :   99.5%\n        +-- Total  Rate    :   99.5%\n</code></pre></p>"},{"location":"guide/rawdatareader/#force-re-read","title":"Force Re-read","text":"<pre><code># Ignore cache, re-read raw files\ndata = RawDataReader(\n    instrument='AE33',\n    path=path,\n    reset=True\n)\n</code></pre>"},{"location":"guide/rawdatareader/#output-files","title":"Output Files","text":"<p>After processing, files are generated in <code>{instrument}_outputs/</code>:</p> File Description <code>_read_{inst}_raw.csv</code> Merged raw data <code>_read_{inst}_raw.pkl</code> Raw data (pickle) <code>_read_{inst}.csv</code> QC processed data <code>_read_{inst}.pkl</code> QC data (pickle) <code>Output_{inst}</code> Final processed data <code>{inst}.log</code> Processing log"},{"location":"guide/rawdatareader/#advanced-usage","title":"Advanced Usage","text":""},{"location":"guide/rawdatareader/#specify-size-range-smpsaps","title":"Specify Size Range (SMPS/APS)","text":"<pre><code>smps = RawDataReader(\n    instrument='SMPS',\n    path=path,\n    start=start,\n    end=end,\n    size_range=(10, 500)  # nm\n)\n</code></pre>"},{"location":"guide/rawdatareader/#multi-instrument-integration","title":"Multi-instrument Integration","text":"<pre><code># Read multiple instruments\nae33 = RawDataReader('AE33', path_ae33, start, end)\nneph = RawDataReader('NEPH', path_neph, start, end)\nsmps = RawDataReader('SMPS', path_smps, start, end)\n\n# Merge using pandas\nimport pandas as pd\ncombined = pd.concat([ae33, neph, smps], axis=1)\n</code></pre>"},{"location":"guide/rawdatareader/#common-issues","title":"Common Issues","text":""},{"location":"guide/rawdatareader/#data-path-format","title":"Data Path Format","text":"<pre><code># Correct\npath = Path('/Users/name/data/AE33')\n\n# Also works\npath = Path('./data/AE33')\n</code></pre>"},{"location":"guide/rawdatareader/#time-format","title":"Time Format","text":"<pre><code>from datetime import datetime\n\n# Correct\nstart = datetime(2024, 1, 1)\nend = datetime(2024, 12, 31)\n\n# Can also specify hours, minutes, seconds\nstart = datetime(2024, 1, 1, 0, 0, 0)\nend = datetime(2024, 12, 31, 23, 59, 59)\n</code></pre>"},{"location":"guide/rawdatareader/#insufficient-memory","title":"Insufficient Memory","text":"<p>For large datasets, read in segments:</p> <pre><code># Read by month\nfor month in range(1, 13):\n    start = datetime(2024, month, 1)\n    end = datetime(2024, month + 1, 1) if month &lt; 12 else datetime(2025, 1, 1)\n    data = RawDataReader('AE33', path, start, end)\n    # Process...\n</code></pre>"},{"location":"guide/rawdatareader/#related-topics","title":"Related Topics","text":"<ul> <li>API Reference</li> <li>Supported Instruments List</li> </ul>"},{"location":"guide/size_distribution/","title":"Size Distribution Analysis","text":"<p>A complete size distribution processing workflow, including SMPS-APS merging, distribution conversion, mode statistics, and lung deposition calculation.</p>"},{"location":"guide/size_distribution/#data-preparation","title":"Data Preparation","text":""},{"location":"guide/size_distribution/#reading-smps-and-aps-data","title":"Reading SMPS and APS Data","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nfrom AeroViz import RawDataReader\n\n# Read SMPS (10-600 nm)\nsmps = RawDataReader(\n    instrument='SMPS',\n    path=Path('/path/to/smps'),\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 3, 31),\n    mean_freq='1h'\n)\n\n# Read APS (0.5-20 um)\naps = RawDataReader(\n    instrument='APS',\n    path=Path('/path/to/aps'),\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 3, 31),\n    mean_freq='1h'\n)\n</code></pre>"},{"location":"guide/size_distribution/#smps-aps-merging","title":"SMPS-APS Merging","text":""},{"location":"guide/size_distribution/#basic-merging","title":"Basic Merging","text":"<pre><code>from AeroViz.dataProcess import DataProcess\n\ndp = DataProcess('SizeDistr', Path('./output'))\n\n# v4 merging (recommended, with PM2.5 correction)\nresult = dp.merge_SMPS_APS_v4(\n    df_smps=smps,\n    df_aps=aps,\n    df_pm25=pm25_data  # Optional, for density correction\n)\n\n# Output\nmerged_pnsd = result['data_dn']       # Merged dN\nmerged_dndsdv = result['data_dndsdv'] # dN, dS, dV distributions\ndensity = result['density']           # Estimated particle density\n</code></pre>"},{"location":"guide/size_distribution/#merging-parameter-description","title":"Merging Parameter Description","text":"Parameter Description <code>overlap_range</code> SMPS-APS overlap range (default 500-700 nm) <code>shift_mode</code> APS diameter shift mode <code>density_range</code> Density search range (default 1.0-2.5 g/cm3)"},{"location":"guide/size_distribution/#distribution-conversion-and-statistics","title":"Distribution Conversion and Statistics","text":""},{"location":"guide/size_distribution/#using-sizedist-class","title":"Using SizeDist Class","text":"<pre><code>from AeroViz.dataProcess.SizeDistr import SizeDist\n\n# Create PSD object\npsd = SizeDist(merged_pnsd, state='dlogdp', weighting='n')\n\n# Distribution conversion\nsurface = psd.to_surface()  # Surface area distribution (nm2/cm3)\nvolume = psd.to_volume()    # Volume distribution (nm3/cm3)\n\n# Basic statistics\nprops = psd.properties()\nprint(f\"Total N: {props['total_n']:.0f} #/cm3\")\nprint(f\"GMD: {props['GMD_n']:.1f} nm\")\nprint(f\"GSD: {props['GSD_n']:.2f}\")\n</code></pre>"},{"location":"guide/size_distribution/#mode-statistics","title":"Mode Statistics","text":"<pre><code># Calculate mode statistics\nstats = psd.mode_statistics()\n\n# Mode distributions\nnucleation = stats['number']['Nucleation']   # 10-25 nm\naitken = stats['number']['Aitken']           # 25-100 nm\naccumulation = stats['number']['Accumulation']  # 100-1000 nm\ncoarse = stats['number']['Coarse']           # 1000-2500 nm\n\n# Statistical summary\nsummary = stats['statistics']\nprint(summary)\n#                 GMD    GSD   total    mode\n# Nucleation     18.2   1.45    2500    17.5\n# Aitken         52.3   1.62    5200    48.0\n# Accumulation  185.0   1.85    1800   160.0\n# Coarse        1850    2.10     120  1500.0\n</code></pre>"},{"location":"guide/size_distribution/#extinction-distribution-calculation","title":"Extinction Distribution Calculation","text":""},{"location":"guide/size_distribution/#requires-refractive-index-data","title":"Requires Refractive Index Data","text":"<pre><code># Calculate refractive index from chemical composition\ndp_chem = DataProcess('Chemistry', Path('./output'))\nri_result = dp_chem.volume_RI(df_chem)\ndf_RI = ri_result['RI']  # n, k columns\n\n# Calculate extinction distribution\next_dist = psd.to_extinction(\n    RI=df_RI,\n    method='internal',      # Mixing mode\n    result_type='extinction'\n)\n</code></pre>"},{"location":"guide/size_distribution/#dry-psd-calculation","title":"Dry PSD Calculation","text":""},{"location":"guide/size_distribution/#hygroscopic-correction","title":"Hygroscopic Correction","text":"<pre><code># Calculate growth factor\nkappa_result = dp_chem.kappa(df_chem, df_RH)\ndf_gRH = kappa_result[['gRH']]\n\n# Convert to dry PSD\ndry_psd = psd.to_dry(df_gRH, uniform=True)\n</code></pre>"},{"location":"guide/size_distribution/#lung-deposition-calculation","title":"Lung Deposition Calculation","text":""},{"location":"guide/size_distribution/#icrp-66-model","title":"ICRP 66 Model","text":"<pre><code># Calculate lung deposition\nlung = psd.lung_deposition(activity='light')\n\n# Deposition fractions\ndf_fraction = lung['DF']\nprint(df_fraction.mean())\n#    HA     TB     AL    Total\n# 0.025  0.082  0.245    0.352\n\n# Regional dose\ndose = lung['dose']\nprint(f\"Alveolar dose: {dose['AL'].mean():.0f} #/cm3\")\n\n# Deposited distribution\ndeposited = lung['deposited']  # Number deposited at each size\n</code></pre>"},{"location":"guide/size_distribution/#activity-level-comparison","title":"Activity Level Comparison","text":"<pre><code>activities = ['sleep', 'sitting', 'light', 'heavy']\nresults = {}\n\nfor act in activities:\n    result = psd.lung_deposition(activity=act)\n    results[act] = result['total_dose'].mean()\n\nprint(\"Total deposition by activity:\")\nfor act, dose in results.items():\n    print(f\"  {act}: {dose:.0f} #/cm3\")\n</code></pre>"},{"location":"guide/size_distribution/#complete-example-script","title":"Complete Example Script","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nfrom AeroViz import RawDataReader\nfrom AeroViz.dataProcess import DataProcess\nfrom AeroViz.dataProcess.SizeDistr import SizeDist\n\n# 1. Read data\nsmps = RawDataReader('SMPS', Path('./data/smps'),\n                     datetime(2024,1,1), datetime(2024,3,31))\naps = RawDataReader('APS', Path('./data/aps'),\n                    datetime(2024,1,1), datetime(2024,3,31))\n\n# 2. Merge SMPS-APS\ndp = DataProcess('SizeDistr', Path('./output'))\nmerged = dp.merge_SMPS_APS_v4(smps, aps)\ndf_pnsd = merged['data_dn']\n\n# 3. Create SizeDist object\npsd = SizeDist(df_pnsd, state='dlogdp', weighting='n')\n\n# 4. Distribution conversion\nsurface = psd.to_surface()\nvolume = psd.to_volume()\n\n# 5. Statistical analysis\nprops = psd.properties()\nstats = psd.mode_statistics()\n\n# 6. Lung deposition\nlung = psd.lung_deposition(activity='light')\n\n# 7. Output results\nprint(f\"Average total N: {props['total_n'].mean():.0f} #/cm3\")\nprint(f\"Average GMD: {props['GMD_n'].mean():.1f} nm\")\nprint(f\"Average lung deposition: {lung['total_dose'].mean():.0f} #/cm3\")\n</code></pre>"},{"location":"guide/size_distribution/#related-topics","title":"Related Topics","text":"<ul> <li>Log-normal Distribution Theory</li> <li>ICRP 66 Lung Deposition Model</li> <li>SizeDistr API Reference</li> </ul>"},{"location":"guide/visualization/","title":"Visualization Tutorial","text":"<p>AeroViz provides rich visualization tools for aerosol data analysis and publication.</p>"},{"location":"guide/visualization/#basic-usage","title":"Basic Usage","text":"<pre><code>from AeroViz import plot\n\n# Scatter plot\nplot.scatter(data, x='BC', y='PM25')\n\n# Time series\nplot.time_series(data, 'BC')\n</code></pre>"},{"location":"guide/visualization/#basic-charts","title":"Basic Charts","text":""},{"location":"guide/visualization/#scatter-plot","title":"Scatter Plot","text":"<pre><code>from AeroViz.plot import scatter\n\n# Basic scatter plot\nscatter(data, x='BC', y='PM25')\n\n# With regression line\nscatter(data, x='BC', y='PM25', regression=True)\n\n# Color mapping\nscatter(data, x='BC', y='PM25', c='RH', cmap='viridis')\n</code></pre>"},{"location":"guide/visualization/#regression-analysis","title":"Regression Analysis","text":"<pre><code>from AeroViz.plot import regression\n\n# Linear regression\nregression(data, x='BC', y='PM25', method='linear')\n\n# Polynomial regression\nregression(data, x='BC', y='PM25', method='polynomial', degree=2)\n</code></pre>"},{"location":"guide/visualization/#box-plot","title":"Box Plot","text":"<pre><code>from AeroViz.plot import box\n\n# Group by category\nbox(data, x='season', y='BC')\n\n# By month\ndata['month'] = data.index.month\nbox(data, x='month', y='PM25')\n</code></pre>"},{"location":"guide/visualization/#bar-chart","title":"Bar Chart","text":"<pre><code>from AeroViz.plot import bar\n\n# Component contributions\ncomponents = ['AS', 'AN', 'OM', 'EC', 'Soil', 'SS']\nbar(data[components].mean(), ylabel='Mass (ug/m3)')\n</code></pre>"},{"location":"guide/visualization/#violin-plot","title":"Violin Plot","text":"<pre><code>from AeroViz.plot import violin\n\n# Distribution comparison\nviolin(data, x='season', y='BC')\n</code></pre>"},{"location":"guide/visualization/#pie-chart","title":"Pie Chart","text":"<pre><code>from AeroViz.plot import pie\n\n# Component proportions\npie(data[components].mean(), labels=components)\n</code></pre>"},{"location":"guide/visualization/#time-analysis-charts","title":"Time Analysis Charts","text":""},{"location":"guide/visualization/#time-series","title":"Time Series","text":"<pre><code># Single variable\nplot.time_series(data, 'BC')\n\n# Multiple variables\nplot.time_series(data, ['BC', 'PM25', 'PM10'])\n</code></pre>"},{"location":"guide/visualization/#diurnal-variation","title":"Diurnal Variation","text":"<pre><code># Single variable diurnal pattern\nplot.diurnal(data, 'BC')\n\n# Multiple variable comparison\nplot.diurnal(data, ['BC', 'PM25'])\n</code></pre>"},{"location":"guide/visualization/#weekly-variation","title":"Weekly Variation","text":"<pre><code>plot.weekly(data, 'BC')\n</code></pre>"},{"location":"guide/visualization/#monthly-variation","title":"Monthly Variation","text":"<pre><code>plot.monthly(data, 'BC')\n</code></pre>"},{"location":"guide/visualization/#advanced-charts","title":"Advanced Charts","text":""},{"location":"guide/visualization/#size-distribution","title":"Size Distribution","text":"<pre><code># Time-size contour plot\nplot.size_contour(df_pnsd)\n\n# Average distribution\nplot.size_distribution(df_pnsd.mean())\n</code></pre>"},{"location":"guide/visualization/#polar-plots","title":"Polar Plots","text":"<pre><code># Wind rose\nplot.wind_rose(data, ws='WS', wd='WD')\n\n# Polar pollutant plot\nplot.polar(data, pollutant='BC', ws='WS', wd='WD')\n</code></pre>"},{"location":"guide/visualization/#correlation-matrix","title":"Correlation Matrix","text":"<pre><code># Correlation heatmap\nvars = ['BC', 'PM25', 'PM10', 'NO2', 'O3']\nplot.correlation_matrix(data[vars])\n</code></pre>"},{"location":"guide/visualization/#chart-customization","title":"Chart Customization","text":""},{"location":"guide/visualization/#basic-settings","title":"Basic Settings","text":"<pre><code>import matplotlib.pyplot as plt\n\n# Set style\nplt.style.use('seaborn-v0_8-paper')\n\n# Custom chart\nfig, ax = plt.subplots(figsize=(10, 6))\nscatter(data, x='BC', y='PM25', ax=ax)\nax.set_title('BC vs PM2.5')\nax.set_xlabel('BC (ug/m3)')\nax.set_ylabel('PM2.5 (ug/m3)')\n</code></pre>"},{"location":"guide/visualization/#multi-panel-figures","title":"Multi-panel Figures","text":"<pre><code>fig, axes = plt.subplots(2, 2, figsize=(12, 10))\n\nscatter(data, 'BC', 'PM25', ax=axes[0,0])\nbox(data, 'season', 'BC', ax=axes[0,1])\nplot.diurnal(data, 'BC', ax=axes[1,0])\nplot.monthly(data, 'BC', ax=axes[1,1])\n\nplt.tight_layout()\n</code></pre>"},{"location":"guide/visualization/#saving-figures","title":"Saving Figures","text":"<pre><code># High resolution PNG\nplt.savefig('figure.png', dpi=300, bbox_inches='tight')\n\n# Vector formats\nplt.savefig('figure.pdf', format='pdf', bbox_inches='tight')\nplt.savefig('figure.svg', format='svg', bbox_inches='tight')\n</code></pre>"},{"location":"guide/visualization/#publication-quality-settings","title":"Publication Quality Settings","text":""},{"location":"guide/visualization/#font-settings","title":"Font Settings","text":"<pre><code>import matplotlib.pyplot as plt\n\nplt.rcParams.update({\n    'font.family': 'Arial',\n    'font.size': 12,\n    'axes.labelsize': 14,\n    'axes.titlesize': 16,\n    'xtick.labelsize': 12,\n    'ytick.labelsize': 12,\n    'legend.fontsize': 11,\n})\n</code></pre>"},{"location":"guide/visualization/#color-settings","title":"Color Settings","text":"<pre><code># Use colorblind-friendly palette\ncolors = ['#0077BB', '#EE7733', '#009988', '#CC3311']\n\n# Or use ColorBrewer\nfrom matplotlib.cm import get_cmap\ncmap = get_cmap('Set2')\n</code></pre>"},{"location":"guide/visualization/#figure-dimensions","title":"Figure Dimensions","text":"<p>Common journal requirements:</p> Journal Single Column Width Double Column Width ACP 8.3 cm 17.6 cm ES&amp;T 8.5 cm 17.8 cm JGR 8.4 cm 17.4 cm <pre><code># Single column figure\nfig, ax = plt.subplots(figsize=(3.27, 2.5))  # 8.3 cm\n\n# Double column figure\nfig, ax = plt.subplots(figsize=(6.93, 4))    # 17.6 cm\n</code></pre>"},{"location":"guide/visualization/#related-topics","title":"Related Topics","text":"<ul> <li>Plot API Reference</li> <li>Example Gallery</li> </ul>"},{"location":"guide/voc_analysis/","title":"VOC Analysis","text":"<p>Volatile Organic Compounds (VOC) analysis workflow, including OFP and SOAP calculation.</p>"},{"location":"guide/voc_analysis/#data-preparation","title":"Data Preparation","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nfrom AeroViz import RawDataReader\nfrom AeroViz.dataProcess import DataProcess\n\n# Read VOC data\nvoc = RawDataReader(\n    instrument='VOC',\n    path=Path('./data/voc'),\n    start=datetime(2024, 1, 1),\n    end=datetime(2024, 3, 31),\n    mean_freq='1h'\n)\n\n# View available species\nprint(voc.columns.tolist())\n# ['Ethane', 'Propane', 'Butane', 'Benzene', 'Toluene', ...]\n</code></pre>"},{"location":"guide/voc_analysis/#ofpsoap-calculation","title":"OFP/SOAP Calculation","text":""},{"location":"guide/voc_analysis/#basic-calculation","title":"Basic Calculation","text":"<pre><code>dp = DataProcess('VOC', Path('./output'))\n\n# Calculate ozone formation potential\nresult = dp.potential(voc)\n\n# OFP for each species\ndf_ofp = result['OFP']\nprint(df_ofp.columns.tolist())\n# ['Ethane_OFP', 'Propane_OFP', 'Benzene_OFP', 'Toluene_OFP', ...]\n\n# SOAP for each species\ndf_soap = result['SOAP']\n\n# Total OFP/SOAP\ndf_total = result['total']\nprint(f\"Mean total OFP: {df_total['OFP'].mean():.1f} ug O3/m3\")\nprint(f\"Mean total SOAP: {df_total['SOAP'].mean():.2f}\")\n</code></pre>"},{"location":"guide/voc_analysis/#species-contribution-analysis","title":"Species Contribution Analysis","text":""},{"location":"guide/voc_analysis/#top-10-contributing-species","title":"Top 10 Contributing Species","text":"<pre><code># Calculate mean OFP contribution for each species\nmean_ofp = df_ofp.mean().sort_values(ascending=False)\n\n# Top 10\ntop10 = mean_ofp.head(10)\nprint(\"Top 10 OFP contributors:\")\nfor species, value in top10.items():\n    print(f\"  {species}: {value:.1f} ug O3/m3\")\n</code></pre>"},{"location":"guide/voc_analysis/#species-contribution-ratio","title":"Species Contribution Ratio","text":"<pre><code>import matplotlib.pyplot as plt\n\n# Calculate contribution ratio\ntotal_ofp = df_ofp.sum(axis=1)\ncontribution = df_ofp.div(total_ofp, axis=0) * 100\n\n# Mean contribution ratio\nmean_contrib = contribution.mean().sort_values(ascending=False)\n\n# Plot pie chart (Top 8 + Others)\ntop8 = mean_contrib.head(8)\nothers = mean_contrib[8:].sum()\nplot_data = pd.concat([top8, pd.Series({'Others': others})])\n\nfig, ax = plt.subplots(figsize=(10, 8))\nax.pie(plot_data, labels=plot_data.index, autopct='%1.1f%%')\nax.set_title('OFP Contribution by Species')\nplt.show()\n</code></pre>"},{"location":"guide/voc_analysis/#analysis-by-chemical-category","title":"Analysis by Chemical Category","text":"<pre><code># Define chemical categories\ncategories = {\n    'Alkanes': ['Ethane', 'Propane', 'Butane', 'Pentane', 'Hexane'],\n    'Alkenes': ['Ethene', 'Propene', 'Butene', 'Isoprene'],\n    'Aromatics': ['Benzene', 'Toluene', 'Ethylbenzene', 'Xylene'],\n    'OVOCs': ['Formaldehyde', 'Acetaldehyde', 'Acetone']\n}\n\n# Calculate OFP for each category\ncategory_ofp = {}\nfor cat, species in categories.items():\n    # Find matching columns\n    cols = [c for c in df_ofp.columns if any(s in c for s in species)]\n    if cols:\n        category_ofp[cat] = df_ofp[cols].sum(axis=1)\n\ndf_cat_ofp = pd.DataFrame(category_ofp)\n\n# Plot stacked bar chart\nfig, ax = plt.subplots(figsize=(12, 6))\ndf_cat_ofp.resample('D').mean().plot(kind='bar', stacked=True, ax=ax)\nax.set_ylabel('OFP (ug O3/m3)')\nax.set_title('Daily OFP by Chemical Category')\nplt.tight_layout()\nplt.show()\n</code></pre>"},{"location":"guide/voc_analysis/#temporal-variation-analysis","title":"Temporal Variation Analysis","text":""},{"location":"guide/voc_analysis/#diurnal-variation","title":"Diurnal Variation","text":"<pre><code># Calculate diurnal variation of total OFP\nhourly = df_total['OFP'].groupby(df_total.index.hour).agg(['mean', 'std'])\n\nfig, ax = plt.subplots(figsize=(10, 5))\nax.plot(hourly.index, hourly['mean'], 'b-o')\nax.fill_between(hourly.index,\n                hourly['mean'] - hourly['std'],\n                hourly['mean'] + hourly['std'],\n                alpha=0.3)\nax.set_xlabel('Hour')\nax.set_ylabel('OFP (ug O3/m3)')\nax.set_title('Diurnal Variation of Total OFP')\nax.set_xticks(range(0, 24, 3))\nplt.show()\n</code></pre>"},{"location":"guide/voc_analysis/#seasonal-variation","title":"Seasonal Variation","text":"<pre><code># Monthly average\nmonthly = df_total['OFP'].resample('M').mean()\n\nfig, ax = plt.subplots(figsize=(10, 5))\nmonthly.plot(kind='bar', ax=ax)\nax.set_ylabel('OFP (ug O3/m3)')\nax.set_title('Monthly Average OFP')\nplt.show()\n</code></pre>"},{"location":"guide/voc_analysis/#ofp-vs-soap-relationship","title":"OFP vs SOAP Relationship","text":"<pre><code>fig, ax = plt.subplots(figsize=(8, 8))\nax.scatter(df_total['OFP'], df_total['SOAP'], alpha=0.5)\nax.set_xlabel('Total OFP (ug O3/m3)')\nax.set_ylabel('Total SOAP')\nax.set_title('OFP vs SOAP Relationship')\n\n# Correlation\nfrom scipy import stats\nr, p = stats.pearsonr(df_total['OFP'].dropna(), df_total['SOAP'].dropna())\nax.text(0.05, 0.95, f'r = {r:.3f}\\np &lt; 0.001' if p &lt; 0.001 else f'r = {r:.3f}\\np = {p:.3f}',\n        transform=ax.transAxes, va='top')\nplt.show()\n</code></pre>"},{"location":"guide/voc_analysis/#complete-analysis-script","title":"Complete Analysis Script","text":"<pre><code>from datetime import datetime\nfrom pathlib import Path\nimport pandas as pd\nimport matplotlib.pyplot as plt\nfrom AeroViz import RawDataReader\nfrom AeroViz.dataProcess import DataProcess\n\n# 1. Read VOC data\nvoc = RawDataReader('VOC', Path('./data/voc'),\n                    datetime(2024, 1, 1), datetime(2024, 3, 31))\n\n# 2. Calculate OFP/SOAP\ndp = DataProcess('VOC', Path('./output'))\nresult = dp.potential(voc)\n\ndf_ofp = result['OFP']\ndf_soap = result['SOAP']\ndf_total = result['total']\n\n# 3. Species contribution analysis\nmean_ofp = df_ofp.mean().sort_values(ascending=False)\nprint(\"=== Top 5 OFP Contributors ===\")\nfor i, (species, value) in enumerate(mean_ofp.head(5).items(), 1):\n    pct = value / df_total['OFP'].mean() * 100\n    print(f\"{i}. {species}: {value:.1f} ug O3/m3 ({pct:.1f}%)\")\n\n# 4. Output results summary\nprint(\"\\n=== VOC Analysis Summary ===\")\nprint(f\"Total OFP: {df_total['OFP'].mean():.1f} +/- {df_total['OFP'].std():.1f} ug O3/m3\")\nprint(f\"Total SOAP: {df_total['SOAP'].mean():.2f} +/- {df_total['SOAP'].std():.2f}\")\n\n# 5. Plot contribution chart\nfig, axes = plt.subplots(1, 2, figsize=(14, 5))\n\n# OFP contribution\ntop10_ofp = mean_ofp.head(10)\naxes[0].barh(range(10), top10_ofp.values)\naxes[0].set_yticks(range(10))\naxes[0].set_yticklabels([s.replace('_OFP', '') for s in top10_ofp.index])\naxes[0].set_xlabel('OFP (ug O3/m3)')\naxes[0].set_title('Top 10 OFP Contributors')\n\n# Diurnal variation\nhourly = df_total['OFP'].groupby(df_total.index.hour).mean()\naxes[1].plot(hourly.index, hourly.values, 'b-o')\naxes[1].set_xlabel('Hour')\naxes[1].set_ylabel('OFP (ug O3/m3)')\naxes[1].set_title('Diurnal Pattern')\n\nplt.tight_layout()\nplt.savefig('voc_analysis.png', dpi=300)\n</code></pre>"},{"location":"guide/voc_analysis/#related-topics","title":"Related Topics","text":"<ul> <li>Ozone Formation Potential Theory</li> <li>VOC API Reference</li> </ul>"},{"location":"theory/","title":"Theoretical Background","text":"<p>This section introduces the aerosol science theories and calculation methods used in AeroViz.</p>"},{"location":"theory/#optical-properties","title":"Optical Properties","text":""},{"location":"theory/#mie-scattering-theory","title":"Mie Scattering Theory","text":"<p>Mie theory describes the scattering and absorption of electromagnetic waves by spherical particles and is the foundation for calculating aerosol optical properties.</p> <ul> <li>Extinction, scattering, and absorption efficiency factors</li> <li>Internal mixing vs external mixing vs core-shell structure</li> <li>Effects of refractive index and particle size</li> </ul>"},{"location":"theory/#improve-extinction-equation","title":"IMPROVE Extinction Equation","text":"<p>The IMPROVE (Interagency Monitoring of Protected Visual Environments) equation is used to estimate extinction coefficients from chemical composition.</p> <ul> <li>Original version vs revised version</li> <li>Hygroscopic growth factor f(RH)</li> <li>Mass extinction efficiency of each component</li> </ul>"},{"location":"theory/#size-distribution","title":"Size Distribution","text":""},{"location":"theory/#log-normal-distribution","title":"Log-normal Distribution","text":"<p>Aerosol size distributions typically follow log-normal distributions and can be characterized by geometric mean diameter (GMD) and geometric standard deviation (GSD).</p> <ul> <li>Number/surface area/volume distribution conversion</li> <li>Modal analysis (Nucleation, Aitken, Accumulation, Coarse)</li> <li>Size distribution statistics</li> </ul>"},{"location":"theory/#icrp-66-lung-deposition-model","title":"ICRP 66 Lung Deposition Model","text":"<p>The International Commission on Radiological Protection (ICRP) human respiratory tract model is used to calculate regional deposition of inhaled aerosols.</p> <ul> <li>Head airways (HA), tracheobronchial (TB), and alveolar (AL) regions</li> <li>Activity intensity and breathing patterns</li> <li>Deposition fraction calculation</li> </ul>"},{"location":"theory/#chemical-properties","title":"Chemical Properties","text":""},{"location":"theory/#kappa-kohler-theory","title":"kappa-Kohler Theory","text":"<p>kappa-Kohler theory describes the hygroscopicity of aerosol particles, where the kappa value reflects the particle's ability to act as cloud condensation nuclei.</p> <ul> <li>Single-parameter kappa definition</li> <li>Relationship between chemical composition and kappa</li> <li>Hygroscopic growth factor calculation</li> </ul>"},{"location":"theory/#mass-reconstruction","title":"Mass Reconstruction","text":"<p>Reconstructing PM2.5 mass from chemical composition to verify analytical completeness.</p> <ul> <li>Major components: SIA, OM, EC, Soil, SS</li> <li>Ammonium status determination</li> <li>OM/OC ratio selection</li> </ul>"},{"location":"theory/#voc-analysis","title":"VOC Analysis","text":""},{"location":"theory/#ozone-formation-potential-ofp","title":"Ozone Formation Potential (OFP)","text":"<p>Assessment of volatile organic compounds (VOC) contribution to ozone formation.</p> <ul> <li>Maximum Incremental Reactivity (MIR)</li> <li>Species-specific OFP calculation</li> <li>Secondary Organic Aerosol Potential (SOAP)</li> </ul>"},{"location":"theory/icrp/","title":"ICRP 66 Lung Deposition Model","text":"<p>ICRP (International Commission on Radiological Protection) Publication 66 provides a human respiratory tract aerosol deposition model for evaluating health effects of inhaled particles.</p>"},{"location":"theory/icrp/#respiratory-tract-regions","title":"Respiratory Tract Regions","text":""},{"location":"theory/icrp/#head-airways-ha","title":"Head Airways (HA)","text":"<ul> <li>Nasal cavity, pharynx, larynx</li> <li>Primary mechanisms: Inertial impaction, gravitational settling</li> <li>Main deposition region for large particles (&gt;10 um)</li> </ul>"},{"location":"theory/icrp/#tracheobronchial-tb","title":"Tracheobronchial (TB)","text":"<ul> <li>Trachea to terminal bronchioles</li> <li>Mucociliary clearance mechanism</li> <li>Deposition region for medium-sized particles</li> </ul>"},{"location":"theory/icrp/#alveolar-al","title":"Alveolar (AL)","text":"<ul> <li>Respiratory bronchioles, alveolar ducts, alveoli</li> <li>Gas exchange region</li> <li>Main deposition region for fine particles (&lt;1 um)</li> </ul>"},{"location":"theory/icrp/#deposition-mechanisms","title":"Deposition Mechanisms","text":""},{"location":"theory/icrp/#impaction","title":"Impaction","text":"<p>Large particles cannot follow airflow turns due to inertia and impact airway walls.</p> \\[Stk = \\frac{\\rho_p D_p^2 U C_c}{18 \\mu d}\\]"},{"location":"theory/icrp/#sedimentation","title":"Sedimentation","text":"<p>Particles settle on airway walls due to gravity, primarily in small airways and alveoli.</p> \\[v_s = \\frac{\\rho_p D_p^2 g C_c}{18 \\mu}\\]"},{"location":"theory/icrp/#diffusion","title":"Diffusion","text":"<p>Ultrafine particles reach airway walls through Brownian motion.</p> \\[D = \\frac{k_B T C_c}{3 \\pi \\mu D_p}\\]"},{"location":"theory/icrp/#activity-level-parameters","title":"Activity Level Parameters","text":"Activity Breathing Rate (min-1) Tidal Volume (L) Ventilation (L/min) Breathing Mode Sleep 12 0.625 7.5 Nasal Sitting 12 0.75 9 Nasal Light Activity 20 1.25 25 Mixed Heavy Activity 26 1.92 50 Oral"},{"location":"theory/icrp/#deposition-fraction-curve","title":"Deposition Fraction Curve","text":"<p>The relationship between particle size and total deposition efficiency shows a U-shape:</p> <ul> <li>Ultrafine particles (&lt;0.1 um): Diffusion dominated, high deposition efficiency</li> <li>Accumulation mode (0.1-1 um): Lowest deposition efficiency (\"penetration window\")</li> <li>Coarse particles (&gt;1 um): Impaction and sedimentation dominated, high deposition efficiency</li> </ul>"},{"location":"theory/icrp/#aeroviz-implementation","title":"AeroViz Implementation","text":"<pre><code>from AeroViz.dataProcess.SizeDistr import SizeDist\n\n# Create PSD object\npsd = SizeDist(df_pnsd, state='dlogdp', weighting='n')\n\n# Calculate lung deposition\nresult = psd.lung_deposition(activity='light')\n\n# Output\nresult['DF']         # Deposition fraction DataFrame (HA, TB, AL, Total)\nresult['deposited']  # Deposited distribution (dN/dlogDp x DF)\nresult['dose']       # Regional dose\nresult['total_dose'] # Total deposited dose\n</code></pre>"},{"location":"theory/icrp/#output-example","title":"Output Example","text":"<pre><code># Deposition fractions (by particle size)\nresult['DF']\n#           HA       TB       AL    Total\n# 11.8   0.012    0.045    0.285    0.342\n# 20.5   0.008    0.032    0.198    0.238\n# 50.0   0.005    0.018    0.112    0.135\n# 100    0.004    0.012    0.085    0.101\n# 200    0.006    0.015    0.095    0.116\n# 500    0.025    0.035    0.125    0.185\n</code></pre>"},{"location":"theory/icrp/#health-significance","title":"Health Significance","text":"<ul> <li>HA deposition: Primarily cleared by mucociliary system</li> <li>TB deposition: May cause bronchitis, asthma</li> <li>AL deposition: Particles may enter bloodstream, affecting cardiovascular system</li> </ul>"},{"location":"theory/icrp/#references","title":"References","text":"<ol> <li>ICRP (1994). Human Respiratory Tract Model for Radiological Protection. ICRP Publication 66, Ann. ICRP 24(1-3).</li> <li>Hinds, W. C. (1999). Aerosol Technology: Properties, Behavior, and Measurement of Airborne Particles. Wiley.</li> </ol>"},{"location":"theory/improve/","title":"IMPROVE Extinction Equation","text":"<p>The IMPROVE (Interagency Monitoring of Protected Visual Environments) equation estimates atmospheric extinction coefficients from chemical composition, widely used in visibility research.</p>"},{"location":"theory/improve/#revised-improve-2007","title":"Revised IMPROVE (2007)","text":""},{"location":"theory/improve/#complete-equation","title":"Complete Equation","text":"\\[b_{ext} = b_{sp} + b_{ap} + b_{sg} + b_{ag}\\]"},{"location":"theory/improve/#particle-scattering-b_sp","title":"Particle Scattering (\\(b_{sp}\\))","text":"\\[b_{sp} = 2.2 \\times f_S(RH) \\times [Small\\ (NH_4)_2SO_4] + 4.8 \\times f_L(RH) \\times [Large\\ (NH_4)_2SO_4]$$ $$+ 2.4 \\times f_S(RH) \\times [Small\\ NH_4NO_3] + 5.1 \\times f_L(RH) \\times [Large\\ NH_4NO_3]$$ $$+ 2.8 \\times [Small\\ OM] + 6.1 \\times [Large\\ OM]$$ $$+ 1 \\times [Soil] + 1.7 \\times f_{SS}(RH) \\times [SS]\\]"},{"location":"theory/improve/#particle-absorption-b_ap","title":"Particle Absorption (\\(b_{ap}\\))","text":"\\[b_{ap} = 10 \\times [EC]\\]"},{"location":"theory/improve/#size-classification","title":"Size Classification","text":"<ul> <li>Small (fine mode): When \\([X] &lt; 20\\ \\mu g/m^3\\), \\([Small] = [X]\\)</li> <li>Large (coarse mode): \\([Large] = [X] - [Small]\\)</li> </ul>"},{"location":"theory/improve/#hygroscopic-growth-factor-frh","title":"Hygroscopic Growth Factor f(RH)","text":"RH (%) \\(f_S(RH)\\) \\(f_L(RH)\\) \\(f_{SS}(RH)\\) 30 1.0 1.0 1.0 50 1.3 1.4 1.5 70 2.0 2.4 2.8 80 3.0 3.8 4.5 90 5.5 7.5 9.0"},{"location":"theory/improve/#modified-improve","title":"Modified IMPROVE","text":"<p>Simplified version using a single f(RH):</p> \\[b_{ext} = 3 \\times f(RH) \\times [(NH_4)_2SO_4 + NH_4NO_3]$$ $$+ 4 \\times [OM] + 10 \\times [EC] + 1 \\times [Soil] + 1.7 \\times f(RH) \\times [SS]\\]"},{"location":"theory/improve/#mass-extinction-efficiency-mee","title":"Mass Extinction Efficiency (MEE)","text":"Component Dry MEE (m2/g) Description (NH4)2SO4 2.2-4.8 Highly hygroscopic NH4NO3 2.4-5.1 Highly hygroscopic OM 2.8-6.1 Depends on organic type EC 10 Strong absorption Soil 1 Low efficiency SS 1.7 Highly hygroscopic"},{"location":"theory/improve/#gas-extinction","title":"Gas Extinction","text":""},{"location":"theory/improve/#rayleigh-scattering","title":"Rayleigh Scattering","text":"<p>$\\(b_{sg} = 11.4\\ Mm^{-1}\\)$ (at sea level standard conditions)</p>"},{"location":"theory/improve/#no2-absorption","title":"NO2 Absorption","text":"\\[b_{ag} = 0.33 \\times [NO_2]\\ (ppb)\\]"},{"location":"theory/improve/#aeroviz-implementation","title":"AeroViz Implementation","text":"<pre><code>from AeroViz.dataProcess import DataProcess\nfrom pathlib import Path\n\ndp = DataProcess('Optical', Path('./output'))\n\n# IMPROVE calculation\nresult = dp.IMPROVE(\n    df_mass,            # Mass concentration (AS, AN, OM, Soil, SS, EC)\n    df_RH,              # Relative humidity\n    method='revised'    # 'revised' or 'modified'\n)\n\n# Output\nresult['dry']    # Dry extinction by component\nresult['wet']    # Wet extinction by component\nresult['ALWC']   # Aerosol liquid water contribution\nresult['fRH']    # Hygroscopic growth factor\n</code></pre>"},{"location":"theory/improve/#references","title":"References","text":"<ol> <li>Pitchford, M., et al. (2007). Revised Algorithm for Estimating Light Extinction from IMPROVE Particle Speciation Data. JAPCA, 57(11), 1326-1336.</li> <li>Malm, W. C., &amp; Hand, J. L. (2007). An examination of the physical and optical properties of aerosols collected in the IMPROVE program. Atmos. Environ., 41(16), 3407-3427.</li> </ol>"},{"location":"theory/kappa/","title":"kappa-Kohler Hygroscopicity Theory","text":"<p>kappa-Kohler theory uses a single parameter kappa to describe the hygroscopicity of aerosol particles, simplifying the complexity of traditional Kohler theory.</p>"},{"location":"theory/kappa/#basic-principles","title":"Basic Principles","text":""},{"location":"theory/kappa/#traditional-kohler-equation","title":"Traditional Kohler Equation","text":"\\[\\ln\\left(\\frac{RH}{100}\\right) = \\frac{4 M_w \\sigma}{RT \\rho_w D_{wet}} - \\frac{6 n_s M_w}{\\pi \\rho_w D_{wet}^3}\\] <p>The competition between the Kelvin effect term and Raoult effect term determines the equilibrium diameter of the particle.</p>"},{"location":"theory/kappa/#kappa-parameterization","title":"kappa Parameterization","text":"<p>Simplified form proposed by Petters and Kreidenweis (2007):</p> \\[\\frac{1}{a_w} = 1 + \\kappa \\frac{V_s}{V_w}\\] <p>Where: - \\(a_w\\) = Water activity - \\(\\kappa\\) = Hygroscopicity parameter - \\(V_s\\) = Dry particle volume - \\(V_w\\) = Water volume</p>"},{"location":"theory/kappa/#physical-meaning-of-kappa-values","title":"Physical Meaning of kappa Values","text":"kappa Range Hygroscopicity Typical Components 0 Non-hygroscopic Mineral dust, EC 0.01-0.1 Weakly hygroscopic Organic matter 0.1-0.3 Moderately hygroscopic Mixed aerosol 0.3-0.7 Highly hygroscopic Ammonium sulfate, ammonium nitrate &gt;0.7 Extremely hygroscopic Sea salt"},{"location":"theory/kappa/#component-kappa-values","title":"Component kappa Values","text":"Component kappa Value Source (NH4)2SO4 0.53 Petters &amp; Kreidenweis (2007) NH4NO3 0.67 Petters &amp; Kreidenweis (2007) NaCl 1.28 Petters &amp; Kreidenweis (2007) H2SO4 0.90 Petters &amp; Kreidenweis (2007) SOA 0.1 +/- 0.05 Experimental range POA 0.01 Estimated value BC 0 Non-hygroscopic"},{"location":"theory/kappa/#mixed-aerosol-kappa-calculation","title":"Mixed Aerosol kappa Calculation","text":"<p>For internally mixed particles, use volume weighting:</p> \\[\\kappa = \\sum_i \\epsilon_i \\kappa_i\\] <p>Where \\(\\epsilon_i\\) is the volume fraction of component \\(i\\).</p>"},{"location":"theory/kappa/#hygroscopic-growth-factor","title":"Hygroscopic Growth Factor","text":"<p>Calculate growth factor GF from kappa:</p> \\[GF = \\left(\\frac{D_{wet}}{D_{dry}}\\right) = \\left(1 + \\kappa \\frac{RH/100}{1 - RH/100}\\right)^{1/3}\\]"},{"location":"theory/kappa/#aeroviz-implementation","title":"AeroViz Implementation","text":"<pre><code>from AeroViz.dataProcess import DataProcess\nfrom pathlib import Path\n\ndp = DataProcess('Chemistry', Path('./output'))\n\n# Calculate kappa and growth factor\nresult = dp.kappa(df_chem, df_RH)\n\n# Output\nresult['kappa']  # kappa value time series\nresult['gRH']    # Growth factor\n\n# Example output\n#                     kappa    gRH\n# 2024-01-01 00:00    0.35    1.42\n# 2024-01-01 01:00    0.38    1.45\n</code></pre>"},{"location":"theory/kappa/#applications","title":"Applications","text":""},{"location":"theory/kappa/#1-dry-psd-calculation","title":"1. Dry PSD Calculation","text":"<p>Convert ambient PSD to dry PSD:</p> \\[D_{dry} = D_{wet} / GF\\]"},{"location":"theory/kappa/#2-optical-hygroscopic-growth","title":"2. Optical Hygroscopic Growth","text":"<p>Estimate f(RH) for IMPROVE equation.</p>"},{"location":"theory/kappa/#3-ccn-activation","title":"3. CCN Activation","text":"<p>Predict the ability of aerosols to act as cloud condensation nuclei.</p>"},{"location":"theory/kappa/#references","title":"References","text":"<ol> <li>Petters, M. D., &amp; Kreidenweis, S. M. (2007). A single parameter representation of hygroscopic growth and cloud condensation nucleus activity. Atmos. Chem. Phys., 7(8), 1961-1971.</li> <li>Kohler, H. (1936). The nucleus in and the growth of hygroscopic droplets. Trans. Faraday Soc., 32, 1152-1161.</li> </ol>"},{"location":"theory/lognormal/","title":"Log-normal Distribution","text":"<p>Aerosol size distributions typically follow log-normal distributions, which is determined by the physical mechanisms of particle formation and growth.</p>"},{"location":"theory/lognormal/#mathematical-definition","title":"Mathematical Definition","text":""},{"location":"theory/lognormal/#probability-density-function","title":"Probability Density Function","text":"\\[\\frac{dN}{d\\ln D_p} = \\frac{N_t}{\\sqrt{2\\pi}\\ln\\sigma_g} \\exp\\left[-\\frac{(\\ln D_p - \\ln D_{pg})^2}{2\\ln^2\\sigma_g}\\right]\\] <p>Where: - \\(N_t\\) = Total number concentration - \\(D_{pg}\\) = Geometric mean diameter (GMD) - \\(\\sigma_g\\) = Geometric standard deviation (GSD)</p>"},{"location":"theory/lognormal/#common-representations","title":"Common Representations","text":"Representation Symbol Unit Description dN \\(dN\\) #/cm3 Number concentration dN/dDp \\(dN/dD_p\\) #/cm3/nm Number per diameter dN/dlogDp \\(dN/d\\log D_p\\) #/cm3 Number per log diameter"},{"location":"theory/lognormal/#distribution-conversion","title":"Distribution Conversion","text":""},{"location":"theory/lognormal/#number-to-surface-area","title":"Number to Surface Area","text":"\\[\\frac{dS}{d\\log D_p} = \\pi D_p^2 \\cdot \\frac{dN}{d\\log D_p}\\]"},{"location":"theory/lognormal/#number-to-volume","title":"Number to Volume","text":"\\[\\frac{dV}{d\\log D_p} = \\frac{\\pi}{6} D_p^3 \\cdot \\frac{dN}{d\\log D_p}\\]"},{"location":"theory/lognormal/#hatch-choate-conversion","title":"Hatch-Choate Conversion","text":"<p>Relationship between GMD of different weightings:</p> \\[\\ln D_{pg,S} = \\ln D_{pg,N} + 2\\ln^2\\sigma_g$$ $$\\ln D_{pg,V} = \\ln D_{pg,N} + 3\\ln^2\\sigma_g\\]"},{"location":"theory/lognormal/#modal-classification","title":"Modal Classification","text":"<p>Atmospheric aerosols typically contain multiple modes:</p> Mode Size Range Primary Sources Nucleation 1-25 nm Gas-to-particle conversion, new particle formation Aitken 25-100 nm Growth, combustion emissions Accumulation 100-1000 nm Aging, cloud processing Coarse &gt;1000 nm Mechanical processes, sea salt, dust"},{"location":"theory/lognormal/#statistical-calculations","title":"Statistical Calculations","text":""},{"location":"theory/lognormal/#geometric-mean-diameter-gmd","title":"Geometric Mean Diameter (GMD)","text":"\\[D_{pg} = \\exp\\left(\\frac{\\sum n_i \\ln D_{p,i}}{\\sum n_i}\\right)\\]"},{"location":"theory/lognormal/#geometric-standard-deviation-gsd","title":"Geometric Standard Deviation (GSD)","text":"\\[\\ln\\sigma_g = \\sqrt{\\frac{\\sum n_i (\\ln D_{p,i} - \\ln D_{pg})^2}{\\sum n_i}}\\]"},{"location":"theory/lognormal/#mode-diameter","title":"Mode Diameter","text":"<p>The diameter corresponding to the distribution peak.</p>"},{"location":"theory/lognormal/#aeroviz-implementation","title":"AeroViz Implementation","text":"<pre><code>from AeroViz.dataProcess.SizeDistr import SizeDist\n\n# Create PSD object\npsd = SizeDist(df_pnsd, state='dlogdp', weighting='n')\n\n# Distribution conversion\nsurface = psd.to_surface()  # Surface area distribution\nvolume = psd.to_volume()    # Volume distribution\n\n# Statistical properties\nprops = psd.properties()\n# props['total_n']  # Total number concentration\n# props['GMD_n']    # Geometric mean diameter\n# props['GSD_n']    # Geometric standard deviation\n# props['mode_n']   # Mode diameter\n\n# Mode statistics\nstats = psd.mode_statistics()\n# stats['number']     # Number distribution by mode\n# stats['surface']    # Surface area distribution by mode\n# stats['volume']     # Volume distribution by mode\n# stats['statistics'] # GMD, GSD, total for each mode\n</code></pre>"},{"location":"theory/lognormal/#multi-modal-fitting","title":"Multi-modal Fitting","text":"<p>Log-normal mixture model:</p> \\[\\frac{dN}{d\\log D_p} = \\sum_{i=1}^{n} \\frac{N_i}{\\sqrt{2\\pi}\\log\\sigma_{g,i}} \\exp\\left[-\\frac{(\\log D_p - \\log D_{pg,i})^2}{2\\log^2\\sigma_{g,i}}\\right]\\]"},{"location":"theory/lognormal/#references","title":"References","text":"<ol> <li>Seinfeld, J. H., &amp; Pandis, S. N. (2016). Atmospheric Chemistry and Physics: From Air Pollution to Climate Change. Wiley.</li> <li>Hinds, W. C. (1999). Aerosol Technology: Properties, Behavior, and Measurement of Airborne Particles. Wiley.</li> </ol>"},{"location":"theory/mass_reconstruction/","title":"Mass Reconstruction","text":"<p>Mass reconstruction reconstructs PM2.5 mass from chemical composition to verify the completeness and closure of chemical analysis.</p>"},{"location":"theory/mass_reconstruction/#major-components","title":"Major Components","text":""},{"location":"theory/mass_reconstruction/#secondary-inorganic-aerosol-sia","title":"Secondary Inorganic Aerosol (SIA)","text":""},{"location":"theory/mass_reconstruction/#ammonium-sulfate-as","title":"Ammonium Sulfate (AS)","text":"\\[(NH_4)_2SO_4 = 1.375 \\times SO_4^{2-}\\]"},{"location":"theory/mass_reconstruction/#ammonium-nitrate-an","title":"Ammonium Nitrate (AN)","text":"\\[NH_4NO_3 = 1.29 \\times NO_3^{-}\\]"},{"location":"theory/mass_reconstruction/#ammonium-status-determination","title":"Ammonium Status Determination","text":"<p>Calculate ion balance:</p> \\[R = \\frac{[NH_4^+]}{[SO_4^{2-}]/48 \\times 2 + [NO_3^-]/62}\\] R Value Status Description &gt;1.1 Excess NH4+ excess, possibly NH4Cl present 0.9-1.1 Balance Near neutral &lt;0.9 Deficiency NH4+ deficient, acidic aerosol"},{"location":"theory/mass_reconstruction/#organic-matter-om","title":"Organic Matter (OM)","text":"\\[OM = OC \\times f_{OM/OC}\\] Environment Type \\(f_{OM/OC}\\) Description Urban fresh 1.4-1.6 Primary organic matter dominated Suburban aged 1.6-1.8 Mixed sources Background 1.8-2.2 Secondary organic matter dominated"},{"location":"theory/mass_reconstruction/#elemental-carbon-ec","title":"Elemental Carbon (EC)","text":"<p>Use measured value directly:</p> \\[EC = EC_{measured}\\]"},{"location":"theory/mass_reconstruction/#soil-dust","title":"Soil Dust","text":"<p>Estimated from crustal elements:</p> \\[Soil = 2.20 \\times Al + 2.49 \\times Si + 1.63 \\times Ca + 2.42 \\times Fe + 1.94 \\times Ti\\] <p>If Si data is unavailable:</p> \\[Soil = 2.20 \\times Al + 1.63 \\times Ca + 2.42 \\times Fe + 1.94 \\times Ti\\] <p>Multiply by correction factor (~1.89).</p>"},{"location":"theory/mass_reconstruction/#sea-salt-ss","title":"Sea Salt (SS)","text":"\\[SS = 2.54 \\times Na^+\\] <p>Or considering chloride depletion:</p> \\[SS = Na^+ + Cl^- + 0.038 \\times Na^+\\]"},{"location":"theory/mass_reconstruction/#total-mass-reconstruction","title":"Total Mass Reconstruction","text":"\\[PM_{2.5,reconstructed} = AS + AN + OM + EC + Soil + SS\\]"},{"location":"theory/mass_reconstruction/#closure-evaluation","title":"Closure Evaluation","text":"\\[Closure = \\frac{PM_{2.5,reconstructed}}{PM_{2.5,measured}} \\times 100\\%\\] Closure Assessment 80-120% Good 70-80% or 120-130% Acceptable &lt;70% or &gt;130% Needs review"},{"location":"theory/mass_reconstruction/#unidentified-mass","title":"Unidentified Mass","text":"\\[Unidentified = PM_{2.5,measured} - PM_{2.5,reconstructed}\\] <p>Possible sources: - Bound water - Metal oxides - Analytical errors - Unmeasured components</p>"},{"location":"theory/mass_reconstruction/#aeroviz-implementation","title":"AeroViz Implementation","text":"<pre><code>from AeroViz.dataProcess import DataProcess\nfrom pathlib import Path\n\ndp = DataProcess('Chemistry', Path('./output'))\n\n# Basic mass reconstruction\nresult = dp.reconstruction_basic(df_chem)\n\n# Output\nresult['mass']        # Reconstructed mass DataFrame\n#   AS, AN, OM, EC, Soil, SS, PM25_rc\n\nresult['NH4_status']  # Ammonium status\n#   Excess / Balance / Deficiency\n\n# Full reconstruction (with ite)\nresult_full = dp.reconstruction_full(df_chem)\n</code></pre>"},{"location":"theory/mass_reconstruction/#input-format","title":"Input Format","text":"<pre><code>required_columns = [\n    'SO42-', 'NO3-', 'NH4+',      # Ions\n    'OC', 'EC',                    # Carbon components\n    'Na+', 'Cl-',                  # Sea salt\n    'Al', 'Fe', 'Ti', 'Ca',        # Crustal elements\n    'PM25'                         # Total mass\n]\n</code></pre>"},{"location":"theory/mass_reconstruction/#references","title":"References","text":"<ol> <li>Malm, W. C., et al. (1994). Spatial and monthly trends in speciated fine particle concentration in the United States. JGR, 99(D1), 1347-1370.</li> <li>Turpin, B. J., &amp; Lim, H. J. (2001). Species contributions to PM2.5 mass concentrations: Revisiting common assumptions for estimating organic mass. Aerosol Sci. Technol., 35(1), 602-610.</li> </ol>"},{"location":"theory/mie/","title":"Mie Scattering Theory","text":"<p>Mie theory provides the exact solution for the interaction of electromagnetic waves with homogeneous spherical particles, proposed by Gustav Mie in 1908.</p>"},{"location":"theory/mie/#basic-principles","title":"Basic Principles","text":"<p>When electromagnetic waves encounter particles, scattering and absorption occur. Mie theory provides the mathematical framework for calculating these processes.</p>"},{"location":"theory/mie/#efficiency-factors","title":"Efficiency Factors","text":"<p>For a particle with diameter \\(D_p\\), the efficiency factors are defined as:</p> \\[Q_{ext} = Q_{sca} + Q_{abs}\\] <p>Where: - \\(Q_{ext}\\) = Extinction efficiency factor - \\(Q_{sca}\\) = Scattering efficiency factor - \\(Q_{abs}\\) = Absorption efficiency factor</p>"},{"location":"theory/mie/#size-parameter","title":"Size Parameter","text":"\\[x = \\frac{\\pi D_p}{\\lambda}\\] <p>Where \\(\\lambda\\) is the wavelength of incident light.</p>"},{"location":"theory/mie/#complex-refractive-index","title":"Complex Refractive Index","text":"\\[m = n + ik\\] <ul> <li>\\(n\\) = Real part (refraction)</li> <li>\\(k\\) = Imaginary part (absorption)</li> </ul>"},{"location":"theory/mie/#extinction-coefficient-calculation","title":"Extinction Coefficient Calculation","text":"<p>Calculate total extinction coefficient from size distribution:</p> \\[b_{ext} = \\int_0^\\infty Q_{ext}(D_p, m, \\lambda) \\cdot \\frac{\\pi D_p^2}{4} \\cdot n(D_p) \\, dD_p\\] <p>Where \\(n(D_p)\\) is the particle number size distribution.</p>"},{"location":"theory/mie/#mixing-modes","title":"Mixing Modes","text":""},{"location":"theory/mie/#internal-mixing","title":"Internal Mixing","text":"<p>All components are uniformly mixed within a single particle, using volume-weighted average refractive index:</p> \\[m_{mix} = \\sum_i f_i \\cdot m_i\\] <p>Where \\(f_i\\) is the volume fraction of component \\(i\\).</p>"},{"location":"theory/mie/#external-mixing","title":"External Mixing","text":"<p>Each component forms independent particles, calculated separately and summed:</p> \\[b_{ext} = \\sum_i b_{ext,i}\\]"},{"location":"theory/mie/#core-shell-structure","title":"Core-Shell Structure","text":"<p>EC as the core with other components as the shell. Suitable for aged aerosols.</p>"},{"location":"theory/mie/#aeroviz-implementation","title":"AeroViz Implementation","text":"<pre><code>from AeroViz.dataProcess import DataProcess\nfrom pathlib import Path\n\ndp = DataProcess('Optical', Path('./output'))\n\n# Calculate extinction distribution\nresult = dp.Mie(\n    df_pnsd,           # Particle number size distribution\n    df_RI,             # Refractive index DataFrame (n, k columns)\n    wave_length=550    # Wavelength (nm)\n)\n\n# Output\nresult['extinction']   # Extinction coefficient (Mm-1)\nresult['scattering']   # Scattering coefficient (Mm-1)\nresult['absorption']   # Absorption coefficient (Mm-1)\n</code></pre>"},{"location":"theory/mie/#references","title":"References","text":"<ol> <li>Mie, G. (1908). Beitrage zur Optik truber Medien. Annalen der Physik, 330(3), 377-445.</li> <li>Bohren, C. F., &amp; Huffman, D. R. (1983). Absorption and Scattering of Light by Small Particles. Wiley.</li> </ol>"},{"location":"theory/ofp/","title":"Ozone Formation Potential (OFP)","text":"<p>Ozone Formation Potential (OFP) evaluates the contribution of volatile organic compounds (VOCs) to tropospheric ozone formation.</p>"},{"location":"theory/ofp/#basic-principles","title":"Basic Principles","text":"<p>VOCs react with NOx under sunlight to form ozone:</p> \\[VOC + NO_x + h\\nu \\rightarrow O_3 + \\text{products}\\] <p>Different VOCs have vastly different reactivities, so quantifying the relative contribution of each species is necessary.</p>"},{"location":"theory/ofp/#maximum-incremental-reactivity-mir","title":"Maximum Incremental Reactivity (MIR)","text":""},{"location":"theory/ofp/#definition","title":"Definition","text":"<p>MIR (Maximum Incremental Reactivity) represents the amount of ozone produced per unit mass of VOC under optimal conditions:</p> \\[MIR_i = \\frac{\\partial [O_3]}{\\partial [VOC_i]}_{max}\\] <p>Units: g O3 / g VOC</p>"},{"location":"theory/ofp/#typical-mir-values","title":"Typical MIR Values","text":"VOC Species MIR (g O3/g VOC) Reactivity Class Methane 0.014 Very low Ethane 0.28 Low Propane 0.49 Low Ethylene 9.00 High Propylene 11.66 High Toluene 4.00 Medium Xylene 7.80 High Formaldehyde 9.46 High Isoprene 10.61 High"},{"location":"theory/ofp/#ofp-calculation","title":"OFP Calculation","text":""},{"location":"theory/ofp/#single-species","title":"Single Species","text":"\\[OFP_i = C_i \\times MIR_i\\] <p>Where: - \\(C_i\\) = Concentration of species i (ug/m3) - \\(MIR_i\\) = MIR value of species i</p>"},{"location":"theory/ofp/#total-ofp","title":"Total OFP","text":"\\[OFP_{total} = \\sum_i C_i \\times MIR_i\\]"},{"location":"theory/ofp/#secondary-organic-aerosol-potential-soap","title":"Secondary Organic Aerosol Potential (SOAP)","text":""},{"location":"theory/ofp/#definition_1","title":"Definition","text":"<p>SOAP (Secondary Organic Aerosol Potential) evaluates the ability of VOCs to form secondary organic aerosol:</p> \\[SOAP_i = C_i \\times SOAP_{factor,i}\\]"},{"location":"theory/ofp/#typical-soap-factors","title":"Typical SOAP Factors","text":"VOC Species SOAP Factor Description Benzene 1.0 Reference species Toluene 2.7 Moderate SOA formation Xylene 5.5 High SOA formation alpha-Pinene 32 Very high (biogenic) Isoprene 2.4 Biogenic"},{"location":"theory/ofp/#voc-reactivity-classification","title":"VOC Reactivity Classification","text":""},{"location":"theory/ofp/#by-chemical-category","title":"By Chemical Category","text":"Category Typical Reactivity Representative Species Alkanes Low-Medium Ethane, Propane, Butane Alkenes High Ethylene, Propylene, Butene Aromatics Medium-High Benzene, Toluene, Xylene Aldehydes High Formaldehyde, Acetaldehyde Terpenes Very High Isoprene, alpha-Pinene"},{"location":"theory/ofp/#aeroviz-implementation","title":"AeroViz Implementation","text":"<pre><code>from AeroViz.dataProcess import DataProcess\nfrom pathlib import Path\n\ndp = DataProcess('VOC', Path('./output'))\n\n# Calculate OFP and SOAP\nresult = dp.potential(df_voc)\n\n# Output\nresult['OFP']    # OFP contribution per species (ug O3/m3)\nresult['SOAP']   # SOAP contribution per species\nresult['total']  # Total OFP/SOAP\n</code></pre>"},{"location":"theory/ofp/#input-format","title":"Input Format","text":"<pre><code># Columns are VOC species names\ndf_voc.columns = ['Benzene', 'Toluene', 'Ethylbenzene', 'm,p-Xylene', 'o-Xylene', ...]\n\n# Units: ppb or ug/m3\n</code></pre>"},{"location":"theory/ofp/#supported-species","title":"Supported Species","text":"<p>See <code>support_voc.json</code>, including: - Alkanes (C2-C12) - Alkenes (C2-C6) - Aromatics (BTEX, etc.) - Halogenated hydrocarbons - Oxygenated VOCs (OVOCs)</p>"},{"location":"theory/ofp/#applications","title":"Applications","text":"<ol> <li>Source Identification: Different sources have distinct VOC compositions and OFP characteristics</li> <li>Control Strategies: Prioritize controlling high-reactivity VOCs</li> <li>Ozone Prediction: Estimate the impact of VOC emission reductions on ozone levels</li> </ol>"},{"location":"theory/ofp/#references","title":"References","text":"<ol> <li>Carter, W. P. L. (2010). Development of the SAPRC-07 chemical mechanism. Atmos. Environ., 44(40), 5324-5335.</li> <li>Derwent, R. G., et al. (2010). Photochemical ozone creation potentials (POCPs) for different emission sources of organic compounds under European conditions estimated with a Master Chemical Mechanism. Atmos. Environ., 41(12), 2570-2579.</li> </ol>"}]}